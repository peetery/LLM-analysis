{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface_docstring",
  "timestamp": "2025-12-29T05:10:38.775334",
  "response_time": 235.7029709815979,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface_docstring\\claude-code-sonnet-4.5\\run_014\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet.\n\nBelow is the interface+docstrings of the class:\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict):\n    \"\"\"\n    Represents a single product entry in the order.\n\n:key name: The name of the product.\n    :key price: The price per unit of the product.\n    :key quantity: The number of units of the product.\n    \"\"\"\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n        \"\"\"\n        Initializes a new OrderCalculator instance.\n        Initializes an empty list of items (each represented as a TypedDict 'Item')\n        and stores the configured tax and shipping parameters.\n\n:param tax_rate: The percentage of tax applied to the final amount, expressed as a float between 0.0 and 1.0 (default is 0.23 for 23%).\n        :param free_shipping_threshold: The minimum order value (after discount) that qualifies for free shipping (default is 100.0).\n        :param shipping_cost: The cost of shipping applied if the order does not meet the free shipping threshold (default is 10.0).\n\n:raises ValueError:\n            - If tax_rate is not in the range [0.0, 1.0].\n            - If free_shipping_threshold is negative.\n            - If shipping_cost is negative.\n        :raises TypeError: If any parameter is of incorrect type.\n        \"\"\"\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n        \"\"\"\n        Add an item to the order.\n\nIf an item with the same name and price already exists, its quantity is increased.\n\n:param name: the name of the item\n        :param price: the price of the item\n        :param quantity: the quantity of the item (default is 1)\n        :raises ValueError: If name is empty, price <= 0, quantity < 1, or item with same name but different price exists.\n        :raises TypeError: If inputs are of incorrect types.\n        \"\"\"\n\ndef remove_item(self, name: str):\n        \"\"\"\n        Removes an item from the order.\n\n:param name: The name of the item to remove.\n        :raises ValueError: If no item with the given name exists in the order.\n        :raises TypeError: If name is not a string.\n        \"\"\"\n\ndef get_subtotal(self) -> float:\n        \"\"\"\n        Calculates the subtotal (sum of item prices times their quantities) for all items in the order.\n\n:return: The subtotal as a float.\n        :raises ValueError: If the order is empty.\n        \"\"\"\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n        \"\"\"\n        Applies a percentage discount to the given subtotal.\n\n:param subtotal: the subtotal amount (must be >= 0)\n        :param discount: the discount rate as a float between 0.0 and 1.0 (e.g. 0.2 = 20%).\n        :return: The discounted subtotal.\n        :raises ValueError: If subtotal < 0 or discount is outside the [0.0, 1.0] range.\n        :raises TypeError: If inputs are of incorrect types.\n        \"\"\"\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n        \"\"\"\n        Calculates the shipping cost based on the discounted subtotal.\n\nIf the discounted subtotal >= free shipping threshold shipping is free (0.0).\n        Otherwise, the standard shipping cost is applied.\n\n:param discounted_subtotal: The subtotal amount after applying discount (must be >= 0.0).\n        :return: The shipping cost as a float (0.0 or self.shipping_cost).\n        :raises TypeError: If input is not a number.\n        \"\"\"\n\ndef calculate_tax(self, amount: float) -> float:\n        \"\"\"\n        Calculates the tax based on the provided amount using the configured tax rate.\n\n:param amount: The amount on which to calculate the tax (must be >= 0.0).\n        :return: The tax as a float.\n        :raises ValueError: If the amount is negative.\n        :raises TypeError: If input is not a number.\n        \"\"\"\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n        \"\"\"\n        Calculates the total cost of the order after applying discount, shipping, and tax.\n\nThis method performs the following steps:\n        1. Calculates the subtotal from all items.\n        2. Applies the given discount.\n        3. Adds shipping cost if necessary.\n        4. Calculates tax on the discounted subtotal + shipping.\n\n:param discount: Discount rate between 0.0 and 1.0 (e.g. 0.2 = 20%).\n        :return: The final total as a float.\n        :raises ValueError:\n            - If the subtotal is negative.\n            - If the discount is invalid.\n            - If the order is empty.\n        :raises TypeError: If input is not a number.\n        \"\"\"\n\ndef total_items(self) -> int:\n        \"\"\"\n        Returns the total quantity of all items in the order.\n\n:return: The sum of the quantities of all items.\n        :return:\n        \"\"\"\n\ndef clear_order(self):\n        \"\"\"\n        Removes all items from the order, resetting it to an empty state.\n        \"\"\"\n\ndef list_items(self) -> List[str]:\n        \"\"\"\n        Returns a list of all unique item names currently in the order.\n\n:return: A list of unique item names (no duplicates).\n        \"\"\"\n\ndef is_empty(self) -> bool:\n        \"\"\"\n        Checks whether the order is currently empty.\n\n:return: True if no items are in the order, False otherwise.\n        \"\"\"\n```",
        "response": "## Summary\n\nI've identified approximately **60-70 test cases** covering:\n\nâś… **Happy paths**: All methods work correctly with valid inputs\nâťŚ **Error cases**: All documented ValueError and TypeError conditions\nđź”Ť **Edge cases**: Boundary values, empty states, precision\nđź”„ **Integration**: Multi-step workflows and state transitions\n\n**Key testing priorities:**\n1. All exception conditions mentioned in docstrings\n2. Boundary values (0.0, 1.0 for rates; threshold boundaries)\n3. Empty order state handling\n4. Item name/price conflict detection\n5. Calculation accuracy (especially with discount â†’ shipping â†’ tax chain)\n6. Type safety for all parameters\n\nThe test suite will be organized into test classes grouping related functionality (initialization, item management, calculations, utilities) with descriptive test method names following the pattern `test_<method>_<scenario>`.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll analyze the `OrderCalculator` class and identify comprehensive test scenarios for all methods.\n\n## Test Scenarios for OrderCalculator\n\n### 1. `__init__` (Constructor)\n\n**Normal Cases:**\n1. **Default initialization** - Verify calculator initializes with default values (tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0) and empty items list\n2. **Custom valid parameters** - Initialize with custom valid tax_rate, free_shipping_threshold, and shipping_cost values\n3. **Boundary tax_rate values** - Initialize with tax_rate=0.0 and tax_rate=1.0 (valid boundaries)\n4. **Zero shipping cost** - Initialize with shipping_cost=0.0 (valid case)\n5. **Zero free shipping threshold** - Initialize with free_shipping_threshold=0.0 (valid case)\n\n**Invalid Input Cases:**\n6. **Tax_rate below 0** - ValueError when tax_rate < 0.0\n7. **Tax_rate above 1** - ValueError when tax_rate > 1.0\n8. **Negative free_shipping_threshold** - ValueError when free_shipping_threshold < 0.0\n9. **Negative shipping_cost** - ValueError when shipping_cost < 0.0\n10. **Wrong type for tax_rate** - TypeError when tax_rate is string/None/list\n11. **Wrong type for free_shipping_threshold** - TypeError when not numeric\n12. **Wrong type for shipping_cost** - TypeError when not numeric\n\n### 2. `add_item`\n\n**Normal Cases:**\n13. **Add single item** - Add one item with name, price, quantity and verify it's stored\n14. **Add item with default quantity** - Add item without specifying quantity (defaults to 1)\n15. **Add multiple different items** - Add several items with different names\n16. **Add duplicate item (same name and price)** - Quantity should be increased, not duplicated\n17. **Add item with large quantity** - Test with quantity > 100\n\n**Invalid Input Cases:**\n18. **Empty name** - ValueError when name is empty string\n19. **Price equals zero** - ValueError when price = 0.0\n20. **Negative price** - ValueError when price < 0\n21. **Zero quantity** - ValueError when quantity = 0\n22. **Negative quantity** - ValueError when quantity < 0\n23. **Same name but different price** - ValueError when item with same name but different price exists\n24. **Wrong type for name** - TypeError when name is not string\n25. **Wrong type for price** - TypeError when price is not numeric\n26. **Wrong type for quantity** - TypeError when quantity is not int\n\n**Edge Cases:**\n27. **Very small price** - Test with price = 0.01\n28. **Very large price** - Test with price = 999999.99\n29. **Whitespace-only name** - Should raise ValueError (effectively empty)\n\n### 3. `remove_item`\n\n**Normal Cases:**\n30. **Remove existing item** - Remove an item that exists in the order\n31. **Remove after multiple adds** - Remove item that was added multiple times (quantity increased)\n\n**Invalid Input Cases:**\n32. **Remove non-existent item** - ValueError when item doesn't exist\n33. **Remove from empty order** - ValueError when order is empty\n34. **Wrong type for name** - TypeError when name is not string\n35. **Empty string name** - ValueError when trying to remove \"\"\n\n**Edge Cases:**\n36. **Remove item then add again** - Verify item can be re-added after removal\n37. **Case sensitivity** - Verify \"Apple\" and \"apple\" are treated as different items\n\n### 4. `get_subtotal`\n\n**Normal Cases:**\n38. **Single item subtotal** - Calculate subtotal for one item\n39. **Multiple items subtotal** - Calculate subtotal for multiple items\n40. **Item with quantity > 1** - Verify price * quantity calculation\n\n**Invalid Input Cases:**\n41. **Empty order subtotal** - ValueError when no items in order\n\n**Edge Cases:**\n42. **Subtotal precision** - Verify floating-point precision (e.g., 0.1 * 3 = 0.3)\n43. **Large subtotal** - Test with many items totaling large amount\n\n### 5. `apply_discount`\n\n**Normal Cases:**\n44. **Apply valid discount** - Apply discount like 0.2 (20%) to subtotal\n45. **Apply zero discount** - Discount = 0.0 should return original subtotal\n46. **Apply maximum discount** - Discount = 1.0 should return 0.0\n47. **Apply to zero subtotal** - apply_discount(0.0, 0.5) should return 0.0\n\n**Invalid Input Cases:**\n48. **Negative subtotal** - ValueError when subtotal < 0\n49. **Discount below 0** - ValueError when discount < 0.0\n50. **Discount above 1** - ValueError when discount > 1.0\n51. **Wrong type for subtotal** - TypeError when subtotal is not numeric\n52. **Wrong type for discount** - TypeError when discount is not numeric\n\n**Edge Cases:**\n53. **Discount calculation precision** - Verify correct rounding/precision\n\n### 6. `calculate_shipping`\n\n**Normal Cases:**\n54. **Subtotal below threshold** - Should return shipping_cost\n55. **Subtotal equals threshold** - Should return 0.0 (free shipping)\n56. **Subtotal above threshold** - Should return 0.0 (free shipping)\n57. **Zero subtotal** - Should return shipping_cost\n\n**Invalid Input Cases:**\n58. **Wrong type for discounted_subtotal** - TypeError when not numeric\n\n**Edge Cases:**\n59. **Subtotal just below threshold** - e.g., 99.99 when threshold is 100.0\n60. **Subtotal just above threshold** - e.g., 100.01 when threshold is 100.0\n\n### 7. `calculate_tax`\n\n**Normal Cases:**\n61. **Calculate tax on positive amount** - Verify tax = amount * tax_rate\n62. **Calculate tax on zero amount** - Should return 0.0\n\n**Invalid Input Cases:**\n63. **Negative amount** - ValueError when amount < 0\n64. **Wrong type for amount** - TypeError when amount is not numeric\n\n**Edge Cases:**\n65. **Tax precision** - Verify correct rounding/precision\n\n### 8. `calculate_total`\n\n**Normal Cases:**\n66. **Total with no discount** - Default discount=0.0\n67. **Total with discount** - Apply discount and verify total\n68. **Total with free shipping** - Order above threshold, shipping = 0\n69. **Total with shipping cost** - Order below threshold, shipping added\n70. **Complete calculation chain** - Verify subtotal â†’ discount â†’ shipping â†’ tax chain\n\n**Invalid Input Cases:**\n71. **Empty order total** - ValueError when no items\n72. **Invalid discount** - ValueError when discount outside [0.0, 1.0]\n73. **Wrong type for discount** - TypeError when discount is not numeric\n\n**Edge Cases:**\n74. **Total at free shipping boundary** - Discounted subtotal exactly at threshold\n75. **Total just below threshold** - Verify shipping is added\n76. **Total just above threshold** - Verify shipping is not added\n77. **Discount affecting shipping** - Order above threshold before discount, below after\n\n### 9. `total_items`\n\n**Normal Cases:**\n78. **Empty order** - Should return 0\n79. **Single item with quantity 1** - Should return 1\n80. **Single item with quantity > 1** - Should return that quantity\n81. **Multiple items** - Should return sum of all quantities\n82. **After adding duplicate item** - Should count increased quantity\n\n**Edge Cases:**\n83. **After removing item** - Verify count decreases correctly\n\n### 10. `clear_order`\n\n**Normal Cases:**\n84. **Clear non-empty order** - Verify all items removed\n85. **Clear already empty order** - Should work without error\n\n**Edge Cases:**\n86. **Operations after clear** - Verify order is truly empty (subtotal should raise ValueError)\n\n### 11. `list_items`\n\n**Normal Cases:**\n87. **Empty order** - Should return empty list\n88. **Single item** - Should return list with one name\n89. **Multiple items** - Should return all unique names\n90. **Duplicate items** - Should return each name only once\n\n**Edge Cases:**\n91. **Order of names** - Verify items are listed (implementation-dependent, but should be consistent)\n92. **After removing item** - Verify removed item not in list\n\n### 12. `is_empty`\n\n**Normal Cases:**\n93. **New calculator** - Should return True\n94. **After adding item** - Should return False\n95. **After clearing order** - Should return True\n96. **After removing all items** - Should return True\n\n**Edge Cases:**\n97. **After add then remove same item** - Should return True\n\n### 13. Integration/Workflow Tests\n\n**Complex Scenarios:**\n98. **Complete order workflow** - Add items â†’ calculate total â†’ clear â†’ verify empty\n99. **Multiple discounts** - Apply different discounts and verify totals\n100. **Add, remove, add same item** - Verify state consistency\n101. **Edge case: discount brings total below shipping threshold** - Start above, discount brings below\n102. **Edge case: discount brings total to exactly threshold** - Verify free shipping applies\n103. **Precision in complete calculation** - Add items with prices like 0.1, 0.2, verify total precision\n104. **Very large order** - Many items, large quantities, verify calculations\n\n### 14. State Consistency Tests\n\n**State Verification:**\n105. **Items list independence** - Verify modifying returned list doesn't affect internal state\n106. **Multiple calculators** - Verify separate instances don't interfere\n107. **Parameter immutability** - Verify tax_rate, shipping_cost, threshold don't change\n\nThis gives approximately **107 distinct test scenarios** covering:\n- All public methods\n- Normal/happy path cases\n- Invalid inputs (ValueError)\n- Type errors (TypeError)\n- Edge cases and boundaries\n- Integration workflows\n- State consistency",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_init_custom_valid_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_boundary_tax_rate_zero(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_boundary_tax_rate_one(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        self.assertEqual(calc.tax_rate, 1.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_tax_rate_below_zero(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_tax_rate_above_one(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=1.1)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_wrong_type_tax_rate_string(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"0.23\")\n\n    def test_init_wrong_type_free_shipping_threshold(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(free_shipping_threshold=\"100\")\n\n    def test_init_wrong_type_shipping_cost(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(shipping_cost=None)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Banana\", 0.5)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_add_item_duplicate_same_name_and_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 10.0, 150)\n        self.assertEqual(calc.total_items(), 150)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.5, 1)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0, 1)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative\", -1.5, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Zero Qty\", 1.5, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative Qty\", 1.5, -1)\n\n    def test_add_item_same_name_different_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.0, 1)\n\n    def test_add_item_wrong_type_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.5, 1)\n\n    def test_add_item_wrong_type_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"1.5\", 1)\n\n    def test_add_item_wrong_type_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.5, 1.5)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.5, 1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_after_multiple_adds(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_wrong_type_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_then_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"apple\", 2.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 1.5)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_get_subtotal_item_with_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 5)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.get_subtotal()\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3)\n\n    def test_get_subtotal_large_amount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 100.0, 10)\n        calc.add_item(\"Item2\", 200.0, 5)\n        self.assertAlmostEqual(calc.get_subtotal(), 2000.0)\n\n    def test_apply_discount_valid(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.2)\n        self.assertAlmostEqual(result, 80.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_maximum(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 0.2)\n\n    def test_apply_discount_below_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_above_one(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.1)\n\n    def test_apply_discount_wrong_type_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(\"100\", 0.2)\n\n    def test_apply_discount_wrong_type_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"0.2\")\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(123.45, 0.15)\n        self.assertAlmostEqual(result, 104.9325)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_equals_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"100\")\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"100\")\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(123.45)\n        self.assertAlmostEqual(tax, 28.3935)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        expected = 80.0 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 200.0, 1)\n        total = calc.calculate_total()\n        expected = 200.0 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_shipping_cost(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_complete_chain(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 60.0, 2)\n        calc.add_item(\"Item2\", 40.0, 1)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 160.0\n        discounted = subtotal * 0.9\n        shipping = 0.0\n        tax = discounted * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_total()\n\n    def test_calculate_total_invalid_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=1.5)\n\n    def test_calculate_total_wrong_type_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(discount=\"0.1\")\n\n    def test_calculate_total_at_free_shipping_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 100.0\n        shipping = 0.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_just_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 99.99, 1)\n        total = calc.calculate_total()\n        expected = (99.99 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_just_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.01, 1)\n        total = calc.calculate_total()\n        expected = 100.01 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_discount_affecting_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.25)\n        discounted = 93.75\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_total_items_after_adding_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_operations_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        with self.assertRaises(ValueError):\n            calc.get_subtotal()\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_duplicate_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertEqual(items[0], \"Apple\")\n\n    def test_list_items_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_calculator(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        total = calc.calculate_total(discount=0.1)\n        self.assertGreater(total, 0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_multiple_discounts(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total1 = calc.calculate_total(discount=0.1)\n        total2 = calc.calculate_total(discount=0.2)\n        self.assertGreater(total1, total2)\n\n    def test_add_remove_add_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_discount_brings_total_below_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.25)\n        discounted = 93.75\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_discount_brings_total_to_exactly_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 100.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_precision_in_complete_calculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 0.7\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_very_large_order(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 10.0, 5)\n        total = calc.calculate_total()\n        self.assertGreater(total, 0)\n\n    def test_multiple_calculators_independence(self):\n        calc1 = OrderCalculator()\n        calc2 = OrderCalculator()\n        calc1.add_item(\"Apple\", 1.5, 1)\n        calc2.add_item(\"Banana\", 0.5, 1)\n        self.assertEqual(calc1.total_items(), 1)\n        self.assertEqual(calc2.total_items(), 1)\n        self.assertNotEqual(calc1.list_items(), calc2.list_items())\n\n    def test_parameter_immutability(self):\n        calc = OrderCalculator(tax_rate=0.2, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Item\", 100.0, 1)\n        calc.calculate_total()\n        self.assertEqual(calc.tax_rate, 0.2)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_init_custom_valid_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_boundary_tax_rate_zero(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_boundary_tax_rate_one(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        self.assertEqual(calc.tax_rate, 1.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_tax_rate_below_zero(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_tax_rate_above_one(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=1.1)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_wrong_type_tax_rate_string(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"0.23\")\n\n    def test_init_wrong_type_free_shipping_threshold(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(free_shipping_threshold=\"100\")\n\n    def test_init_wrong_type_shipping_cost(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(shipping_cost=None)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Banana\", 0.5)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_add_item_duplicate_same_name_and_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 10.0, 150)\n        self.assertEqual(calc.total_items(), 150)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.5, 1)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0, 1)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative\", -1.5, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Zero Qty\", 1.5, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative Qty\", 1.5, -1)\n\n    def test_add_item_same_name_different_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.0, 1)\n\n    def test_add_item_wrong_type_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.5, 1)\n\n    def test_add_item_wrong_type_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"1.5\", 1)\n\n    def test_add_item_wrong_type_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.5, 1.5)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.5, 1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_after_multiple_adds(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_wrong_type_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_then_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"apple\", 2.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 1.5)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_get_subtotal_item_with_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 5)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.get_subtotal()\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3)\n\n    def test_get_subtotal_large_amount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 100.0, 10)\n        calc.add_item(\"Item2\", 200.0, 5)\n        self.assertAlmostEqual(calc.get_subtotal(), 2000.0)\n\n    def test_apply_discount_valid(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.2)\n        self.assertAlmostEqual(result, 80.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_maximum(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 0.2)\n\n    def test_apply_discount_below_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_above_one(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.1)\n\n    def test_apply_discount_wrong_type_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(\"100\", 0.2)\n\n    def test_apply_discount_wrong_type_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"0.2\")\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(123.45, 0.15)\n        self.assertAlmostEqual(result, 104.9325)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_equals_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"100\")\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"100\")\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(123.45)\n        self.assertAlmostEqual(tax, 28.3935)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        expected = 80.0 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 200.0, 1)\n        total = calc.calculate_total()\n        expected = 200.0 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_shipping_cost(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_complete_chain(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 60.0, 2)\n        calc.add_item(\"Item2\", 40.0, 1)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 160.0\n        discounted = subtotal * 0.9\n        shipping = 0.0\n        tax = discounted * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_total()\n\n    def test_calculate_total_invalid_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=1.5)\n\n    def test_calculate_total_wrong_type_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(discount=\"0.1\")\n\n    def test_calculate_total_at_free_shipping_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 100.0\n        shipping = 0.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_just_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 99.99, 1)\n        total = calc.calculate_total()\n        expected = (99.99 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_just_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.01, 1)\n        total = calc.calculate_total()\n        expected = 100.01 * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_discount_affecting_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.25)\n        discounted = 93.75\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_total_items_after_adding_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_operations_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        with self.assertRaises(ValueError):\n            calc.get_subtotal()\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_duplicate_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertEqual(items[0], \"Apple\")\n\n    def test_list_items_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_calculator(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        total = calc.calculate_total(discount=0.1)\n        self.assertGreater(total, 0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_multiple_discounts(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total1 = calc.calculate_total(discount=0.1)\n        total2 = calc.calculate_total(discount=0.2)\n        self.assertGreater(total1, total2)\n\n    def test_add_remove_add_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_discount_brings_total_below_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.25)\n        discounted = 93.75\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_discount_brings_total_to_exactly_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 100.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_precision_in_complete_calculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 0.7\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected)\n\n    def test_very_large_order(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 10.0, 5)\n        total = calc.calculate_total()\n        self.assertGreater(total, 0)\n\n    def test_multiple_calculators_independence(self):\n        calc1 = OrderCalculator()\n        calc2 = OrderCalculator()\n        calc1.add_item(\"Apple\", 1.5, 1)\n        calc2.add_item(\"Banana\", 0.5, 1)\n        self.assertEqual(calc1.total_items(), 1)\n        self.assertEqual(calc2.total_items(), 1)\n        self.assertNotEqual(calc1.list_items(), calc2.list_items())\n\n    def test_parameter_immutability(self):\n        calc = OrderCalculator(tax_rate=0.2, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Item\", 100.0, 1)\n        calc.calculate_total()\n        self.assertEqual(calc.tax_rate, 0.2)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 235.7029709815979,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface_docstring"
  }
}