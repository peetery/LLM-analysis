{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T22:42:36.298360",
  "response_time": 195.31412768363953,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_021\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze this `OrderCalculator` class to understand its structure and prepare for comprehensive unit testing.\n\n## Class Analysis\n\n### Purpose\nThe `OrderCalculator` class appears to be a shopping cart/order management system that handles:\n- Item management (add, remove, list)\n- Price calculations (subtotal, discounts, shipping, tax)\n- Order state tracking (empty check, item counts)\n\n### Key Components\n\n**1. Item Structure**\n- `Item(TypedDict)`: Likely contains item details (name, price, quantity)\n\n**2. Configuration Parameters (`__init__`)**\n- `tax_rate` (default 0.23 = 23%)\n- `free_shipping_threshold` (default 100.0)\n- `shipping_cost` (default 10.0)\n\n**3. Item Management Methods**\n- `add_item(name, price, quantity)`: Add items to order\n- `remove_item(name)`: Remove items by name\n- `clear_order()`: Reset the order\n- `list_items()`: Get list of item names\n- `total_items()`: Count total items\n- `is_empty()`: Check if order has items\n\n**4. Calculation Methods**\n- `get_subtotal()`: Sum of all items before discounts/tax/shipping\n- `apply_discount(subtotal, discount)`: Apply discount to subtotal\n- `calculate_shipping(discounted_subtotal)`: Determine shipping cost (free over threshold)\n- `calculate_tax(amount)`: Calculate tax on amount\n- `calculate_total(discount)`: Final total with all calculations\n\n### Testing Considerations\n\n**Edge Cases to Test:**\n1. **Initialization**: Default vs custom parameters, invalid values (negative rates, thresholds)\n2. **Item Operations**:\n   - Adding items with edge quantities (0, negative, very large)\n   - Adding items with edge prices (0, negative, very small/large)\n   - Duplicate items (same name)\n   - Removing non-existent items\n   - Operations on empty order\n3. **Calculations**:\n   - Discount edge cases (0%, 100%, >100%, negative)\n   - Shipping threshold boundary conditions (exactly at threshold, just below/above)\n   - Tax on zero/negative amounts\n   - Precision/rounding issues with floats\n4. **State Management**:\n   - Empty order operations\n   - Clear after adding items\n   - Multiple add/remove sequences\n\n**Typical Usage Scenarios:**\n- Basic flow: add items â†’ calculate total\n- With discount: add items â†’ apply discount â†’ calculate total\n- Free shipping: add items exceeding threshold\n- Multiple items with different quantities\n\n**Exception Scenarios:**\n- Invalid types (non-numeric prices, non-string names)\n- Constraint violations (negative quantities might be allowed or not)\n- Operations on non-existent items\n\n**Assumptions to Verify:**\n- How are duplicate item names handled? (update quantity vs separate entries)\n- Are negative prices/quantities allowed?\n- What happens with 100% discount?\n- Is shipping applied before or after tax?\n- What's the calculation order in `calculate_total()`?\n\nReady for the next step: defining specific test scenarios or writing test code.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll provide a comprehensive list of unit test scenarios for the `OrderCalculator` class.\n\n## Test Scenarios for OrderCalculator\n\n### 1. Initialization (`__init__`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Initialize with default parameters | Normal use | Verify default values (tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0) are set correctly |\n| Initialize with custom parameters | Normal use | Verify custom values override defaults correctly |\n| Initialize with zero tax rate | Edge case | Test behavior with 0% tax |\n| Initialize with zero shipping cost | Edge case | Test free shipping configuration |\n| Initialize with zero free shipping threshold | Edge case | Test always-free shipping scenario |\n| Initialize with negative tax rate | Invalid input | Verify handling of invalid negative tax rate |\n| Initialize with negative shipping cost | Invalid input | Verify handling of invalid negative shipping cost |\n| Initialize with negative threshold | Invalid input | Verify handling of invalid negative threshold |\n| Initialize with very high tax rate (>1.0) | Edge case | Test unrealistic but valid tax rates |\n\n### 2. Add Item (`add_item`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Add single item with default quantity | Normal use | Verify item is added with quantity=1 |\n| Add single item with custom quantity | Normal use | Verify item is added with specified quantity |\n| Add multiple different items | Normal use | Verify multiple items can be stored |\n| Add item with quantity=0 | Edge case | Test zero quantity handling |\n| Add item with negative quantity | Invalid input | Test negative quantity handling |\n| Add item with negative price | Invalid input | Test negative price handling |\n| Add item with price=0 | Edge case | Test free items |\n| Add item with very large quantity | Edge case | Test system limits |\n| Add item with very large price | Edge case | Test floating-point precision |\n| Add duplicate item (same name) | Edge case | Test if quantity updates or creates duplicate |\n| Add item with empty name | Invalid input | Test empty string name |\n| Add item with non-string name | Invalid input | Test type validation |\n| Add item with non-numeric price | Invalid input | Test type validation |\n| Add item with non-integer quantity | Invalid input | Test type validation |\n| Add item with very small price (precision) | Edge case | Test floating-point precision (e.g., 0.01) |\n\n### 3. Remove Item (`remove_item`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Remove existing item | Normal use | Verify item is removed successfully |\n| Remove item from empty order | Edge case | Test removal when no items exist |\n| Remove non-existent item | Invalid input | Test removal of item not in order |\n| Remove all items one by one | Normal use | Verify order becomes empty |\n| Remove item then add it again | Normal use | Test add-remove-add sequence |\n| Remove item with empty name | Invalid input | Test empty string handling |\n| Remove item multiple times | Edge case | Test duplicate removal attempts |\n\n### 4. Get Subtotal (`get_subtotal`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Get subtotal with no items | Edge case | Verify returns 0.0 for empty order |\n| Get subtotal with single item | Normal use | Verify price Ă— quantity calculation |\n| Get subtotal with multiple items | Normal use | Verify sum of all items |\n| Get subtotal with items of different quantities | Normal use | Test quantity multiplication |\n| Get subtotal after adding and removing items | Normal use | Verify subtotal updates correctly |\n| Get subtotal with zero-price items | Edge case | Test free items don't affect subtotal incorrectly |\n| Get subtotal with floating-point prices | Edge case | Test precision (e.g., 19.99 Ă— 3) |\n\n### 5. Apply Discount (`apply_discount`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Apply 0% discount | Edge case | Verify subtotal unchanged |\n| Apply typical discount (10%, 20%, 50%) | Normal use | Verify discount calculation |\n| Apply 100% discount | Edge case | Verify result is 0.0 |\n| Apply discount > 100% | Invalid input | Test over-discount handling |\n| Apply negative discount | Invalid input | Test negative discount (surcharge?) |\n| Apply discount to zero subtotal | Edge case | Verify 0 remains 0 |\n| Apply very small discount (0.01%) | Edge case | Test precision |\n| Apply discount with floating-point subtotal | Normal use | Test precision in discount calculation |\n\n### 6. Calculate Shipping (`calculate_shipping`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Calculate shipping below threshold | Normal use | Verify shipping cost is charged |\n| Calculate shipping above threshold | Normal use | Verify free shipping (0.0) |\n| Calculate shipping exactly at threshold | Edge case | Test boundary condition |\n| Calculate shipping just below threshold | Edge case | Test boundary (threshold - 0.01) |\n| Calculate shipping just above threshold | Edge case | Test boundary (threshold + 0.01) |\n| Calculate shipping with zero threshold | Edge case | Test always-free shipping |\n| Calculate shipping for zero subtotal | Edge case | Verify shipping behavior on empty order |\n| Calculate shipping for negative subtotal | Invalid input | Test negative amount handling |\n\n### 7. Calculate Tax (`calculate_tax`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Calculate tax on positive amount | Normal use | Verify tax = amount Ă— tax_rate |\n| Calculate tax on zero amount | Edge case | Verify returns 0.0 |\n| Calculate tax with zero tax rate | Edge case | Verify returns 0.0 |\n| Calculate tax on negative amount | Invalid input | Test negative amount handling |\n| Calculate tax with high tax rate | Edge case | Test tax > original amount (rate > 1.0) |\n| Calculate tax with floating-point amount | Normal use | Test precision |\n\n### 8. Calculate Total (`calculate_total`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Calculate total with no items | Edge case | Verify returns 0.0 or shipping cost |\n| Calculate total with no discount | Normal use | Test subtotal + shipping + tax |\n| Calculate total with discount | Normal use | Test full calculation flow |\n| Calculate total with free shipping (above threshold) | Normal use | Verify shipping = 0 when threshold met |\n| Calculate total with 100% discount | Edge case | Test minimum total (shipping + tax?) |\n| Calculate total with items exactly at shipping threshold | Edge case | Test boundary behavior |\n| Calculate total multiple times | Normal use | Verify idempotent calculation |\n| Calculate total after modifying order | Normal use | Verify recalculation after add/remove |\n| Calculate total with negative discount | Invalid input | Test invalid discount handling |\n| Calculate total with discount > 100% | Invalid input | Test over-discount handling |\n| Calculate total order of operations | Normal use | Verify discount applied before shipping/tax |\n\n### 9. Total Items (`total_items`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Count items in empty order | Edge case | Verify returns 0 |\n| Count single item with quantity=1 | Normal use | Verify returns 1 |\n| Count single item with quantity>1 | Normal use | Test if returns item count or total quantity |\n| Count multiple items | Normal use | Verify sum of all items/quantities |\n| Count after adding items | Normal use | Verify count updates |\n| Count after removing items | Normal use | Verify count decreases |\n| Count after clearing order | Normal use | Verify returns 0 after clear |\n\n### 10. Clear Order (`clear_order`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Clear empty order | Edge case | Verify no error on empty clear |\n| Clear order with items | Normal use | Verify all items removed |\n| Clear order then add items | Normal use | Test clear-add sequence |\n| Clear order multiple times | Edge case | Test idempotent clearing |\n| Verify calculations after clear | Normal use | Ensure subtotal/total = 0 after clear |\n\n### 11. List Items (`list_items`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| List items in empty order | Edge case | Verify returns empty list |\n| List single item | Normal use | Verify returns list with one item name |\n| List multiple items | Normal use | Verify all item names returned |\n| List items preserves order | Normal use | Test if order of addition is preserved |\n| List items after removal | Normal use | Verify removed items not in list |\n| List items doesn't include duplicates | Edge case | Test if duplicate names appear once or multiple times |\n| List items returns copy not reference | Edge case | Ensure modifying returned list doesn't affect order |\n\n### 12. Is Empty (`is_empty`)\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Check if new order is empty | Normal use | Verify returns True initially |\n| Check if order with items is empty | Normal use | Verify returns False with items |\n| Check after adding item | Normal use | Verify changes from True to False |\n| Check after removing last item | Normal use | Verify returns True when all removed |\n| Check after clearing order | Normal use | Verify returns True after clear |\n| Check after adding then removing same item | Normal use | Verify returns True after canceling operations |\n\n### 13. Integration/Workflow Tests\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Complete order workflow | Integration | Add items â†’ calculate total â†’ verify all components |\n| Order with free shipping qualification | Integration | Add items exceeding threshold â†’ verify shipping = 0 |\n| Order with discount and free shipping | Integration | Test discount + shipping interaction |\n| Modify order then recalculate | Integration | Add â†’ remove â†’ add â†’ verify totals update |\n| Multiple calculation calls consistency | Integration | Verify repeated calculate_total returns same result |\n| Empty order all calculations | Integration | Verify all methods handle empty state gracefully |\n\n### 14. Precision and Edge Cases\n\n| Scenario | Type | Intent |\n|----------|------|--------|\n| Floating-point precision in totals | Edge case | Test with prices like 0.1 + 0.2 |\n| Very large order total | Edge case | Test with many expensive items |\n| Mixed precision items | Edge case | Test items with different decimal places |\n| Rounding in calculations | Edge case | Verify consistent rounding behavior |\n\n---\n\n**Total Scenarios: ~100+ test cases**\n\nThis comprehensive list ensures:\n- âś… All methods tested\n- âś… Normal use cases covered\n- âś… Edge cases identified\n- âś… Invalid inputs handled\n- âś… Integration workflows validated\n- âś… Boundary conditions tested",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_with_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_with_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=15.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_with_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_with_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_with_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_with_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_with_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_with_very_high_tax_rate(self):\n        calc = OrderCalculator(tax_rate=2.0)\n        self.assertEqual(calc.tax_rate, 2.0)\n\n    def test_add_single_item_with_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_single_item_with_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_add_item_with_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.5, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.5, -2)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.5, 2)\n\n    def test_add_item_with_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 999999.99, 1)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_duplicate_item_same_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.5, 1)\n\n    def test_add_item_with_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.5, 1)\n\n    def test_add_item_with_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_add_item_with_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.5, 2.5)\n\n    def test_add_item_with_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_then_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_remove_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_multiple_times(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_with_no_items(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_get_subtotal_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 5.4)\n\n    def test_get_subtotal_with_items_of_different_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 1)\n        calc.add_item(\"Banana\", 1.0, 5)\n        calc.add_item(\"Orange\", 3.0, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.0)\n\n    def test_get_subtotal_after_adding_and_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 2.4)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 5)\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0)\n\n    def test_get_subtotal_with_floating_point_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_typical_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.1)\n        self.assertAlmostEqual(result, 90.0)\n\n    def test_apply_discount_typical_twenty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.2)\n        self.assertAlmostEqual(result, 80.0)\n\n    def test_apply_discount_typical_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.5)\n        self.assertAlmostEqual(result, 50.0)\n\n    def test_apply_discount_one_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_over_one_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.5)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0001)\n        self.assertAlmostEqual(result, 99.99)\n\n    def test_apply_discount_with_floating_point_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(123.45, 0.15)\n        self.assertAlmostEqual(result, 104.9325)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_with_zero_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_for_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_for_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_calculate_tax_on_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0)\n\n    def test_calculate_tax_on_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_tax_on_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-10.0)\n\n    def test_calculate_tax_with_high_tax_rate(self):\n        calc = OrderCalculator(tax_rate=2.0)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 200.0)\n\n    def test_calculate_tax_with_floating_point_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(123.45)\n        self.assertAlmostEqual(result, 28.3935)\n\n    def test_calculate_total_with_no_items(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 0.0)\n\n    def test_calculate_total_with_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        tax = (90.0 + 10.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_free_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_one_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=1.0)\n        shipping = 10.0\n        tax = (0.0 + 10.0) * 0.23\n        expected = 0.0 + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_items_exactly_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_multiple_times(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        total2 = calc.calculate_total()\n        self.assertAlmostEqual(total1, total2)\n\n    def test_calculate_total_after_modifying_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Banana\", 30.0, 1)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_calculate_total_with_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-0.1)\n\n    def test_calculate_total_with_discount_over_one_hundred_percent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=1.5)\n\n    def test_total_items_in_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_then_add_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_multiple_times(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_verify_calculations_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.calculate_total(), 0.0)\n\n    def test_list_items_in_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(set(items), {\"Apple\", \"Banana\", \"Orange\"})\n\n    def test_list_items_preserves_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_list_items_no_duplicates(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_returns_copy_not_reference(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        items2 = calc.list_items()\n        self.assertEqual(items2, [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 80.0)\n        total = calc.calculate_total(discount=0.1)\n        discounted = 72.0\n        shipping = 10.0\n        tax = (72.0 + 10.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_order_with_free_shipping_qualification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 120.0, 1)\n        total = calc.calculate_total()\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_order_with_discount_and_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 160.0\n        shipping = 0.0\n        tax = 160.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_modify_order_then_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 1)\n        total1 = calc.calculate_total()\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 50.0, 1)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_multiple_calculation_calls_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total1 = calc.calculate_total(discount=0.1)\n        total2 = calc.calculate_total(discount=0.1)\n        total3 = calc.calculate_total(discount=0.1)\n        self.assertAlmostEqual(total1, total2)\n        self.assertAlmostEqual(total2, total3)\n\n    def test_empty_order_all_calculations(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.calculate_total(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.list_items(), [])\n\n    def test_floating_point_precision_in_totals(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=10)\n\n    def test_very_large_order_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 10000.0, 100)\n        total = calc.calculate_total()\n        self.assertGreater(total, 1000000.0)\n\n    def test_mixed_precision_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 1.1, 1)\n        calc.add_item(\"Item2\", 2.22, 1)\n        calc.add_item(\"Item3\", 3.333, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 6.653, places=3)\n\n    def test_rounding_in_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 1)\n        total = calc.calculate_total(discount=0.333)\n        self.assertIsInstance(total, float)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_with_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_with_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=15.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_with_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_with_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_with_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_with_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_with_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_with_very_high_tax_rate(self):\n        calc = OrderCalculator(tax_rate=2.0)\n        self.assertEqual(calc.tax_rate, 2.0)\n\n    def test_add_single_item_with_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_single_item_with_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_add_item_with_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.5, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.5, -2)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.5, 2)\n\n    def test_add_item_with_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 999999.99, 1)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_duplicate_item_same_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.5, 1)\n\n    def test_add_item_with_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.5, 1)\n\n    def test_add_item_with_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_add_item_with_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.5, 2.5)\n\n    def test_add_item_with_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_then_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_remove_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_multiple_times(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_with_no_items(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_get_subtotal_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 5.4)\n\n    def test_get_subtotal_with_items_of_different_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 1)\n        calc.add_item(\"Banana\", 1.0, 5)\n        calc.add_item(\"Orange\", 3.0, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.0)\n\n    def test_get_subtotal_after_adding_and_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 2.4)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 5)\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0)\n\n    def test_get_subtotal_with_floating_point_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_typical_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.1)\n        self.assertAlmostEqual(result, 90.0)\n\n    def test_apply_discount_typical_twenty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.2)\n        self.assertAlmostEqual(result, 80.0)\n\n    def test_apply_discount_typical_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.5)\n        self.assertAlmostEqual(result, 50.0)\n\n    def test_apply_discount_one_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_over_one_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.5)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0001)\n        self.assertAlmostEqual(result, 99.99)\n\n    def test_apply_discount_with_floating_point_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(123.45, 0.15)\n        self.assertAlmostEqual(result, 104.9325)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_with_zero_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_for_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0)\n\n    def test_calculate_shipping_for_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_calculate_tax_on_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0)\n\n    def test_calculate_tax_on_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_tax_on_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-10.0)\n\n    def test_calculate_tax_with_high_tax_rate(self):\n        calc = OrderCalculator(tax_rate=2.0)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 200.0)\n\n    def test_calculate_tax_with_floating_point_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(123.45)\n        self.assertAlmostEqual(result, 28.3935)\n\n    def test_calculate_total_with_no_items(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 0.0)\n\n    def test_calculate_total_with_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.1)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        tax = (90.0 + 10.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_free_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_one_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=1.0)\n        shipping = 10.0\n        tax = (0.0 + 10.0) * 0.23\n        expected = 0.0 + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_with_items_exactly_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_calculate_total_multiple_times(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        total2 = calc.calculate_total()\n        self.assertAlmostEqual(total1, total2)\n\n    def test_calculate_total_after_modifying_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Banana\", 30.0, 1)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_calculate_total_with_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-0.1)\n\n    def test_calculate_total_with_discount_over_one_hundred_percent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=1.5)\n\n    def test_total_items_in_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_then_add_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 0.8, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_multiple_times(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_verify_calculations_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.calculate_total(), 0.0)\n\n    def test_list_items_in_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(set(items), {\"Apple\", \"Banana\", \"Orange\"})\n\n    def test_list_items_preserves_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.add_item(\"Orange\", 2.0, 1)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Banana\", 0.8, 3)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_list_items_no_duplicates(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_returns_copy_not_reference(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        items2 = calc.list_items()\n        self.assertEqual(items2, [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Apple\", 1.5, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clearing_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 80.0)\n        total = calc.calculate_total(discount=0.1)\n        discounted = 72.0\n        shipping = 10.0\n        tax = (72.0 + 10.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_order_with_free_shipping_qualification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 120.0, 1)\n        total = calc.calculate_total()\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected)\n\n    def test_order_with_discount_and_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0, 1)\n        total = calc.calculate_total(discount=0.2)\n        discounted = 160.0\n        shipping = 0.0\n        tax = 160.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected)\n\n    def test_modify_order_then_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 1)\n        total1 = calc.calculate_total()\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 50.0, 1)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_multiple_calculation_calls_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total1 = calc.calculate_total(discount=0.1)\n        total2 = calc.calculate_total(discount=0.1)\n        total3 = calc.calculate_total(discount=0.1)\n        self.assertAlmostEqual(total1, total2)\n        self.assertAlmostEqual(total2, total3)\n\n    def test_empty_order_all_calculations(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.calculate_total(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.list_items(), [])\n\n    def test_floating_point_precision_in_totals(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=10)\n\n    def test_very_large_order_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 10000.0, 100)\n        total = calc.calculate_total()\n        self.assertGreater(total, 1000000.0)\n\n    def test_mixed_precision_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 1.1, 1)\n        calc.add_item(\"Item2\", 2.22, 1)\n        calc.add_item(\"Item3\", 3.333, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 6.653, places=3)\n\n    def test_rounding_in_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 1)\n        total = calc.calculate_total(discount=0.333)\n        self.assertIsInstance(total, float)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 195.31412768363953,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}