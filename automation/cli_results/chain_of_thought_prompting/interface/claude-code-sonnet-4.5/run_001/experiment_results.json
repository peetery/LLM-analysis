{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T01:08:40.934310",
  "response_time": 191.28451299667358,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_001\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I've analyzed the OrderCalculator class interface. Here's my understanding:\n\n## Class Analysis\n\n**Purpose**: An order/shopping cart calculator that manages items, applies discounts, calculates shipping, tax, and final totals.\n\n**Key Components**:\n\n1. **Initialization parameters**:\n   - `tax_rate` (default 0.23 = 23%)\n   - `free_shipping_threshold` (default 100.0)\n   - `shipping_cost` (default 10.0)\n\n2. **Item Management** (4 methods):\n   - `add_item()`: Add products with name, price, quantity\n   - `remove_item()`: Remove by name\n   - `list_items()`: Get item names\n   - `clear_order()`: Empty cart\n\n3. **Query Methods** (3 methods):\n   - `get_subtotal()`: Sum before discount/shipping/tax\n   - `total_items()`: Count of items\n   - `is_empty()`: Check if cart empty\n\n4. **Calculation Methods** (4 methods):\n   - `apply_discount()`: Reduce subtotal by discount amount\n   - `calculate_shipping()`: Apply shipping cost (with free threshold)\n   - `calculate_tax()`: Calculate tax on amount\n   - `calculate_total()`: Final price with discount, shipping, tax\n\n## Test Coverage Areas Identified\n\n**Initialization**: Default and custom parameters\n\n**Item Management**:\n- Adding items (single, multiple, duplicates, quantity variations)\n- Removing items (existing, non-existent)\n- Edge cases: negative prices, zero/negative quantities, empty names\n\n**Calculations**:\n- Subtotal with various item combinations\n- Discount application (percentage vs fixed, over 100%, negative)\n- Shipping logic (below/above threshold, exactly at threshold)\n- Tax calculations\n- Total calculation integration\n\n**Edge Cases**:\n- Empty cart operations\n- Invalid inputs (None, wrong types, negative values)\n- Boundary conditions (zero values, very large numbers)\n- Order of operations (discount then shipping vs shipping then discount)\n\n**Exception Handling**:\n- Invalid item operations\n- Type validation\n- Value constraints\n\nI'm ready for the next step. Should I proceed to write the test scenarios or the test code directly?",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll create a comprehensive list of test scenarios for the OrderCalculator class:\n\n## Initialization Tests\n\n1. **test_init_default_parameters** (normal use)\n   - Verify OrderCalculator initializes with default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n\n2. **test_init_custom_parameters** (normal use)\n   - Verify OrderCalculator initializes with custom tax_rate, free_shipping_threshold, and shipping_cost values\n\n3. **test_init_zero_tax_rate** (edge case)\n   - Verify OrderCalculator handles tax_rate=0.0 correctly\n\n4. **test_init_negative_tax_rate** (invalid input)\n   - Verify behavior with negative tax_rate (should raise exception or handle gracefully)\n\n5. **test_init_negative_shipping_cost** (invalid input)\n   - Verify behavior with negative shipping_cost\n\n6. **test_init_negative_free_shipping_threshold** (invalid input)\n   - Verify behavior with negative free_shipping_threshold\n\n## add_item() Tests\n\n7. **test_add_single_item** (normal use)\n   - Add one item with name, price, and quantity=1\n\n8. **test_add_item_with_quantity** (normal use)\n   - Add item with quantity > 1\n\n9. **test_add_multiple_different_items** (normal use)\n   - Add several different items to cart\n\n10. **test_add_duplicate_item_same_name** (edge case)\n    - Add item with same name twice - should update quantity or create duplicate entry\n\n11. **test_add_item_zero_quantity** (edge case)\n    - Add item with quantity=0\n\n12. **test_add_item_negative_quantity** (invalid input)\n    - Add item with quantity < 0 - should raise exception\n\n13. **test_add_item_zero_price** (edge case)\n    - Add item with price=0.0 (free item)\n\n14. **test_add_item_negative_price** (invalid input)\n    - Add item with price < 0 - should raise exception\n\n15. **test_add_item_empty_name** (invalid input)\n    - Add item with name=\"\" - should raise exception\n\n16. **test_add_item_none_name** (invalid input)\n    - Add item with name=None - should raise exception\n\n17. **test_add_item_float_quantity** (invalid input)\n    - Add item with quantity=1.5 - should raise exception or convert to int\n\n18. **test_add_item_very_large_price** (edge case)\n    - Add item with extremely large price value\n\n19. **test_add_item_very_large_quantity** (edge case)\n    - Add item with very large quantity\n\n## remove_item() Tests\n\n20. **test_remove_existing_item** (normal use)\n    - Remove an item that exists in cart\n\n21. **test_remove_item_from_empty_cart** (edge case)\n    - Attempt to remove item when cart is empty - should raise exception or return gracefully\n\n22. **test_remove_nonexistent_item** (edge case)\n    - Attempt to remove item that doesn't exist - should raise exception or return gracefully\n\n23. **test_remove_item_empty_name** (invalid input)\n    - Remove item with name=\"\"\n\n24. **test_remove_item_none_name** (invalid input)\n    - Remove item with name=None\n\n25. **test_remove_all_items_one_by_one** (normal use)\n    - Add multiple items and remove them all individually\n\n## get_subtotal() Tests\n\n26. **test_get_subtotal_empty_cart** (edge case)\n    - Subtotal should be 0.0 for empty cart\n\n27. **test_get_subtotal_single_item** (normal use)\n    - Subtotal = price Ă— quantity for one item\n\n28. **test_get_subtotal_multiple_items** (normal use)\n    - Subtotal = sum of all (price Ă— quantity)\n\n29. **test_get_subtotal_after_adding_items** (normal use)\n    - Verify subtotal updates correctly after adding items\n\n30. **test_get_subtotal_after_removing_items** (normal use)\n    - Verify subtotal updates correctly after removing items\n\n31. **test_get_subtotal_with_zero_price_items** (edge case)\n    - Subtotal calculation with free items (price=0)\n\n## apply_discount() Tests\n\n32. **test_apply_discount_zero** (edge case)\n    - Apply 0.0 discount - should return original subtotal\n\n33. **test_apply_discount_normal** (normal use)\n    - Apply normal discount amount (e.g., 10.0 off 100.0)\n\n34. **test_apply_discount_percentage_style** (normal use)\n    - Apply discount as percentage of subtotal (e.g., 0.1 * subtotal)\n\n35. **test_apply_discount_full_amount** (edge case)\n    - Discount equals subtotal - result should be 0.0\n\n36. **test_apply_discount_exceeds_subtotal** (edge case)\n    - Discount > subtotal - should return 0.0 or raise exception\n\n37. **test_apply_discount_negative** (invalid input)\n    - Apply negative discount - should raise exception or treat as addition\n\n38. **test_apply_discount_on_zero_subtotal** (edge case)\n    - Apply discount when subtotal is 0.0\n\n39. **test_apply_discount_very_large** (edge case)\n    - Apply extremely large discount value\n\n## calculate_shipping() Tests\n\n40. **test_calculate_shipping_below_threshold** (normal use)\n    - Discounted subtotal < free_shipping_threshold - should charge shipping_cost\n\n41. **test_calculate_shipping_above_threshold** (normal use)\n    - Discounted subtotal >= free_shipping_threshold - should return 0.0 (free shipping)\n\n42. **test_calculate_shipping_exactly_at_threshold** (edge case)\n    - Discounted subtotal == free_shipping_threshold - should be free (boundary test)\n\n43. **test_calculate_shipping_zero_subtotal** (edge case)\n    - Discounted subtotal = 0.0 - should charge shipping or return 0\n\n44. **test_calculate_shipping_negative_subtotal** (invalid input)\n    - Negative discounted_subtotal - should handle gracefully\n\n45. **test_calculate_shipping_with_zero_shipping_cost** (edge case)\n    - When shipping_cost=0.0 in init\n\n46. **test_calculate_shipping_with_zero_threshold** (edge case)\n    - When free_shipping_threshold=0.0 in init - all orders should be free shipping\n\n## calculate_tax() Tests\n\n47. **test_calculate_tax_normal** (normal use)\n    - Calculate tax on positive amount with default tax_rate\n\n48. **test_calculate_tax_zero_amount** (edge case)\n    - Tax on 0.0 amount should be 0.0\n\n49. **test_calculate_tax_zero_rate** (edge case)\n    - Tax calculation when tax_rate=0.0\n\n50. **test_calculate_tax_negative_amount** (invalid input)\n    - Tax on negative amount\n\n51. **test_calculate_tax_custom_rate** (normal use)\n    - Tax calculation with custom tax_rate from init\n\n52. **test_calculate_tax_very_large_amount** (edge case)\n    - Tax on extremely large amount\n\n## calculate_total() Tests\n\n53. **test_calculate_total_empty_cart_no_discount** (edge case)\n    - Total should be 0.0 for empty cart\n\n54. **test_calculate_total_single_item_no_discount** (normal use)\n    - Total = price + shipping + tax\n\n55. **test_calculate_total_with_discount** (normal use)\n    - Total = (subtotal - discount) + shipping + tax\n\n56. **test_calculate_total_free_shipping_eligible** (normal use)\n    - Total when subtotal exceeds free_shipping_threshold\n\n57. **test_calculate_total_free_shipping_not_eligible** (normal use)\n    - Total when subtotal below threshold (includes shipping cost)\n\n58. **test_calculate_total_discount_makes_shipping_free** (edge case)\n    - Subtotal below threshold, but after discount still above - should not charge shipping\n\n59. **test_calculate_total_discount_loses_free_shipping** (edge case)\n    - Subtotal above threshold, but after discount falls below - should charge shipping\n\n60. **test_calculate_total_negative_discount** (invalid input)\n    - Passing negative discount value\n\n61. **test_calculate_total_discount_exceeds_subtotal** (edge case)\n    - Discount larger than subtotal\n\n62. **test_calculate_total_multiple_items_complex** (normal use)\n    - Complex scenario with multiple items, discount, shipping, and tax\n\n63. **test_calculate_total_order_of_operations** (normal use)\n    - Verify: discount applied first, then shipping, then tax on (subtotal-discount+shipping)\n\n64. **test_calculate_total_zero_discount_default** (normal use)\n    - Call calculate_total() without passing discount parameter (uses default 0.0)\n\n65. **test_calculate_total_all_zero_rates** (edge case)\n    - When tax_rate=0, shipping_cost=0, discount=0\n\n## total_items() Tests\n\n66. **test_total_items_empty_cart** (edge case)\n    - Should return 0 for empty cart\n\n67. **test_total_items_single_item** (normal use)\n    - Should return quantity of single item\n\n68. **test_total_items_multiple_items** (normal use)\n    - Should return sum of all item quantities\n\n69. **test_total_items_after_add** (normal use)\n    - Verify count updates after adding items\n\n70. **test_total_items_after_remove** (normal use)\n    - Verify count updates after removing items\n\n71. **test_total_items_after_clear** (normal use)\n    - Verify count is 0 after clear_order()\n\n## clear_order() Tests\n\n72. **test_clear_order_empty_cart** (edge case)\n    - Clear already empty cart - should not raise exception\n\n73. **test_clear_order_with_items** (normal use)\n    - Clear cart with multiple items - all should be removed\n\n74. **test_clear_order_subtotal_becomes_zero** (normal use)\n    - Verify get_subtotal() returns 0 after clear\n\n75. **test_clear_order_is_empty_becomes_true** (normal use)\n    - Verify is_empty() returns True after clear\n\n76. **test_clear_order_total_items_becomes_zero** (normal use)\n    - Verify total_items() returns 0 after clear\n\n## list_items() Tests\n\n77. **test_list_items_empty_cart** (edge case)\n    - Should return empty list for empty cart\n\n78. **test_list_items_single_item** (normal use)\n    - Should return list with one item name\n\n79. **test_list_items_multiple_items** (normal use)\n    - Should return list with all item names\n\n80. **test_list_items_order_preserved** (normal use)\n    - Verify order of items in list (if order matters)\n\n81. **test_list_items_after_add** (normal use)\n    - Verify list updates after adding item\n\n82. **test_list_items_after_remove** (normal use)\n    - Verify list updates after removing item\n\n83. **test_list_items_returns_copy** (edge case)\n    - Verify returned list is a copy, not internal reference (mutation safety)\n\n## is_empty() Tests\n\n84. **test_is_empty_new_cart** (normal use)\n    - New OrderCalculator should return True\n\n85. **test_is_empty_after_add** (normal use)\n    - Should return False after adding item\n\n86. **test_is_empty_after_remove_all** (normal use)\n    - Should return True after removing all items\n\n87. **test_is_empty_after_clear** (normal use)\n    - Should return True after clear_order()\n\n## Integration/Complex Workflow Tests\n\n88. **test_workflow_complete_order** (integration)\n    - Add items â†’ get subtotal â†’ calculate total â†’ verify all components\n\n89. **test_workflow_add_remove_add** (integration)\n    - Add items â†’ remove some â†’ add more â†’ verify totals\n\n90. **test_workflow_edge_case_chain** (integration)\n    - Empty cart â†’ add item â†’ clear â†’ verify empty again\n\n91. **test_state_consistency** (integration)\n    - Verify all query methods (subtotal, total_items, is_empty, list_items) remain consistent\n\n92. **test_multiple_discount_applications** (edge case)\n    - Apply discount multiple times - verify behavior\n\n93. **test_rounding_precision** (edge case)\n    - Test with prices that require decimal precision (e.g., 0.01, 0.99)\n\n94. **test_tax_calculation_on_total** (integration)\n    - Verify tax is calculated on (subtotal - discount + shipping), not just subtotal\n\n95. **test_immutability_of_parameters** (edge case)\n    - Verify tax_rate, shipping_cost, free_shipping_threshold don't change during operations\n\n## Type Validation Tests\n\n96. **test_add_item_wrong_types** (invalid input)\n    - Pass wrong types (string for price, string for quantity)\n\n97. **test_apply_discount_wrong_type** (invalid input)\n    - Pass string or None for discount\n\n98. **test_calculate_shipping_wrong_type** (invalid input)\n    - Pass string or None for discounted_subtotal\n\n99. **test_calculate_tax_wrong_type** (invalid input)\n    - Pass string or None for amount\n\n100. **test_calculate_total_wrong_type** (invalid input)\n     - Pass string for discount parameter\n\n---\n\n**Total: 100 test scenarios** covering:\n- Normal use cases\n- Edge cases (boundary values, empty states, zero values)\n- Invalid inputs (negative values, wrong types, None values)\n- Exception handling\n- Integration workflows\n- State consistency\n- Type validation\n\nThis comprehensive test suite ensures thorough coverage of all public methods and their interactions.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100), 23.0)\n        self.assertEqual(calc.calculate_shipping(50), 10.0)\n        self.assertEqual(calc.calculate_shipping(100), 0.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_tax(100), 10.0)\n        self.assertEqual(calc.calculate_shipping(30), 5.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1.0)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertEqual(calc.get_subtotal(), 3.5)\n\n    def test_add_duplicate_item_same_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, -1)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.0, 1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.0, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(None, 1.0, 1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, 1.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1e10, 1)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_remove_item_from_empty_cart(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_nonexistent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(None)\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_get_subtotal_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        self.assertEqual(calc.get_subtotal(), 9.0)\n\n    def test_get_subtotal_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1.0)\n        calc.add_item(\"Banana\", 2.0, 1)\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_get_subtotal_after_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 2.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.0)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 5)\n        calc.add_item(\"Paid\", 10.0, 1)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_normal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_percentage_style(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0 * 0.1)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_full_amount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_large(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1e10)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_calculate_shipping_with_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_with_zero_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_normal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 15.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1e10)\n        self.assertEqual(result, 1e10 * 0.23)\n\n    def test_calculate_total_empty_cart_no_discount(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 1)\n        total = calc.calculate_total()\n        expected = (10.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_eligible(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 150.0, 1)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_not_eligible(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_makes_shipping_free(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        total = calc.calculate_total(discount=5.0)\n        expected = 105.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_loses_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 105.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        expected = (95.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_multiple_items_complex(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        calc.add_item(\"Banana\", 15.0, 3)\n        total = calc.calculate_total(discount=20.0)\n        expected = (95.0 - 20.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        after_discount = 70.0\n        shipping = 10.0\n        before_tax = 80.0\n        expected = before_tax * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_discount_default(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        total2 = calc.calculate_total(discount=0.0)\n        self.assertEqual(total1, total2)\n\n    def test_calculate_total_all_zero_rates(self):\n        calc = OrderCalculator(tax_rate=0.0, shipping_cost=0.0)\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.0)\n        self.assertEqual(total, 100.0)\n\n    def test_total_items_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 3)\n        calc.add_item(\"Banana\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_empty_cart(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 2.0, 3)\n        calc.clear_order()\n        self.assertEqual(len(calc.list_items()), 0)\n\n    def test_clear_order_subtotal_becomes_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_order_is_empty_becomes_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_total_items_becomes_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        calc.add_item(\"Cherry\", 1.0, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertIn(\"Apple\", calc.list_items())\n        calc.add_item(\"Banana\", 1.0, 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_list_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 1)\n\n    def test_is_empty_new_cart(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_workflow_complete_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 100.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = 90.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_workflow_add_remove_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 1)\n        calc.add_item(\"Banana\", 20.0, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Cherry\", 30.0, 1)\n        self.assertEqual(calc.get_subtotal(), 50.0)\n\n    def test_workflow_edge_case_chain(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertFalse(calc.is_empty())\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 35.0)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_multiple_discount_applications(self):\n        calc = OrderCalculator()\n        result1 = calc.apply_discount(100.0, 10.0)\n        result2 = calc.apply_discount(result1, 10.0)\n        self.assertEqual(result2, 80.0)\n\n    def test_rounding_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.99, 1)\n        total = calc.calculate_total()\n        self.assertIsInstance(total, float)\n\n    def test_tax_calculation_on_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        after_discount = 70.0\n        shipping = 10.0\n        base = after_discount + shipping\n        expected = base * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_immutability_of_parameters(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        calc.calculate_total()\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_add_item_wrong_types(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"ten\", 1)\n\n    def test_apply_discount_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"ten\")\n\n    def test_calculate_shipping_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"fifty\")\n\n    def test_calculate_tax_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"hundred\")\n\n    def test_calculate_total_wrong_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(discount=\"ten\")\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100), 23.0)\n        self.assertEqual(calc.calculate_shipping(50), 10.0)\n        self.assertEqual(calc.calculate_shipping(100), 0.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_tax(100), 10.0)\n        self.assertEqual(calc.calculate_shipping(30), 5.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1.0)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertEqual(calc.get_subtotal(), 3.5)\n\n    def test_add_duplicate_item_same_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, -1)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.0, 1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.0, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(None, 1.0, 1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, 1.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1e10, 1)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_remove_item_from_empty_cart(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_nonexistent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(None)\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 0.5, 1)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_get_subtotal_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        self.assertEqual(calc.get_subtotal(), 9.0)\n\n    def test_get_subtotal_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1.0)\n        calc.add_item(\"Banana\", 2.0, 1)\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_get_subtotal_after_removing_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 2.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.0)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 5)\n        calc.add_item(\"Paid\", 10.0, 1)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_normal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_percentage_style(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0 * 0.1)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_full_amount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_large(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1e10)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_calculate_shipping_with_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_with_zero_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_normal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 15.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1e10)\n        self.assertEqual(result, 1e10 * 0.23)\n\n    def test_calculate_total_empty_cart_no_discount(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 1)\n        total = calc.calculate_total()\n        expected = (10.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_eligible(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 150.0, 1)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_not_eligible(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_makes_shipping_free(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        total = calc.calculate_total(discount=5.0)\n        expected = 105.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_loses_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 105.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        expected = (95.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_multiple_items_complex(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        calc.add_item(\"Banana\", 15.0, 3)\n        total = calc.calculate_total(discount=20.0)\n        expected = (95.0 - 20.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        after_discount = 70.0\n        shipping = 10.0\n        before_tax = 80.0\n        expected = before_tax * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_discount_default(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total1 = calc.calculate_total()\n        total2 = calc.calculate_total(discount=0.0)\n        self.assertEqual(total1, total2)\n\n    def test_calculate_total_all_zero_rates(self):\n        calc = OrderCalculator(tax_rate=0.0, shipping_cost=0.0)\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=0.0)\n        self.assertEqual(total, 100.0)\n\n    def test_total_items_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 3)\n        calc.add_item(\"Banana\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_empty_cart(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 2.0, 3)\n        calc.clear_order()\n        self.assertEqual(len(calc.list_items()), 0)\n\n    def test_clear_order_subtotal_becomes_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_order_is_empty_becomes_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_total_items_becomes_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_empty_cart(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        calc.add_item(\"Cherry\", 1.0, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertIn(\"Apple\", calc.list_items())\n        calc.add_item(\"Banana\", 1.0, 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_list_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.add_item(\"Banana\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 1)\n\n    def test_is_empty_new_cart(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_workflow_complete_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 100.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = 90.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_workflow_add_remove_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 1)\n        calc.add_item(\"Banana\", 20.0, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Cherry\", 30.0, 1)\n        self.assertEqual(calc.get_subtotal(), 50.0)\n\n    def test_workflow_edge_case_chain(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertFalse(calc.is_empty())\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 35.0)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_multiple_discount_applications(self):\n        calc = OrderCalculator()\n        result1 = calc.apply_discount(100.0, 10.0)\n        result2 = calc.apply_discount(result1, 10.0)\n        self.assertEqual(result2, 80.0)\n\n    def test_rounding_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.99, 1)\n        total = calc.calculate_total()\n        self.assertIsInstance(total, float)\n\n    def test_tax_calculation_on_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        after_discount = 70.0\n        shipping = 10.0\n        base = after_discount + shipping\n        expected = base * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_immutability_of_parameters(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        calc.calculate_total()\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_add_item_wrong_types(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"ten\", 1)\n\n    def test_apply_discount_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"ten\")\n\n    def test_calculate_shipping_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"fifty\")\n\n    def test_calculate_tax_wrong_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"hundred\")\n\n    def test_calculate_total_wrong_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(discount=\"ten\")\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 191.28451299667358,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}