{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T22:24:50.104031",
  "response_time": 196.73798322677612,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_020\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class interface to prepare for generating comprehensive unit tests.\n\n## Analysis of OrderCalculator Class\n\n### Class Structure\n- **Purpose**: Shopping cart/order calculation system with tax, shipping, and discount logic\n- **Key Components**: Item management, pricing calculations, shipping logic, tax computation\n\n### Methods Identified (11 public methods)\n\n#### 1. `__init__(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)`\n- **Parameters**: Configurable rates and thresholds\n- **Test considerations**: \n  - Default initialization\n  - Custom values for all parameters\n  - Edge cases: zero values, negative values, extreme values\n\n#### 2. `add_item(name: str, price: float, quantity: int = 1)`\n- **Parameters**: Item details with optional quantity (default=1)\n- **Test considerations**:\n  - Valid items with default quantity\n  - Valid items with custom quantity\n  - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate items\n  - Type validation\n\n#### 3. `remove_item(name: str)`\n- **Parameters**: Item name to remove\n- **Test considerations**:\n  - Remove existing item\n  - Remove non-existent item (error handling)\n  - Remove from empty order\n\n#### 4. `get_subtotal() -> float`\n- **Returns**: Sum of all items (price Ă— quantity)\n- **Test considerations**:\n  - Empty order (should be 0.0)\n  - Single item\n  - Multiple items\n  - Items with different quantities\n\n#### 5. `apply_discount(subtotal: float, discount: float) -> float`\n- **Parameters**: Subtotal and discount percentage\n- **Returns**: Discounted amount\n- **Test considerations**:\n  - Valid discount (0-100%)\n  - No discount (0%)\n  - Full discount (100%)\n  - Invalid discount (negative, >100%)\n\n#### 6. `calculate_shipping(discounted_subtotal: float) -> float`\n- **Parameters**: Subtotal after discount\n- **Returns**: Shipping cost (0 if above threshold)\n- **Test considerations**:\n  - Below free shipping threshold\n  - At threshold boundary\n  - Above threshold\n  - Zero subtotal\n\n#### 7. `calculate_tax(amount: float) -> float`\n- **Parameters**: Amount to tax\n- **Returns**: Tax amount\n- **Test considerations**:\n  - Standard calculation\n  - Zero amount\n  - Various amounts with configured tax rate\n\n#### 8. `calculate_total(discount: float = 0.0) -> float`\n- **Parameters**: Optional discount percentage\n- **Returns**: Final total (subtotal - discount + shipping + tax)\n- **Test considerations**:\n  - Complete workflow: items â†’ discount â†’ shipping â†’ tax\n  - No discount\n  - With discount affecting shipping eligibility\n  - Empty order\n  - Integration of all pricing components\n\n#### 9. `total_items() -> int`\n- **Returns**: Total quantity of all items\n- **Test considerations**:\n  - Empty order\n  - Single item with quantity=1\n  - Multiple items with various quantities\n\n#### 10. `clear_order()`\n- **Effect**: Removes all items\n- **Test considerations**:\n  - Clear non-empty order\n  - Clear already empty order\n  - Verify state after clearing\n\n#### 11. `list_items() -> List[str]`\n- **Returns**: List of item names\n- **Test considerations**:\n  - Empty order\n  - Single item\n  - Multiple items\n  - Order preservation (if applicable)\n\n#### 12. `is_empty() -> bool`\n- **Returns**: True if no items\n- **Test considerations**:\n  - Initially empty\n  - After adding items\n  - After clearing\n\n### Cross-Cutting Concerns\n\n**State Management:**\n- Order state persistence across operations\n- Side effects of mutations (add/remove/clear)\n\n**Business Logic Integration:**\n- Shipping threshold interaction with discounts\n- Tax calculation timing (before/after shipping)\n- Discount impact on free shipping eligibility\n\n**Edge Cases to Cover:**\n- Empty order operations\n- Boundary values (thresholds, 0%, 100% discount)\n- Floating-point precision\n- Invalid inputs (negative values, None, wrong types)\n\n**Test Data Strategy:**\n- Use realistic prices and quantities\n- Test boundary conditions\n- Verify mathematical accuracy\n\nI'm ready for the next step. I have identified all public methods, their parameters, return types, and the key test scenarios needed for comprehensive coverage including typical usage, edge cases, invalid inputs, and exception handling.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Comprehensive Unit Test Scenarios for OrderCalculator\n\n### 1. Initialization Tests (`__init__`)\n\n**Normal Cases:**\n1. **Default initialization** - Verify tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom initialization** - All parameters set to custom valid values\n3. **Partial custom initialization** - Only some parameters customized, others use defaults\n\n**Edge Cases:**\n4. **Zero tax rate** - Initialize with tax_rate=0.0\n5. **Zero shipping cost** - Initialize with shipping_cost=0.0\n6. **Very high free shipping threshold** - Test with threshold=10000.0\n7. **Very low free shipping threshold** - Test with threshold=0.01\n\n**Invalid Input Cases:**\n8. **Negative tax rate** - Should raise exception or handle gracefully\n9. **Negative shipping cost** - Should raise exception or handle gracefully\n10. **Negative free shipping threshold** - Should raise exception or handle gracefully\n\n---\n\n### 2. Add Item Tests (`add_item`)\n\n**Normal Cases:**\n11. **Add single item with default quantity** - quantity=1 by default\n12. **Add single item with custom quantity** - quantity=5\n13. **Add multiple different items** - Build up order with 3+ items\n14. **Add duplicate item** - Should update quantity or raise error (implementation-dependent)\n\n**Edge Cases:**\n15. **Add item with quantity=0** - Should raise exception or reject\n16. **Add item with price=0.0** - Free item, should be allowed\n17. **Add item with very large quantity** - quantity=1000000\n18. **Add item with very high price** - price=999999.99\n19. **Add item with fractional price** - price=19.99 (normal) and price=19.999 (precision test)\n\n**Invalid Input Cases:**\n20. **Add item with negative price** - Should raise exception\n21. **Add item with negative quantity** - Should raise exception\n22. **Add item with empty name** - name=\"\" should raise exception\n23. **Add item with None name** - Should raise exception\n24. **Add item with None price** - Should raise exception\n25. **Add item with wrong type for price** - price=\"invalid\"\n26. **Add item with wrong type for quantity** - quantity=\"invalid\"\n\n---\n\n### 3. Remove Item Tests (`remove_item`)\n\n**Normal Cases:**\n27. **Remove existing item** - Add item, then remove it successfully\n28. **Remove item from multiple items** - Verify other items remain\n\n**Edge Cases:**\n29. **Remove last remaining item** - Order becomes empty\n\n**Invalid Input Cases:**\n30. **Remove non-existent item** - Should raise KeyError or similar exception\n31. **Remove from empty order** - Should raise exception\n32. **Remove with None name** - Should raise exception\n33. **Remove with empty string name** - Should raise exception\n\n---\n\n### 4. Get Subtotal Tests (`get_subtotal`)\n\n**Normal Cases:**\n34. **Subtotal of empty order** - Should return 0.0\n35. **Subtotal with single item (quantity=1)** - price Ă— 1\n36. **Subtotal with single item (quantity>1)** - price Ă— quantity\n37. **Subtotal with multiple items** - Sum of all (price Ă— quantity)\n\n**Edge Cases:**\n38. **Subtotal with zero-price items** - Should include them (0 contribution)\n39. **Subtotal with large numbers** - Test floating-point accuracy\n40. **Subtotal precision** - Verify rounding to 2 decimal places (if applicable)\n\n---\n\n### 5. Apply Discount Tests (`apply_discount`)\n\n**Normal Cases:**\n41. **No discount (0%)** - Returns original subtotal\n42. **Partial discount (10%)** - Verify correct calculation\n43. **Half discount (50%)** - Verify correct calculation\n44. **Full discount (100%)** - Returns 0.0\n\n**Edge Cases:**\n45. **Very small discount (0.01%)** - Precision test\n46. **Discount on zero subtotal** - Should return 0.0\n47. **Discount on very large subtotal** - Test precision\n\n**Invalid Input Cases:**\n48. **Negative discount** - Should raise exception\n49. **Discount > 100%** - Should raise exception\n50. **Invalid discount type** - discount=\"invalid\"\n\n---\n\n### 6. Calculate Shipping Tests (`calculate_shipping`)\n\n**Normal Cases:**\n51. **Subtotal below threshold** - Returns shipping_cost\n52. **Subtotal at threshold exactly** - Returns 0.0 (free shipping)\n53. **Subtotal above threshold** - Returns 0.0 (free shipping)\n\n**Edge Cases:**\n54. **Subtotal = 0.0** - Should charge shipping\n55. **Subtotal just below threshold** - threshold=100, subtotal=99.99\n56. **Subtotal just above threshold** - threshold=100, subtotal=100.01\n57. **Very high subtotal** - Well above threshold\n\n**Invalid Input Cases:**\n58. **Negative subtotal** - Should raise exception or return shipping cost\n\n---\n\n### 7. Calculate Tax Tests (`calculate_tax`)\n\n**Normal Cases:**\n59. **Tax on positive amount** - amount Ă— tax_rate\n60. **Tax on zero amount** - Should return 0.0\n\n**Edge Cases:**\n61. **Tax with zero tax rate** - Should return 0.0\n62. **Tax on very large amount** - Precision test\n63. **Tax calculation precision** - Verify rounding\n\n**Invalid Input Cases:**\n64. **Tax on negative amount** - Should raise exception or handle gracefully\n\n---\n\n### 8. Calculate Total Tests (`calculate_total`)\n\n**Normal Cases:**\n65. **Total for empty order** - Should be 0.0 (or just tax on 0?)\n66. **Total with single item, no discount** - item + shipping + tax\n67. **Total with multiple items, no discount** - subtotal + shipping + tax\n68. **Total with discount, shipping still charged** - discount doesn't trigger free shipping\n69. **Total with discount, free shipping triggered** - discount makes subtotal â‰Ą threshold\n70. **Total with 100% discount** - Only shipping + tax (if applicable)\n\n**Edge Cases:**\n71. **Total where discount affects shipping** - subtotal=110, discount brings to 95 â†’ charge shipping\n72. **Total at free shipping boundary** - Exact threshold after discount\n73. **Total with zero tax rate** - No tax added\n74. **Total with zero shipping cost** - No shipping added\n\n**Invalid Input Cases:**\n75. **Calculate total with negative discount** - Should raise exception\n76. **Calculate total with discount > 100%** - Should raise exception\n\n**Business Logic Integration:**\n77. **Verify calculation order** - Tax applied to (subtotal - discount) or (subtotal - discount + shipping)?\n78. **Complex scenario** - Multiple items, partial discount, shipping charged, tax applied\n\n---\n\n### 9. Total Items Tests (`total_items`)\n\n**Normal Cases:**\n79. **Total items in empty order** - Returns 0\n80. **Total items with single item (quantity=1)** - Returns 1\n81. **Total items with single item (quantity=5)** - Returns 5\n82. **Total items with multiple items** - Sum of all quantities\n\n**Edge Cases:**\n83. **Total items after adding and removing** - Verify correct count\n\n---\n\n### 10. Clear Order Tests (`clear_order`)\n\n**Normal Cases:**\n84. **Clear non-empty order** - All items removed, subtotal=0\n85. **Clear already empty order** - No error, remains empty\n\n**State Verification:**\n86. **Verify state after clear** - is_empty()=True, total_items()=0, subtotal=0.0, list_items()=[]\n\n---\n\n### 11. List Items Tests (`list_items`)\n\n**Normal Cases:**\n87. **List items in empty order** - Returns empty list []\n88. **List single item** - Returns list with one item name\n89. **List multiple items** - Returns list with all item names\n\n**Edge Cases:**\n90. **List items preserves insertion order** - If order matters (implementation-dependent)\n91. **List items after removal** - Verify removed item not in list\n\n---\n\n### 12. Is Empty Tests (`is_empty`)\n\n**Normal Cases:**\n92. **Is empty on new order** - Returns True\n93. **Is empty after adding item** - Returns False\n94. **Is empty after clearing order** - Returns True\n\n**Edge Cases:**\n95. **Is empty after add then remove all items** - Returns True\n\n---\n\n### 13. Integration/Workflow Tests\n\n**Complex Scenarios:**\n96. **Full order workflow** - Add items â†’ apply discount â†’ verify total includes shipping + tax correctly\n97. **Discount affecting free shipping** - Add items totaling $110 â†’ 15% discount â†’ subtotal now $93.50 â†’ shipping charged\n98. **Multiple operations sequence** - Add, remove, add more, clear, add again\n99. **State consistency** - After various operations, verify all getters return consistent values\n100. **Precision and rounding** - Complex calculation with multiple items, discount, shipping, tax - verify no floating-point errors\n\n**Edge Case Integration:**\n101. **Order with mix of regular and zero-price items** - Verify calculations correct\n102. **Large order (100+ items)** - Performance and correctness\n103. **Repeating add/remove cycles** - Memory leaks, state consistency\n\n---\n\n### 14. Exception Handling Tests\n\n**Expected Exceptions:**\n104. **KeyError on remove non-existent item** - Verify specific exception type\n105. **ValueError on negative inputs** - Verify appropriate exceptions for invalid data\n106. **TypeError on wrong parameter types** - Verify type validation\n\n---\n\n### Summary Statistics\n- **Total scenarios identified: 106**\n- **Methods covered: 12 (including __init__)**\n- **Test categories:**\n  - Normal use cases: ~45\n  - Edge cases: ~35\n  - Invalid input/exceptions: ~20\n  - Integration tests: ~6\n\nThis comprehensive list ensures thorough coverage of all public methods, business logic, edge cases, and error conditions.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_partial_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_very_high_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=10000.0)\n        self.assertEqual(calc.free_shipping_threshold, 10000.0)\n\n    def test_init_very_low_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.01)\n        self.assertEqual(calc.free_shipping_threshold, 0.01)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Cherry\", 3.0)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_duplicate_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Widget\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_high_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_fractional_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 19.99, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", -10.0, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", 10.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 10.0, 1)\n\n    def test_add_item_none_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", None, 1)\n\n    def test_add_item_invalid_price_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", \"invalid\", 1)\n\n    def test_add_item_invalid_quantity_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 10.0, \"invalid\")\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(None)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 1)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 19.0, places=2)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 1)\n        calc.add_item(\"Paid\", 10.0, 1)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_large_numbers(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 99999.99, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.90, places=2)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.99, 3)\n        calc.add_item(\"Item2\", 5.49, 2)\n        expected = 10.99 * 3 + 5.49 * 2\n        self.assertAlmostEqual(calc.get_subtotal(), expected, places=2)\n\n    def test_apply_discount_no_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_partial(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_half(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_full(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_large_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(1000000.0, 25.0)\n        self.assertAlmostEqual(result, 750000.0, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_invalid_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"invalid\")\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_very_high_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(10000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertAlmostEqual(result, 230000.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 14.9985, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 1)\n        calc.add_item(\"Item2\", 20.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_shipping_charged(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 72.0\n        expected = discounted + 10.0 + (82.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 108.0\n        expected = discounted + 0.0 + (108.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        total = calc.calculate_total(discount=15.0)\n        discounted = 93.50\n        expected = discounted + 10.0 + (103.50 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_free_shipping_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=20.0)\n        discounted = 100.0\n        expected = discounted + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_tax(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + 0.0\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_shipping(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 0.0 + (50.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_over_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=150.0)\n\n    def test_calculate_total_complex_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 45.0, 2)\n        calc.add_item(\"Item2\", 30.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 120.0\n        discounted = 108.0\n        shipping = 0.0\n        tax = 108.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_five(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_add_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 3)\n        calc.add_item(\"Item2\", 20.0, 2)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_verification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertIn(\"Apple\", items)\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.add_item(\"Banana\", 20.0)\n        calc.add_item(\"Cherry\", 30.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Cherry\", items)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.add_item(\"Banana\", 20.0)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clearing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_workflow_integration(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 800.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 850.0, places=2)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 765.0\n        shipping = 0.0\n        tax = 765.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_discount_affects_shipping_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 110.0)\n        total_no_discount = calc.calculate_total()\n        self.assertGreater(total_no_discount, 110.0)\n        total_with_discount = calc.calculate_total(discount=15.0)\n        discounted = 93.50\n        shipping = 10.0\n        tax = 103.50 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total_with_discount, expected, places=2)\n\n    def test_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 1)\n        calc.add_item(\"B\", 20.0, 2)\n        calc.remove_item(\"A\")\n        calc.add_item(\"C\", 30.0, 1)\n        calc.clear_order()\n        calc.add_item(\"D\", 40.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 40.0)\n\n    def test_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 25.0, 2)\n        calc.add_item(\"Item2\", 50.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 100.0)\n        self.assertEqual(len(calc.list_items()), 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_precision_and_rounding_complex(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 19.99, 3)\n        calc.add_item(\"Item2\", 7.49, 5)\n        calc.add_item(\"Item3\", 12.95, 2)\n        subtotal = calc.get_subtotal()\n        total = calc.calculate_total(discount=12.5)\n        discounted_subtotal = subtotal * 0.875\n        shipping = 10.0 if discounted_subtotal < 100.0 else 0.0\n        taxable = discounted_subtotal + shipping\n        tax = taxable * 0.23\n        expected = taxable + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_mix_regular_and_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 2)\n        calc.add_item(\"Paid\", 50.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 50.0)\n\n    def test_large_order_many_items(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertAlmostEqual(calc.get_subtotal(), 100.0)\n\n    def test_repeating_add_remove_cycles(self):\n        calc = OrderCalculator()\n        for _ in range(10):\n            calc.add_item(\"TempItem\", 10.0, 1)\n            calc.remove_item(\"TempItem\")\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_partial_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_very_high_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=10000.0)\n        self.assertEqual(calc.free_shipping_threshold, 10000.0)\n\n    def test_init_very_low_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.01)\n        self.assertEqual(calc.free_shipping_threshold, 0.01)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Cherry\", 3.0)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_duplicate_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Widget\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_high_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Diamond\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_fractional_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 19.99, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", -10.0, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", 10.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 10.0, 1)\n\n    def test_add_item_none_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", None, 1)\n\n    def test_add_item_invalid_price_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", \"invalid\", 1)\n\n    def test_add_item_invalid_quantity_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 10.0, \"invalid\")\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(None)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 1)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 19.0, places=2)\n\n    def test_get_subtotal_with_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 1)\n        calc.add_item(\"Paid\", 10.0, 1)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_large_numbers(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 99999.99, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.90, places=2)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.99, 3)\n        calc.add_item(\"Item2\", 5.49, 2)\n        expected = 10.99 * 3 + 5.49 * 2\n        self.assertAlmostEqual(calc.get_subtotal(), expected, places=2)\n\n    def test_apply_discount_no_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_partial(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_half(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_full(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_large_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(1000000.0, 25.0)\n        self.assertAlmostEqual(result, 750000.0, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_invalid_type(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"invalid\")\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_very_high_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(10000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertAlmostEqual(result, 230000.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 14.9985, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 1)\n        calc.add_item(\"Item2\", 20.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_shipping_charged(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 72.0\n        expected = discounted + 10.0 + (82.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 108.0\n        expected = discounted + 0.0 + (108.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        total = calc.calculate_total(discount=15.0)\n        discounted = 93.50\n        expected = discounted + 10.0 + (103.50 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_free_shipping_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(discount=20.0)\n        discounted = 100.0\n        expected = discounted + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_tax(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + 0.0\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_shipping(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 0.0 + (50.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_over_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=150.0)\n\n    def test_calculate_total_complex_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 45.0, 2)\n        calc.add_item(\"Item2\", 30.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        subtotal = 120.0\n        discounted = 108.0\n        shipping = 0.0\n        tax = 108.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_five(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_add_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 3)\n        calc.add_item(\"Item2\", 20.0, 2)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_verification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertIn(\"Apple\", items)\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.add_item(\"Banana\", 20.0)\n        calc.add_item(\"Cherry\", 30.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Cherry\", items)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.add_item(\"Banana\", 20.0)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clearing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_workflow_integration(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 800.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 850.0, places=2)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 765.0\n        shipping = 0.0\n        tax = 765.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_discount_affects_shipping_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 110.0)\n        total_no_discount = calc.calculate_total()\n        self.assertGreater(total_no_discount, 110.0)\n        total_with_discount = calc.calculate_total(discount=15.0)\n        discounted = 93.50\n        shipping = 10.0\n        tax = 103.50 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total_with_discount, expected, places=2)\n\n    def test_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 1)\n        calc.add_item(\"B\", 20.0, 2)\n        calc.remove_item(\"A\")\n        calc.add_item(\"C\", 30.0, 1)\n        calc.clear_order()\n        calc.add_item(\"D\", 40.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 40.0)\n\n    def test_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 25.0, 2)\n        calc.add_item(\"Item2\", 50.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 100.0)\n        self.assertEqual(len(calc.list_items()), 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_precision_and_rounding_complex(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 19.99, 3)\n        calc.add_item(\"Item2\", 7.49, 5)\n        calc.add_item(\"Item3\", 12.95, 2)\n        subtotal = calc.get_subtotal()\n        total = calc.calculate_total(discount=12.5)\n        discounted_subtotal = subtotal * 0.875\n        shipping = 10.0 if discounted_subtotal < 100.0 else 0.0\n        taxable = discounted_subtotal + shipping\n        tax = taxable * 0.23\n        expected = taxable + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_mix_regular_and_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0.0, 2)\n        calc.add_item(\"Paid\", 50.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 50.0)\n\n    def test_large_order_many_items(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertAlmostEqual(calc.get_subtotal(), 100.0)\n\n    def test_repeating_add_remove_cycles(self):\n        calc = OrderCalculator()\n        for _ in range(10):\n            calc.add_item(\"TempItem\", 10.0, 1)\n            calc.remove_item(\"TempItem\")\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 196.73798322677612,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}