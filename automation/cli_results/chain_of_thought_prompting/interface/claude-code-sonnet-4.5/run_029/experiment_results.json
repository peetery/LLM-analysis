{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T01:08:27.296087",
  "response_time": 188.77113008499146,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_029\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class interface to prepare for generating comprehensive unit tests.\n\n## Analysis of OrderCalculator Class\n\n### Class Structure\n- **Purpose**: E-commerce order calculation system with tax, shipping, and discount handling\n- **Dependencies**: Uses `typing.TypedDict` and `List`\n- **State Management**: Maintains a collection of items (likely using `Item` TypedDict)\n\n### Constructor Parameters\n- `tax_rate` (default: 0.23 = 23%)\n- `free_shipping_threshold` (default: 100.0)\n- `shipping_cost` (default: 10.0)\n\n### Methods Identified (11 public methods)\n\n#### 1. **add_item(name, price, quantity)**\n- Adds items to order\n- Test considerations:\n  - Valid items with different quantities\n  - Edge cases: zero/negative price, zero/negative quantity\n  - Duplicate item names (update vs append?)\n  - Type validation (non-string names, non-numeric values)\n\n#### 2. **remove_item(name)**\n- Removes item by name\n- Test considerations:\n  - Remove existing items\n  - Remove non-existent items (should raise exception or silent?)\n  - Remove from empty order\n  - Case sensitivity\n\n#### 3. **get_subtotal()**\n- Returns sum of all items (price Ă— quantity)\n- Test considerations:\n  - Empty order â†’ 0.0\n  - Single item\n  - Multiple items\n  - Floating point precision\n\n#### 4. **apply_discount(subtotal, discount)**\n- Applies discount to subtotal\n- Test considerations:\n  - Percentage discount (0-100?)\n  - Fixed amount discount?\n  - Negative discount\n  - Discount > subtotal\n  - Zero discount\n\n#### 5. **calculate_shipping(discounted_subtotal)**\n- Calculates shipping based on threshold\n- Test considerations:\n  - Below threshold â†’ shipping_cost\n  - Above threshold â†’ 0.0\n  - Exactly at threshold (boundary)\n\n#### 6. **calculate_tax(amount)**\n- Calculates tax on amount\n- Test considerations:\n  - Various amounts\n  - Zero amount\n  - Tax rate variations (custom constructor)\n\n#### 7. **calculate_total(discount)**\n- Main calculation: subtotal - discount + shipping + tax\n- Test considerations:\n  - Complete workflow with various scenarios\n  - Order of operations (tax on what? shipping on what?)\n  - Empty order\n  - With/without discount\n\n#### 8. **total_items()**\n- Returns total quantity of all items\n- Test considerations:\n  - Empty order â†’ 0\n  - Single item with quantity > 1\n  - Multiple items\n\n#### 9. **clear_order()**\n- Resets order state\n- Test considerations:\n  - Clear non-empty order\n  - Clear already empty order\n  - Verify all state reset\n\n#### 10. **list_items()**\n- Returns list of item names\n- Test considerations:\n  - Empty order â†’ []\n  - Order with items\n  - Format of returned names\n\n#### 11. **is_empty()**\n- Checks if order has items\n- Test considerations:\n  - Empty order â†’ True\n  - After adding items â†’ False\n  - After clearing â†’ True\n\n### Key Testing Scenarios to Cover\n\n**Happy Path:**\n- Add items â†’ calculate total with/without discount\n- Free shipping scenario (subtotal > threshold)\n- Paid shipping scenario (subtotal < threshold)\n\n**Edge Cases:**\n- Empty order operations\n- Boundary values (threshold exact match, zero quantities)\n- Floating point precision\n- Maximum/minimum values\n\n**Error Cases:**\n- Invalid inputs (negative prices, zero quantities)\n- Type errors (wrong parameter types)\n- Operations on non-existent items\n- Invalid discount values\n\n**State Management:**\n- Multiple additions of same item\n- Add/remove sequences\n- Clear and reuse\n\n### Assumptions to Validate\n1. **Discount format**: Percentage (0-100) or decimal (0.0-1.0)?\n2. **Tax calculation**: On subtotal? On subtotal after discount?\n3. **Duplicate items**: Replace or accumulate quantities?\n4. **Item TypedDict structure**: What fields does it contain?\n\nI'm ready for the next step. Should I proceed with writing test scenarios or the actual test code?",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll list comprehensive unit test scenarios covering all methods and edge cases for the `OrderCalculator` class.\n\n## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n1. **Default initialization** (normal) - Verify default values for tax_rate, free_shipping_threshold, shipping_cost\n2. **Custom initialization** (normal) - Verify custom values are properly set\n3. **Zero tax rate** (edge case) - Verify tax_rate=0.0 works\n4. **Negative tax rate** (invalid input) - Check if negative tax_rate is rejected or handled\n5. **Negative shipping cost** (invalid input) - Check if negative shipping_cost is rejected\n6. **Negative threshold** (invalid input) - Check if negative free_shipping_threshold is rejected\n7. **Type validation** (invalid input) - Pass non-numeric values to constructor parameters\n\n---\n\n### add_item(name, price, quantity)\n\n#### Normal Cases\n8. **Add single item with default quantity** (normal) - Add item with quantity=1\n9. **Add single item with custom quantity** (normal) - Add item with quantity > 1\n10. **Add multiple different items** (normal) - Add several items with different names\n11. **Add duplicate item name** (normal/edge) - Test if quantities accumulate or item is replaced\n\n#### Edge Cases\n12. **Add item with zero price** (edge case) - Verify behavior with price=0.0\n13. **Add item with zero quantity** (edge case) - Check if quantity=0 is allowed\n14. **Add item with quantity=1 million** (edge case) - Test large quantity values\n15. **Add item with very small price** (edge case) - Test floating point precision (e.g., 0.01)\n16. **Add item with very large price** (edge case) - Test large monetary values\n\n#### Invalid Inputs\n17. **Add item with negative price** (invalid input) - Should raise ValueError or similar\n18. **Add item with negative quantity** (invalid input) - Should raise ValueError or similar\n19. **Add item with empty name** (invalid input) - Empty string as item name\n20. **Add item with None name** (invalid input) - None as item name\n21. **Add item with non-string name** (invalid input) - Integer, list, etc. as name\n22. **Add item with non-numeric price** (invalid input) - String, None as price\n23. **Add item with non-integer quantity** (invalid input) - Float, string as quantity\n\n---\n\n### remove_item(name)\n\n#### Normal Cases\n24. **Remove existing item** (normal) - Remove an item that was added\n25. **Remove last remaining item** (normal) - Remove item leaving order empty\n\n#### Edge Cases\n26. **Remove from empty order** (edge/exception) - Should raise exception or return gracefully\n27. **Remove non-existent item** (edge/exception) - Item name not in order\n28. **Remove item twice** (edge/exception) - Remove same item consecutively\n29. **Case sensitivity check** (edge case) - Verify \"Apple\" vs \"apple\" are different\n\n#### Invalid Inputs\n30. **Remove with None name** (invalid input) - None as parameter\n31. **Remove with empty string** (invalid input) - Empty string as name\n32. **Remove with non-string name** (invalid input) - Integer, list as name\n\n---\n\n### get_subtotal()\n\n#### Normal Cases\n33. **Subtotal of empty order** (normal) - Should return 0.0\n34. **Subtotal with single item** (normal) - Single item subtotal calculation\n35. **Subtotal with multiple items** (normal) - Multiple items subtotal calculation\n36. **Subtotal with different quantities** (normal) - Items with quantity > 1\n\n#### Edge Cases\n37. **Subtotal with zero-price items** (edge case) - Items added with price=0.0\n38. **Floating point precision** (edge case) - Multiple items with prices like 0.1, 0.2, 0.3\n39. **Very large subtotal** (edge case) - Many items or high-price items\n\n---\n\n### apply_discount(subtotal, discount)\n\n#### Normal Cases\n40. **Apply percentage discount** (normal) - Assuming discount is percentage (e.g., 10 for 10%)\n41. **Apply zero discount** (normal) - discount=0.0 returns original subtotal\n42. **Apply 100% discount** (edge case) - discount=100 or 1.0 (depending on format)\n\n#### Edge Cases\n43. **Discount equals subtotal** (edge case) - Exact match\n44. **Discount on zero subtotal** (edge case) - Apply discount when subtotal=0.0\n45. **Very small discount** (edge case) - Floating point precision test\n\n#### Invalid Inputs\n46. **Negative discount** (invalid input/edge) - Should raise error or treat as 0\n47. **Discount greater than 100%** (invalid input) - If percentage-based\n48. **Discount greater than subtotal** (invalid input) - If fixed-amount based\n49. **Non-numeric discount** (invalid input) - String, None as discount\n50. **Non-numeric subtotal** (invalid input) - String, None as subtotal\n\n---\n\n### calculate_shipping(discounted_subtotal)\n\n#### Normal Cases\n51. **Shipping below threshold** (normal) - discounted_subtotal < free_shipping_threshold â†’ shipping_cost\n52. **Shipping above threshold** (normal) - discounted_subtotal > free_shipping_threshold â†’ 0.0\n53. **Shipping at threshold** (boundary) - discounted_subtotal == free_shipping_threshold\n\n#### Edge Cases\n54. **Shipping with zero subtotal** (edge case) - Should charge shipping_cost\n55. **Shipping with negative subtotal** (edge case) - After large discount\n56. **Very large subtotal** (edge case) - Well above threshold\n\n#### Invalid Inputs\n57. **Non-numeric subtotal** (invalid input) - String, None as parameter\n\n---\n\n### calculate_tax(amount)\n\n#### Normal Cases\n58. **Tax on positive amount** (normal) - Standard tax calculation\n59. **Tax on zero amount** (normal) - Should return 0.0\n60. **Tax with custom rate** (normal) - Use constructor with different tax_rate\n\n#### Edge Cases\n61. **Tax with zero rate** (edge case) - tax_rate=0.0 in constructor\n62. **Tax on very large amount** (edge case) - Large monetary value\n63. **Tax on very small amount** (edge case) - Floating point precision\n\n#### Invalid Inputs\n64. **Tax on negative amount** (invalid input/edge) - Should handle or raise error\n65. **Non-numeric amount** (invalid input) - String, None as amount\n\n---\n\n### calculate_total(discount)\n\n#### Integration Tests\n66. **Total with empty order** (normal) - Should return 0.0 or minimal value\n67. **Total without discount** (normal) - discount=0.0, verify full calculation\n68. **Total with discount** (normal) - Verify subtotal - discount + shipping + tax\n69. **Total with free shipping** (normal) - Order above threshold\n70. **Total with paid shipping** (normal) - Order below threshold\n71. **Total at shipping threshold** (boundary) - Exactly at threshold\n72. **Total with 100% discount** (edge case) - Maximum discount scenario\n73. **Complete workflow** (integration) - Add items â†’ calculate total â†’ verify all components\n\n#### Edge Cases\n74. **Total with zero items** (edge case) - Empty order total\n75. **Order of operations** (verification) - Ensure tax/shipping calculated in correct order\n76. **Floating point accuracy** (edge case) - Multiple decimal operations\n\n#### Invalid Inputs\n77. **Negative discount** (invalid input) - Should handle gracefully\n78. **Non-numeric discount** (invalid input) - String, None as discount\n\n---\n\n### total_items()\n\n#### Normal Cases\n79. **Total items in empty order** (normal) - Should return 0\n80. **Total items with single item** (normal) - quantity=1 â†’ return 1\n81. **Total items with single item, multiple quantity** (normal) - quantity=5 â†’ return 5\n82. **Total items with multiple items** (normal) - Sum all quantities\n\n#### Edge Cases\n83. **Total after adding and removing** (edge case) - Verify count updates correctly\n84. **Total with zero-quantity items** (edge case) - If zero-quantity allowed\n\n---\n\n### clear_order()\n\n#### Normal Cases\n85. **Clear non-empty order** (normal) - Verify all items removed\n86. **Clear empty order** (normal) - Should not raise error\n87. **Clear and verify state** (verification) - Check subtotal=0, is_empty=True, total_items=0\n88. **Clear and reuse** (normal) - Clear â†’ add new items â†’ verify works\n\n---\n\n### list_items()\n\n#### Normal Cases\n89. **List items in empty order** (normal) - Should return []\n90. **List items with single item** (normal) - Return list with one name\n91. **List items with multiple items** (normal) - Return all item names\n\n#### Edge Cases\n92. **List items order** (edge case) - Verify order (insertion order, alphabetical, etc.)\n93. **List items after removal** (edge case) - Verify removed items not in list\n94. **List items immutability** (verification) - Modifying returned list shouldn't affect order\n\n---\n\n### is_empty()\n\n#### Normal Cases\n95. **Empty order check** (normal) - New order â†’ True\n96. **Non-empty order check** (normal) - After adding items â†’ False\n97. **Empty after clear** (normal) - Add items â†’ clear â†’ True\n\n#### Edge Cases\n98. **Empty after removing all items** (edge case) - Add â†’ remove all â†’ True\n99. **Empty with zero-quantity items** (edge case) - If zero-quantity allowed\n\n---\n\n### Cross-Method Integration Tests\n\n100. **Add multiple, remove some, calculate total** (integration) - Complex workflow\n101. **Discount affects shipping** (integration) - Discount brings subtotal below threshold\n102. **Tax calculation point** (verification) - Verify tax applied to correct amount\n103. **Multiple operations sequence** (integration) - add â†’ remove â†’ add â†’ clear â†’ add â†’ total\n104. **State consistency** (verification) - Verify list_items, total_items, is_empty are consistent\n105. **Floating point accumulation** (edge case) - Multiple additions/calculations\n\n---\n\n### Exception/Error Handling Tests\n\n106. **Type errors are caught** (exception) - Verify appropriate exceptions for wrong types\n107. **Value errors are caught** (exception) - Verify appropriate exceptions for invalid values\n108. **KeyError handling** (exception) - Remove non-existent items\n109. **Exception messages** (verification) - Check error messages are informative\n\n---\n\n**Total: 109 test scenarios** covering normal operation, edge cases, invalid inputs, exceptions, integration tests, and state verification across all 11 public methods.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_constructor_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_constructor_custom_initialization(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_constructor_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_constructor_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_constructor_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_constructor_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_constructor_invalid_type_tax_rate(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"invalid\")\n\n    def test_add_item_single_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_item_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_duplicate_item_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Apple\", 2.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.50, 0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -2.50, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 2.50, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 2.50, 1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 2.50, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"two fifty\", 1)\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 2.50, 1.5)\n\n    def test_remove_item_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_last_remaining_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(None)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 9.50)\n\n    def test_get_subtotal_different_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 5)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 5)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        calc.add_item(\"Item3\", 0.3, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.6, places=2)\n\n    def test_get_subtotal_very_large(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 100000.00, 10)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_apply_discount_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_100_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_non_numeric_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"ten\")\n\n    def test_apply_discount_non_numeric_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(\"hundred\", 10.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(-10.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(1000000.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_non_numeric_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"fifty\")\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 15.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(1000000.0)\n        self.assertEqual(tax, 230000.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(tax, 0.0023, places=4)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_non_numeric_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"hundred\")\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_without_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 0.0\n        tax = (90.0 + 0.0) * 0.23\n        expected = 90.0 + 0.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_paid_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_complete_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        calc.add_item(\"Banana\", 30.0, 1)\n        total = calc.calculate_total(20.0)\n        subtotal = 130.0\n        discounted = 104.0\n        shipping = 0.0\n        tax = 104.0 * 0.23\n        expected = 104.0 + 0.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_items(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_non_numeric_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(\"ten\")\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.add_item(\"Banana\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.add_item(\"Banana\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_and_reuse(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.add_item(\"Banana\", 1.50, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.add_item(\"Banana\", 1.50, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_remove_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        calc.remove_item(\"Banana\")\n        total = calc.calculate_total(10.0)\n        subtotal = 60.0\n        discounted = 54.0\n        shipping = 10.0\n        tax = (54.0 + 10.0) * 0.23\n        expected = 54.0 + 10.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 110.0, 1)\n        total_no_discount = calc.calculate_total(0.0)\n        calc2 = OrderCalculator()\n        calc2.add_item(\"Apple\", 110.0, 1)\n        total_with_discount = calc2.calculate_total(20.0)\n        subtotal1 = 110.0\n        discounted1 = 110.0\n        shipping1 = 0.0\n        tax1 = 110.0 * 0.23\n        expected1 = 110.0 + 0.0 + tax1\n        subtotal2 = 110.0\n        discounted2 = 88.0\n        shipping2 = 10.0\n        tax2 = 98.0 * 0.23\n        expected2 = 88.0 + 10.0 + tax2\n        self.assertAlmostEqual(total_no_discount, expected1, places=2)\n        self.assertAlmostEqual(total_with_discount, expected2, places=2)\n\n    def test_integration_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 20.0, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 30.0, 1)\n        calc.clear_order()\n        calc.add_item(\"Orange\", 40.0, 2)\n        total = calc.calculate_total(5.0)\n        self.assertGreater(total, 0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 20.0, 3)\n        calc.add_item(\"Banana\", 10.0, 2)\n        items = calc.list_items()\n        total_items = calc.total_items()\n        is_empty = calc.is_empty()\n        self.assertEqual(len(items), 2)\n        self.assertEqual(total_items, 5)\n        self.assertFalse(is_empty)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_constructor_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_constructor_custom_initialization(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_constructor_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_constructor_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_constructor_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_constructor_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_constructor_invalid_type_tax_rate(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"invalid\")\n\n    def test_add_item_single_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_item_custom_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_duplicate_item_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Apple\", 2.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.50, 0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 999999.99, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -2.50, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 2.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 2.50, 1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 2.50, 1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 2.50, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"two fifty\", 1)\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 2.50, 1.5)\n\n    def test_remove_item_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_last_remaining_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(None)\n\n    def test_remove_item_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 9.50)\n\n    def test_get_subtotal_different_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 5)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 5)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        calc.add_item(\"Item3\", 0.3, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.6, places=2)\n\n    def test_get_subtotal_very_large(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 100000.00, 10)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_apply_discount_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_100_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_non_numeric_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(100.0, \"ten\")\n\n    def test_apply_discount_non_numeric_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.apply_discount(\"hundred\", 10.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(-10.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(1000000.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_shipping_non_numeric_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_shipping(\"fifty\")\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 15.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(1000000.0)\n        self.assertEqual(tax, 230000.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(tax, 0.0023, places=4)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_non_numeric_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.calculate_tax(\"hundred\")\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_without_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 0.0\n        tax = (90.0 + 0.0) * 0.23\n        expected = 90.0 + 0.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_paid_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(0.0)\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_complete_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        calc.add_item(\"Banana\", 30.0, 1)\n        total = calc.calculate_total(20.0)\n        subtotal = 130.0\n        discounted = 104.0\n        shipping = 0.0\n        tax = 104.0 * 0.23\n        expected = 104.0 + 0.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_items(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_non_numeric_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        with self.assertRaises(TypeError):\n            calc.calculate_total(\"ten\")\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.add_item(\"Banana\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.add_item(\"Banana\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_and_reuse(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.add_item(\"Banana\", 1.50, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.add_item(\"Banana\", 1.50, 1)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_remove_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        calc.remove_item(\"Banana\")\n        total = calc.calculate_total(10.0)\n        subtotal = 60.0\n        discounted = 54.0\n        shipping = 10.0\n        tax = (54.0 + 10.0) * 0.23\n        expected = 54.0 + 10.0 + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 110.0, 1)\n        total_no_discount = calc.calculate_total(0.0)\n        calc2 = OrderCalculator()\n        calc2.add_item(\"Apple\", 110.0, 1)\n        total_with_discount = calc2.calculate_total(20.0)\n        subtotal1 = 110.0\n        discounted1 = 110.0\n        shipping1 = 0.0\n        tax1 = 110.0 * 0.23\n        expected1 = 110.0 + 0.0 + tax1\n        subtotal2 = 110.0\n        discounted2 = 88.0\n        shipping2 = 10.0\n        tax2 = 98.0 * 0.23\n        expected2 = 88.0 + 10.0 + tax2\n        self.assertAlmostEqual(total_no_discount, expected1, places=2)\n        self.assertAlmostEqual(total_with_discount, expected2, places=2)\n\n    def test_integration_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 20.0, 1)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 30.0, 1)\n        calc.clear_order()\n        calc.add_item(\"Orange\", 40.0, 2)\n        total = calc.calculate_total(5.0)\n        self.assertGreater(total, 0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 20.0, 3)\n        calc.add_item(\"Banana\", 10.0, 2)\n        items = calc.list_items()\n        total_items = calc.total_items()\n        is_empty = calc.is_empty()\n        self.assertEqual(len(items), 2)\n        self.assertEqual(total_items, 5)\n        self.assertFalse(is_empty)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 188.77113008499146,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}