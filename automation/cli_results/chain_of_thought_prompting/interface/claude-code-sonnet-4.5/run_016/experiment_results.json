{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T21:12:22.470860",
  "response_time": 167.21205687522888,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_016\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class interface to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor Parameters\n- `tax_rate`: Default 0.23 (23%)\n- `free_shipping_threshold`: Default 100.0\n- `shipping_cost`: Default 10.0\n\nThese suggest configurable tax and shipping logic.\n\n### Method Categories\n\n#### 1. **Item Management** (CRUD operations)\n- `add_item(name, price, quantity)`: Add items to order\n- `remove_item(name)`: Remove items by name\n- `list_items()`: Query items\n- `is_empty()`: Check if order has items\n- `clear_order()`: Reset order\n\n#### 2. **Calculation Methods**\n- `get_subtotal()`: Sum of all items\n- `apply_discount(subtotal, discount)`: Apply discount to subtotal\n- `calculate_shipping(discounted_subtotal)`: Shipping based on threshold\n- `calculate_tax(amount)`: Tax calculation\n- `calculate_total(discount)`: Final total (orchestrates other calculations)\n- `total_items()`: Count of items\n\n### Key Test Scenarios to Cover\n\n#### Edge Cases & Invalid Inputs\n- Negative prices, quantities, discounts, tax rates\n- Zero values (price=0, quantity=0, discount=0)\n- Removing non-existent items\n- Operations on empty orders\n- Invalid types (strings for numbers, etc.)\n- Extreme values (very large numbers)\n- Boundary conditions (exactly at free shipping threshold)\n\n#### Business Logic\n- Free shipping threshold behavior (below, at, above)\n- Discount application (0%, 100%, >100%)\n- Tax calculation accuracy\n- Multiple items with same/different names\n- Quantity handling (adding same item multiple times)\n\n#### State Management\n- Order state after add/remove/clear operations\n- Immutability concerns\n- Method chaining potential\n\n#### Typical Usage\n- Single item orders\n- Multiple items\n- Full order flow (add â†’ discount â†’ total)\n- Subtotal â†’ shipping â†’ tax â†’ total calculation chain\n\n### Potential Exception Scenarios\n- `ValueError` for invalid inputs (negative values)\n- `KeyError` for removing non-existent items\n- `TypeError` for wrong argument types\n\n### Calculation Flow Hypothesis\nBased on method signatures, the likely calculation order in `calculate_total()`:\n1. Get subtotal from items\n2. Apply discount to subtotal\n3. Calculate shipping based on discounted subtotal\n4. Calculate tax (unclear if on subtotal+shipping or just subtotal)\n5. Sum all components\n\nReady to proceed with test scenario definition and test code generation.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll list comprehensive unit test scenarios for the `OrderCalculator` class.\n\n## Constructor Tests\n\n1. **Default Initialization** (normal use)\n   - Verify default tax_rate (0.23), free_shipping_threshold (100.0), shipping_cost (10.0)\n\n2. **Custom Parameters** (normal use)\n   - Initialize with custom tax_rate, free_shipping_threshold, shipping_cost\n\n3. **Zero Tax Rate** (edge case)\n   - Verify tax_rate=0.0 is accepted\n\n4. **Negative Tax Rate** (invalid input)\n   - Should raise ValueError or be rejected\n\n5. **Negative Shipping Cost** (invalid input)\n   - Should raise ValueError or be rejected\n\n6. **Negative Free Shipping Threshold** (invalid input)\n   - Should raise ValueError or be rejected\n\n## add_item() Tests\n\n7. **Add Single Item** (normal use)\n   - Add one item with name, price, quantity\n\n8. **Add Multiple Different Items** (normal use)\n   - Add several items with different names\n\n9. **Add Same Item Twice** (behavior test)\n   - Check if quantity accumulates or item is replaced\n\n10. **Add Item with Default Quantity** (normal use)\n    - Call add_item without quantity parameter (default=1)\n\n11. **Add Item with Quantity 0** (edge case)\n    - Should raise ValueError or be rejected\n\n12. **Add Item with Negative Quantity** (invalid input)\n    - Should raise ValueError\n\n13. **Add Item with Negative Price** (invalid input)\n    - Should raise ValueError\n\n14. **Add Item with Price 0** (edge case)\n    - Should be allowed (free item)\n\n15. **Add Item with Empty Name** (invalid input)\n    - Should raise ValueError or be rejected\n\n16. **Add Item with Very Large Quantity** (edge case)\n    - Test with extreme values (e.g., 1000000)\n\n17. **Add Item with Very Large Price** (edge case)\n    - Test with extreme values (e.g., 999999.99)\n\n18. **Add Item with Float Quantity** (invalid type)\n    - Should raise TypeError or convert to int\n\n## remove_item() Tests\n\n19. **Remove Existing Item** (normal use)\n    - Add item then remove it successfully\n\n20. **Remove Non-Existent Item** (exception case)\n    - Should raise KeyError or ValueError\n\n21. **Remove from Empty Order** (exception case)\n    - Should raise KeyError or ValueError\n\n22. **Remove Item with Empty Name** (invalid input)\n    - Should raise ValueError or KeyError\n\n23. **Remove All Items One by One** (normal use)\n    - Add multiple items, remove each one\n\n## get_subtotal() Tests\n\n24. **Subtotal with No Items** (edge case)\n    - Should return 0.0\n\n25. **Subtotal with Single Item** (normal use)\n    - Verify price Ă— quantity\n\n26. **Subtotal with Multiple Items** (normal use)\n    - Sum of all (price Ă— quantity)\n\n27. **Subtotal After Adding and Removing** (state test)\n    - Verify correct calculation after modifications\n\n28. **Subtotal with Fractional Prices** (normal use)\n    - Test with prices like 19.99, 5.50\n\n## apply_discount() Tests\n\n29. **Apply 0% Discount** (edge case)\n    - Should return original subtotal\n\n30. **Apply 10% Discount** (normal use)\n    - Verify correct percentage calculation\n\n31. **Apply 100% Discount** (edge case)\n    - Should return 0.0\n\n32. **Apply Discount > 100%** (invalid input)\n    - Should raise ValueError or return negative (depends on implementation)\n\n33. **Apply Negative Discount** (invalid input)\n    - Should raise ValueError\n\n34. **Apply Discount to Zero Subtotal** (edge case)\n    - Should return 0.0\n\n35. **Apply Fractional Discount** (normal use)\n    - Test with 15.5%, 33.33%\n\n## calculate_shipping() Tests\n\n36. **Shipping Below Threshold** (normal use)\n    - discounted_subtotal < free_shipping_threshold â†’ shipping_cost\n\n37. **Shipping At Threshold** (boundary case)\n    - discounted_subtotal == free_shipping_threshold â†’ 0.0 (free shipping)\n\n38. **Shipping Above Threshold** (normal use)\n    - discounted_subtotal > free_shipping_threshold â†’ 0.0 (free shipping)\n\n39. **Shipping with Zero Subtotal** (edge case)\n    - Should charge shipping_cost\n\n40. **Shipping with Negative Subtotal** (invalid input)\n    - Should raise ValueError or handle gracefully\n\n## calculate_tax() Tests\n\n41. **Tax on Positive Amount** (normal use)\n    - Verify amount Ă— tax_rate\n\n42. **Tax on Zero Amount** (edge case)\n    - Should return 0.0\n\n43. **Tax with Zero Tax Rate** (edge case)\n    - Should return 0.0\n\n44. **Tax on Negative Amount** (invalid input)\n    - Should raise ValueError or return negative\n\n45. **Tax Calculation Precision** (normal use)\n    - Verify rounding behavior (e.g., 2 decimal places)\n\n## calculate_total() Tests\n\n46. **Total with Empty Order** (edge case)\n    - Should return shipping cost + 0 tax (or just 0)\n\n47. **Total with Single Item, No Discount** (normal use)\n    - Verify: subtotal + shipping + tax\n\n48. **Total with Multiple Items, No Discount** (normal use)\n    - Full calculation chain\n\n49. **Total with 10% Discount** (normal use)\n    - Verify discount applied before shipping/tax\n\n50. **Total with Free Shipping (Above Threshold)** (normal use)\n    - Verify shipping = 0 when subtotal >= threshold\n\n51. **Total with Free Shipping (At Threshold)** (boundary case)\n    - Verify shipping = 0 when subtotal == threshold\n\n52. **Total Below Free Shipping Threshold** (normal use)\n    - Verify shipping cost is added\n\n53. **Total with 100% Discount** (edge case)\n    - Should only include shipping (if any) and tax on 0\n\n54. **Total with Discount Exceeding 100%** (invalid input)\n    - Should raise ValueError\n\n55. **Total with Negative Discount** (invalid input)\n    - Should raise ValueError\n\n56. **Tax Calculation Base** (behavior test)\n    - Clarify if tax is on (subtotal - discount) or (subtotal - discount + shipping)\n\n57. **Total Calculation Order** (behavior test)\n    - Verify: subtotal â†’ discount â†’ shipping â†’ tax â†’ total\n\n## total_items() Tests\n\n58. **Item Count with Empty Order** (edge case)\n    - Should return 0\n\n59. **Item Count with Single Item** (normal use)\n    - Should return quantity of that item\n\n60. **Item Count with Multiple Items** (normal use)\n    - Sum of all quantities\n\n61. **Item Count After Add and Remove** (state test)\n    - Verify correct count after modifications\n\n## clear_order() Tests\n\n62. **Clear Empty Order** (edge case)\n    - Should work without errors\n\n63. **Clear Order with Items** (normal use)\n    - All items removed, subtotal = 0\n\n64. **Clear Then Add** (state test)\n    - Verify order works normally after clearing\n\n## list_items() Tests\n\n65. **List Empty Order** (edge case)\n    - Should return empty list\n\n66. **List Single Item** (normal use)\n    - Should return list with one item name\n\n67. **List Multiple Items** (normal use)\n    - Should return all item names\n\n68. **List After Modifications** (state test)\n    - Verify list reflects current state\n\n69. **List Return Type** (behavior test)\n    - Verify returns List[str], not mutable reference\n\n## is_empty() Tests\n\n70. **Empty Order Initially** (normal use)\n    - Should return True\n\n71. **Not Empty After Adding Item** (normal use)\n    - Should return False\n\n72. **Empty After Clear** (state test)\n    - Should return True\n\n73. **Empty After Adding Then Removing All Items** (state test)\n    - Should return True\n\n## Integration/Complex Scenarios\n\n74. **Full Order Flow** (integration test)\n    - Add multiple items â†’ apply discount â†’ verify total with shipping and tax\n\n75. **Multiple Discounts Applied** (behavior test)\n    - Test if discounts can be applied multiple times or are cumulative\n\n76. **Precision and Rounding** (behavior test)\n    - Test with prices causing floating-point issues (e.g., 0.1 + 0.2)\n\n77. **Very Large Order** (stress test)\n    - Add 100+ items and verify performance/correctness\n\n78. **Order Modification During Calculation** (state test)\n    - Verify calculations are consistent when items change\n\n79. **Discount Applied After Shipping Threshold** (edge case)\n    - Subtotal above threshold, but after discount falls below\n\n80. **Zero Everything** (edge case)\n    - tax_rate=0, shipping_cost=0, no items, verify total=0\n\n## Type Safety Tests\n\n81. **String Instead of Float for Price** (invalid type)\n    - Should raise TypeError\n\n82. **String Instead of Int for Quantity** (invalid type)\n    - Should raise TypeError\n\n83. **None Values** (invalid input)\n    - Test None for required parameters\n\nThis gives **83 comprehensive test scenarios** covering normal use, edge cases, invalid inputs, exceptions, boundary conditions, state management, and integration tests.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_same_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, -1)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.0, 1)\n\n    def test_add_item_with_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.0, 1)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99, 1)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_with_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"NonExistent\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_subtotal_with_no_items(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_subtotal_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_subtotal_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        self.assertEqual(calc.get_subtotal(), 9.0)\n\n    def test_subtotal_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_subtotal_with_fractional_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 19.99, 1)\n        calc.add_item(\"Item2\", 5.50, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 30.99, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_negative_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_fractional_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 15.5)\n        self.assertAlmostEqual(result, 84.5, places=2)\n\n    def test_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_with_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_with_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_tax_on_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_tax_on_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_tax_on_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-10.0)\n\n    def test_tax_calculation_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0, places=2)\n\n    def test_total_with_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 10.0)\n\n    def test_total_with_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 1)\n        calc.add_item(\"Banana\", 20.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_ten_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        self.assertAlmostEqual(total, 110.7, places=2)\n\n    def test_total_with_free_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 184.5, places=2)\n\n    def test_total_with_free_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 123.0, places=2)\n\n    def test_total_below_free_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        self.assertEqual(total, 10.0)\n\n    def test_total_with_discount_exceeding_hundred_percent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=150.0)\n\n    def test_total_with_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_tax_calculation_base(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        expected_tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(expected_tax, 23.0, places=2)\n\n    def test_total_calculation_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        subtotal = calc.get_subtotal()\n        discounted = calc.apply_discount(subtotal, 10.0)\n        shipping = calc.calculate_shipping(discounted)\n        tax = calc.calculate_tax(discounted)\n        expected_total = discounted + shipping + tax\n        actual_total = calc.calculate_total(discount=10.0)\n        self.assertAlmostEqual(actual_total, expected_total, places=2)\n\n    def test_item_count_with_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_item_count_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_item_count_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_item_count_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 2.0)\n\n    def test_list_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_after_modifications(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_list_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        items = calc.list_items()\n        self.assertIsInstance(items, list)\n\n    def test_empty_order_initially(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_not_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_empty_after_adding_then_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_order_flow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        calc.add_item(\"Banana\", 30.0, 2)\n        total = calc.calculate_total(discount=10.0)\n        self.assertGreater(total, 0)\n\n    def test_precision_and_rounding(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=2)\n\n    def test_very_large_order(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n\n    def test_discount_applied_after_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 110.0, 1)\n        total_with_discount = calc.calculate_total(discount=20.0)\n        discounted_subtotal = calc.apply_discount(110.0, 20.0)\n        self.assertLess(discounted_subtotal, 100.0)\n        shipping = calc.calculate_shipping(discounted_subtotal)\n        self.assertEqual(shipping, 10.0)\n\n    def test_zero_everything(self):\n        calc = OrderCalculator(tax_rate=0.0, shipping_cost=0.0)\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_string_instead_of_float_for_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_string_instead_of_int_for_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, \"two\")\n\n    def test_none_values(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 1.0, 1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_same_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.0, -1)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.0, 1)\n\n    def test_add_item_with_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.0, 1)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99, 1)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_with_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"NonExistent\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_subtotal_with_no_items(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_subtotal_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_subtotal_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        self.assertEqual(calc.get_subtotal(), 9.0)\n\n    def test_subtotal_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 3)\n        calc.add_item(\"Banana\", 1.5, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_subtotal_with_fractional_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 19.99, 1)\n        calc.add_item(\"Item2\", 5.50, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 30.99, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_negative_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_fractional_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 15.5)\n        self.assertAlmostEqual(result, 84.5, places=2)\n\n    def test_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_with_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_with_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-10.0)\n\n    def test_tax_on_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_tax_on_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_tax_on_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-10.0)\n\n    def test_tax_calculation_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0, places=2)\n\n    def test_total_with_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertEqual(total, 10.0)\n\n    def test_total_with_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 30.0, 1)\n        calc.add_item(\"Banana\", 20.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_ten_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=10.0)\n        self.assertAlmostEqual(total, 110.7, places=2)\n\n    def test_total_with_free_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 184.5, places=2)\n\n    def test_total_with_free_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 123.0, places=2)\n\n    def test_total_below_free_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 71.5, places=2)\n\n    def test_total_with_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(discount=100.0)\n        self.assertEqual(total, 10.0)\n\n    def test_total_with_discount_exceeding_hundred_percent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=150.0)\n\n    def test_total_with_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_tax_calculation_base(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total()\n        expected_tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(expected_tax, 23.0, places=2)\n\n    def test_total_calculation_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0, 1)\n        subtotal = calc.get_subtotal()\n        discounted = calc.apply_discount(subtotal, 10.0)\n        shipping = calc.calculate_shipping(discounted)\n        tax = calc.calculate_tax(discounted)\n        expected_total = discounted + shipping + tax\n        actual_total = calc.calculate_total(discount=10.0)\n        self.assertAlmostEqual(actual_total, expected_total, places=2)\n\n    def test_item_count_with_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_item_count_with_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_item_count_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_item_count_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 2.0)\n\n    def test_list_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_after_modifications(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 0.5, 3)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_list_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        items = calc.list_items()\n        self.assertIsInstance(items, list)\n\n    def test_empty_order_initially(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_not_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_empty_after_adding_then_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_order_flow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 1)\n        calc.add_item(\"Banana\", 30.0, 2)\n        total = calc.calculate_total(discount=10.0)\n        self.assertGreater(total, 0)\n\n    def test_precision_and_rounding(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=2)\n\n    def test_very_large_order(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n\n    def test_discount_applied_after_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 110.0, 1)\n        total_with_discount = calc.calculate_total(discount=20.0)\n        discounted_subtotal = calc.apply_discount(110.0, 20.0)\n        self.assertLess(discounted_subtotal, 100.0)\n        shipping = calc.calculate_shipping(discounted_subtotal)\n        self.assertEqual(shipping, 10.0)\n\n    def test_zero_everything(self):\n        calc = OrderCalculator(tax_rate=0.0, shipping_cost=0.0)\n        total = calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_string_instead_of_float_for_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_string_instead_of_int_for_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.0, \"two\")\n\n    def test_none_values(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(None, 1.0, 1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 167.21205687522888,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}