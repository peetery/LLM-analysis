{
  "model": "claude-code-sonnet-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T03:55:40.535168",
  "response_time": 177.9450981616974,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-sonnet-4.5\\run_010\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class interface to understand its structure and prepare for test generation.\n\n## Analysis of OrderCalculator Class\n\n### Class Overview\nThe `OrderCalculator` appears to be a shopping cart/order management system with pricing calculations including tax, discounts, and shipping.\n\n### Key Components\n\n**1. TypedDict:**\n- `Item(TypedDict)` - likely stores item details (name, price, quantity)\n\n**2. Constructor Parameters:**\n- `tax_rate` (default: 0.23 = 23%)\n- `free_shipping_threshold` (default: 100.0)\n- `shipping_cost` (default: 10.0)\n\n**3. Item Management Methods:**\n- `add_item(name, price, quantity)` - adds items to order\n- `remove_item(name)` - removes items by name\n- `list_items()` - returns list of item names\n- `clear_order()` - empties the order\n- `is_empty()` - checks if order has no items\n- `total_items()` - counts total items (likely sum of quantities)\n\n**4. Calculation Methods:**\n- `get_subtotal()` - sum of all item prices Ă— quantities\n- `apply_discount(subtotal, discount)` - applies discount to subtotal\n- `calculate_shipping(discounted_subtotal)` - determines shipping cost based on threshold\n- `calculate_tax(amount)` - calculates tax on an amount\n- `calculate_total(discount)` - orchestrates full price calculation\n\n### Test Categories to Cover\n\n**1. Initialization:**\n- Default parameters\n- Custom parameters\n- Edge cases (zero/negative rates, thresholds)\n\n**2. Item Operations:**\n- Adding single/multiple items\n- Adding items with different quantities\n- Removing existing/non-existent items\n- Duplicate item names\n- Invalid inputs (negative prices, zero/negative quantities, empty names)\n\n**3. Calculation Logic:**\n- Subtotal with various item combinations\n- Discount application (0%, partial, 100%, over 100%)\n- Shipping (below threshold, at threshold, above threshold, zero subtotal)\n- Tax calculation (various amounts including zero)\n- Total calculation integrating all components\n\n**4. Edge Cases:**\n- Empty order operations\n- Floating-point precision\n- Very large numbers\n- Boundary values for shipping threshold\n\n**5. State Management:**\n- Order state after operations\n- Clearing order\n- Checking empty state\n\n### Key Test Considerations\n\n1. **Invalid Input Handling:** Need to determine expected behavior for:\n   - Negative prices/quantities\n   - Empty/None names\n   - Invalid discount values\n   - Type mismatches\n\n2. **Business Logic:** Test the calculation flow:\n   - Discount applies to subtotal\n   - Shipping based on discounted subtotal\n   - Tax calculation scope\n\n3. **Item Uniqueness:** Determine if item names are unique keys or if duplicates are allowed\n\n4. **Precision:** Floating-point calculations may need tolerance-based assertions\n\nI'm ready for the next step. The analysis identifies ~40-50 distinct test scenarios covering normal operations, edge cases, invalid inputs, and the interaction between different calculation components.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "I'll provide a comprehensive list of test scenarios for the `OrderCalculator` class.\n\n## Unit Test Scenarios for OrderCalculator\n\n### 1. Initialization Tests\n\n1. **test_init_default_values**\n   - Method: `__init__`\n   - Type: Normal use\n   - Intent: Verify calculator initializes with default tax_rate (0.23), free_shipping_threshold (100.0), and shipping_cost (10.0)\n\n2. **test_init_custom_values**\n   - Method: `__init__`\n   - Type: Normal use\n   - Intent: Verify calculator accepts and stores custom tax_rate, free_shipping_threshold, and shipping_cost\n\n3. **test_init_zero_tax_rate**\n   - Method: `__init__`\n   - Type: Edge case\n   - Intent: Verify calculator handles zero tax_rate correctly\n\n4. **test_init_zero_shipping_cost**\n   - Method: `__init__`\n   - Type: Edge case\n   - Intent: Verify calculator handles zero shipping_cost\n\n5. **test_init_zero_free_shipping_threshold**\n   - Method: `__init__`\n   - Type: Edge case\n   - Intent: Verify calculator handles zero free_shipping_threshold (always free shipping)\n\n6. **test_init_negative_tax_rate**\n   - Method: `__init__`\n   - Type: Invalid input\n   - Intent: Verify behavior with negative tax_rate (should raise exception or handle gracefully)\n\n7. **test_init_negative_shipping_cost**\n   - Method: `__init__`\n   - Type: Invalid input\n   - Intent: Verify behavior with negative shipping_cost\n\n8. **test_init_negative_free_shipping_threshold**\n   - Method: `__init__`\n   - Type: Invalid input\n   - Intent: Verify behavior with negative free_shipping_threshold\n\n### 2. add_item() Tests\n\n9. **test_add_item_single**\n   - Method: `add_item`\n   - Type: Normal use\n   - Intent: Verify single item is added correctly with default quantity (1)\n\n10. **test_add_item_with_quantity**\n    - Method: `add_item`\n    - Type: Normal use\n    - Intent: Verify item is added with specified quantity > 1\n\n11. **test_add_item_multiple_different**\n    - Method: `add_item`\n    - Type: Normal use\n    - Intent: Verify multiple different items can be added to order\n\n12. **test_add_item_duplicate_name**\n    - Method: `add_item`\n    - Type: Edge case\n    - Intent: Verify behavior when adding item with duplicate name (replace vs accumulate quantity)\n\n13. **test_add_item_zero_price**\n    - Method: `add_item`\n    - Type: Edge case\n    - Intent: Verify free items (price=0) can be added\n\n14. **test_add_item_negative_price**\n    - Method: `add_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for negative price\n\n15. **test_add_item_zero_quantity**\n    - Method: `add_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for quantity=0\n\n16. **test_add_item_negative_quantity**\n    - Method: `add_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for negative quantity\n\n17. **test_add_item_empty_name**\n    - Method: `add_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for empty string name\n\n18. **test_add_item_none_name**\n    - Method: `add_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for None as name\n\n19. **test_add_item_very_large_price**\n    - Method: `add_item`\n    - Type: Edge case\n    - Intent: Verify calculator handles very large prices correctly\n\n20. **test_add_item_very_large_quantity**\n    - Method: `add_item`\n    - Type: Edge case\n    - Intent: Verify calculator handles very large quantities correctly\n\n21. **test_add_item_float_price_precision**\n    - Method: `add_item`\n    - Type: Edge case\n    - Intent: Verify proper handling of floating-point price values (e.g., 19.99)\n\n### 3. remove_item() Tests\n\n22. **test_remove_item_existing**\n    - Method: `remove_item`\n    - Type: Normal use\n    - Intent: Verify existing item is removed successfully\n\n23. **test_remove_item_non_existent**\n    - Method: `remove_item`\n    - Type: Invalid input/Exception\n    - Intent: Verify exception is raised when removing non-existent item\n\n24. **test_remove_item_from_empty_order**\n    - Method: `remove_item`\n    - Type: Edge case\n    - Intent: Verify exception is raised when removing from empty order\n\n25. **test_remove_item_last_item**\n    - Method: `remove_item`\n    - Type: Edge case\n    - Intent: Verify order becomes empty after removing last item\n\n26. **test_remove_item_empty_name**\n    - Method: `remove_item`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for empty string name\n\n### 4. get_subtotal() Tests\n\n27. **test_get_subtotal_empty_order**\n    - Method: `get_subtotal`\n    - Type: Edge case\n    - Intent: Verify subtotal is 0.0 for empty order\n\n28. **test_get_subtotal_single_item**\n    - Method: `get_subtotal`\n    - Type: Normal use\n    - Intent: Verify subtotal equals price Ă— quantity for single item\n\n29. **test_get_subtotal_multiple_items**\n    - Method: `get_subtotal`\n    - Type: Normal use\n    - Intent: Verify subtotal is sum of all (price Ă— quantity) for multiple items\n\n30. **test_get_subtotal_with_quantities**\n    - Method: `get_subtotal`\n    - Type: Normal use\n    - Intent: Verify subtotal correctly multiplies price by quantity for each item\n\n31. **test_get_subtotal_precision**\n    - Method: `get_subtotal`\n    - Type: Edge case\n    - Intent: Verify floating-point precision in subtotal calculation\n\n### 5. apply_discount() Tests\n\n32. **test_apply_discount_zero**\n    - Method: `apply_discount`\n    - Type: Normal use\n    - Intent: Verify no discount (0.0) returns original subtotal\n\n33. **test_apply_discount_partial**\n    - Method: `apply_discount`\n    - Type: Normal use\n    - Intent: Verify partial discount (e.g., 10.0) is correctly subtracted\n\n34. **test_apply_discount_full**\n    - Method: `apply_discount`\n    - Type: Edge case\n    - Intent: Verify discount equal to subtotal results in 0.0\n\n35. **test_apply_discount_exceeds_subtotal**\n    - Method: `apply_discount`\n    - Type: Edge case/Invalid input\n    - Intent: Verify behavior when discount > subtotal (should not go negative)\n\n36. **test_apply_discount_negative**\n    - Method: `apply_discount`\n    - Type: Invalid input\n    - Intent: Verify exception is raised for negative discount\n\n37. **test_apply_discount_on_zero_subtotal**\n    - Method: `apply_discount`\n    - Type: Edge case\n    - Intent: Verify discount on zero subtotal returns 0.0\n\n### 6. calculate_shipping() Tests\n\n38. **test_calculate_shipping_below_threshold**\n    - Method: `calculate_shipping`\n    - Type: Normal use\n    - Intent: Verify shipping cost is charged when subtotal < free_shipping_threshold\n\n39. **test_calculate_shipping_at_threshold**\n    - Method: `calculate_shipping`\n    - Type: Edge case\n    - Intent: Verify free shipping when subtotal equals threshold\n\n40. **test_calculate_shipping_above_threshold**\n    - Method: `calculate_shipping`\n    - Type: Normal use\n    - Intent: Verify free shipping (0.0) when subtotal > free_shipping_threshold\n\n41. **test_calculate_shipping_zero_subtotal**\n    - Method: `calculate_shipping`\n    - Type: Edge case\n    - Intent: Verify shipping cost for zero subtotal\n\n42. **test_calculate_shipping_negative_subtotal**\n    - Method: `calculate_shipping`\n    - Type: Edge case\n    - Intent: Verify behavior with negative subtotal (should not happen in practice)\n\n### 7. calculate_tax() Tests\n\n43. **test_calculate_tax_positive_amount**\n    - Method: `calculate_tax`\n    - Type: Normal use\n    - Intent: Verify tax is calculated as amount Ă— tax_rate\n\n44. **test_calculate_tax_zero_amount**\n    - Method: `calculate_tax`\n    - Type: Edge case\n    - Intent: Verify tax is 0.0 for zero amount\n\n45. **test_calculate_tax_with_zero_tax_rate**\n    - Method: `calculate_tax`\n    - Type: Edge case\n    - Intent: Verify tax is 0.0 when tax_rate is 0\n\n46. **test_calculate_tax_precision**\n    - Method: `calculate_tax`\n    - Type: Edge case\n    - Intent: Verify floating-point precision in tax calculation\n\n47. **test_calculate_tax_negative_amount**\n    - Method: `calculate_tax`\n    - Type: Edge case\n    - Intent: Verify behavior with negative amount\n\n### 8. calculate_total() Tests\n\n48. **test_calculate_total_empty_order**\n    - Method: `calculate_total`\n    - Type: Edge case\n    - Intent: Verify total is 0.0 for empty order\n\n49. **test_calculate_total_no_discount**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify total = subtotal + shipping + tax when discount is 0\n\n50. **test_calculate_total_with_discount**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify total calculation with discount applied\n\n51. **test_calculate_total_free_shipping**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify total calculation when subtotal exceeds free shipping threshold\n\n52. **test_calculate_total_with_shipping**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify total calculation when subtotal is below free shipping threshold\n\n53. **test_calculate_total_integration**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify complete calculation flow: subtotal - discount, then shipping based on discounted subtotal, then tax on (subtotal - discount + shipping)\n\n54. **test_calculate_total_discount_affects_shipping**\n    - Method: `calculate_total`\n    - Type: Edge case\n    - Intent: Verify that discount can bring subtotal below free shipping threshold\n\n55. **test_calculate_total_precision**\n    - Method: `calculate_total`\n    - Type: Edge case\n    - Intent: Verify floating-point precision across all calculation steps\n\n56. **test_calculate_total_tax_calculation_base**\n    - Method: `calculate_total`\n    - Type: Normal use\n    - Intent: Verify what amount tax is calculated on (subtotal only, or subtotal + shipping, etc.)\n\n### 9. total_items() Tests\n\n57. **test_total_items_empty_order**\n    - Method: `total_items`\n    - Type: Edge case\n    - Intent: Verify total_items returns 0 for empty order\n\n58. **test_total_items_single_item_quantity_one**\n    - Method: `total_items`\n    - Type: Normal use\n    - Intent: Verify total_items returns 1 for single item with quantity 1\n\n59. **test_total_items_single_item_multiple_quantity**\n    - Method: `total_items`\n    - Type: Normal use\n    - Intent: Verify total_items returns the quantity value for single item with quantity > 1\n\n60. **test_total_items_multiple_items**\n    - Method: `total_items`\n    - Type: Normal use\n    - Intent: Verify total_items returns sum of all quantities across all items\n\n### 10. clear_order() Tests\n\n61. **test_clear_order_with_items**\n    - Method: `clear_order`\n    - Type: Normal use\n    - Intent: Verify all items are removed and order becomes empty\n\n62. **test_clear_order_already_empty**\n    - Method: `clear_order`\n    - Type: Edge case\n    - Intent: Verify clearing already empty order doesn't cause error\n\n63. **test_clear_order_resets_calculations**\n    - Method: `clear_order`\n    - Type: Normal use\n    - Intent: Verify subtotal, total_items, etc. return zero after clearing\n\n### 11. list_items() Tests\n\n64. **test_list_items_empty_order**\n    - Method: `list_items`\n    - Type: Edge case\n    - Intent: Verify empty list is returned for empty order\n\n65. **test_list_items_single_item**\n    - Method: `list_items`\n    - Type: Normal use\n    - Intent: Verify list contains single item name\n\n66. **test_list_items_multiple_items**\n    - Method: `list_items`\n    - Type: Normal use\n    - Intent: Verify list contains all item names\n\n67. **test_list_items_order_preservation**\n    - Method: `list_items`\n    - Type: Edge case\n    - Intent: Verify whether order of items is preserved (insertion order)\n\n68. **test_list_items_after_removal**\n    - Method: `list_items`\n    - Type: Normal use\n    - Intent: Verify removed items are not in list\n\n### 12. is_empty() Tests\n\n69. **test_is_empty_initially**\n    - Method: `is_empty`\n    - Type: Normal use\n    - Intent: Verify new order is empty\n\n70. **test_is_empty_after_adding_item**\n    - Method: `is_empty`\n    - Type: Normal use\n    - Intent: Verify order is not empty after adding item\n\n71. **test_is_empty_after_removing_all_items**\n    - Method: `is_empty`\n    - Type: Normal use\n    - Intent: Verify order is empty after removing all items\n\n72. **test_is_empty_after_clear**\n    - Method: `is_empty`\n    - Type: Normal use\n    - Intent: Verify order is empty after calling clear_order()\n\n### 13. Integration/Workflow Tests\n\n73. **test_workflow_add_calculate_remove**\n    - Method: Multiple\n    - Type: Integration\n    - Intent: Verify typical workflow: add items, calculate total, remove item, recalculate\n\n74. **test_workflow_discount_scenario**\n    - Method: Multiple\n    - Type: Integration\n    - Intent: Verify realistic scenario with multiple items and discount applied\n\n75. **test_workflow_shipping_threshold_boundary**\n    - Method: Multiple\n    - Type: Integration\n    - Intent: Verify behavior when items are added/removed around shipping threshold\n\n76. **test_workflow_clear_and_reuse**\n    - Method: Multiple\n    - Type: Integration\n    - Intent: Verify calculator can be cleared and reused for new order\n\n---\n\n## Summary\n\n**Total Scenarios: 76**\n\n- Initialization: 8 scenarios\n- add_item: 13 scenarios\n- remove_item: 5 scenarios\n- get_subtotal: 5 scenarios\n- apply_discount: 6 scenarios\n- calculate_shipping: 5 scenarios\n- calculate_tax: 5 scenarios\n- calculate_total: 9 scenarios\n- total_items: 4 scenarios\n- clear_order: 3 scenarios\n- list_items: 5 scenarios\n- is_empty: 4 scenarios\n- Integration: 4 scenarios\n\nThese scenarios cover:\n- âś… Normal use cases\n- âś… Edge cases (zeros, boundaries, empty states)\n- âś… Invalid inputs (negative values, None, empty strings)\n- âś… Exception handling\n- âś… Floating-point precision\n- âś… Integration workflows\n- âś… State management",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, -2)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(None, 10.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 100000)\n        self.assertEqual(calc.total_items(), 100000)\n\n    def test_add_item_float_price_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.5)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 2)\n        calc.add_item(\"Banana\", 3.0, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.0)\n\n    def test_get_subtotal_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 4)\n        calc.add_item(\"Banana\", 2.5, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 11.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.7, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_partial(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0)\n\n    def test_apply_discount_full(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(-10.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(tax, 22.9977, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(tax, -23.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 0.0)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        total = calc.calculate_total(20.0)\n        discounted = 80.0\n        shipping = 10.0\n        tax = 90.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_integration(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 40.0, 2)\n        calc.add_item(\"Item2\", 30.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 110.0\n        discounted = 100.0\n        shipping = 0.0\n        tax = 100.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 105.0)\n        total = calc.calculate_total(10.0)\n        discounted = 95.0\n        shipping = 10.0\n        tax = 105.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        total = calc.calculate_total(5.50)\n        subtotal = 59.97\n        discounted = 54.47\n        shipping = 10.0\n        tax = 64.47 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_tax_calculation_base(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        subtotal = 50.0\n        shipping = 10.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 3)\n        calc.add_item(\"Banana\", 2.0, 2)\n        calc.add_item(\"Orange\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_resets_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertAlmostEqual(calc.calculate_total(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Orange\", 1.5)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Orange\", 1.5)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_initially(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_workflow_add_calculate_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        calc.add_item(\"Banana\", 30.0)\n        total1 = calc.calculate_total(0.0)\n        self.assertGreater(total1, 0.0)\n        calc.remove_item(\"Banana\")\n        total2 = calc.calculate_total(0.0)\n        self.assertLess(total2, total1)\n\n    def test_workflow_discount_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 800.0)\n        calc.add_item(\"Mouse\", 20.0)\n        calc.add_item(\"Keyboard\", 50.0)\n        total_no_discount = calc.calculate_total(0.0)\n        total_with_discount = calc.calculate_total(100.0)\n        self.assertLess(total_with_discount, total_no_discount)\n\n    def test_workflow_shipping_threshold_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 60.0)\n        calc.add_item(\"Item2\", 40.0)\n        total1 = calc.calculate_total(0.0)\n        calc.remove_item(\"Item2\")\n        total2 = calc.calculate_total(0.0)\n        self.assertNotEqual(total1, total2)\n\n    def test_workflow_clear_and_reuse(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.calculate_total(0.0)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 20.0)\n        total = calc.calculate_total(0.0)\n        self.assertGreater(total, 0.0)\n        self.assertEqual(calc.total_items(), 1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Apple\", 1.5, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Item\", 0.0)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, -2)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(None, 10.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99)\n        self.assertAlmostEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 100000)\n        self.assertEqual(calc.total_items(), 100000)\n\n    def test_add_item_float_price_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.5, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.5)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.0, 2)\n        calc.add_item(\"Banana\", 3.0, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.0)\n\n    def test_get_subtotal_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.5, 4)\n        calc.add_item(\"Banana\", 2.5, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 11.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.7, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0)\n\n    def test_apply_discount_partial(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0)\n\n    def test_apply_discount_full(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(shipping, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        shipping = calc.calculate_shipping(-10.0)\n        self.assertAlmostEqual(shipping, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        tax = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(tax, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(tax, 22.9977, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        tax = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(tax, -23.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertAlmostEqual(total, 0.0)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        total = calc.calculate_total(20.0)\n        discounted = 80.0\n        shipping = 10.0\n        tax = 90.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_integration(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 40.0, 2)\n        calc.add_item(\"Item2\", 30.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 110.0\n        discounted = 100.0\n        shipping = 0.0\n        tax = 100.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_affects_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 105.0)\n        total = calc.calculate_total(10.0)\n        discounted = 95.0\n        shipping = 10.0\n        tax = 105.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 19.99, 3)\n        total = calc.calculate_total(5.50)\n        subtotal = 59.97\n        discounted = 54.47\n        shipping = 10.0\n        tax = 64.47 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_tax_calculation_base(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(0.0)\n        subtotal = 50.0\n        shipping = 10.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 3)\n        calc.add_item(\"Banana\", 2.0, 2)\n        calc.add_item(\"Orange\", 1.5, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_resets_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertAlmostEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertAlmostEqual(calc.calculate_total(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Orange\", 1.5)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.add_item(\"Orange\", 1.5)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_initially(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.add_item(\"Banana\", 2.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_workflow_add_calculate_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        calc.add_item(\"Banana\", 30.0)\n        total1 = calc.calculate_total(0.0)\n        self.assertGreater(total1, 0.0)\n        calc.remove_item(\"Banana\")\n        total2 = calc.calculate_total(0.0)\n        self.assertLess(total2, total1)\n\n    def test_workflow_discount_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 800.0)\n        calc.add_item(\"Mouse\", 20.0)\n        calc.add_item(\"Keyboard\", 50.0)\n        total_no_discount = calc.calculate_total(0.0)\n        total_with_discount = calc.calculate_total(100.0)\n        self.assertLess(total_with_discount, total_no_discount)\n\n    def test_workflow_shipping_threshold_boundary(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 60.0)\n        calc.add_item(\"Item2\", 40.0)\n        total1 = calc.calculate_total(0.0)\n        calc.remove_item(\"Item2\")\n        total2 = calc.calculate_total(0.0)\n        self.assertNotEqual(total1, total2)\n\n    def test_workflow_clear_and_reuse(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0)\n        calc.calculate_total(0.0)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 20.0)\n        total = calc.calculate_total(0.0)\n        self.assertGreater(total, 0.0)\n        self.assertEqual(calc.total_items(), 1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 177.9450981616974,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}