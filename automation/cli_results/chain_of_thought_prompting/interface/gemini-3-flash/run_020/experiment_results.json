{
  "model": "gemini-3-flash",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-29T22:51:28.341769",
  "response_time": 93.84187626838684,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\gemini-3-flash\\run_020\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I have analyzed the `OrderCalculator` class and identified the following areas for testing:\n\n### 1. Initialization (`__init__`)\n*   **Typical Usage**: Verify that default parameters are set correctly.\n*   **Custom Parameters**: Verify that custom `tax_rate`, `free_shipping_threshold`, and `shipping_cost` are correctly assigned.\n*   **Invalid Inputs**:\n    *   `TypeError` when parameters are not numbers.\n    *   `ValueError` when `tax_rate` is outside the [0.0, 1.0] range.\n    *   `ValueError` when `free_shipping_threshold` or `shipping_cost` are negative.\n\n### 2. Item Management (`add_item`, `remove_item`, `clear_order`, `list_items`, `is_empty`)\n*   **Adding Items**: \n    *   Test adding a single item.\n    *   Test adding multiple items.\n    *   Test increasing the quantity of an existing item with the same name and price.\n    *   `ValueError` for empty names, non-positive prices, or quantities less than 1.\n    *   `ValueError` when adding an item with an existing name but a different price.\n*   **Removing Items**:\n    *   Verify successful removal of an existing item.\n    *   `ValueError` when attempting to remove a non-existent item.\n*   **Order State**:\n    *   Verify `is_empty()` correctly reflects the presence of items.\n    *   Verify `clear_order()` empties the items list.\n    *   Verify `list_items()` returns the correct set of unique item names.\n\n### 3. Financial Calculations (`get_subtotal`, `apply_discount`, `calculate_shipping`, `calculate_tax`, `calculate_total`, `total_items`)\n*   **Subtotal**:\n    *   Verify accurate sum of `price * quantity`.\n    *   `ValueError` if the order is empty.\n*   **Discounts**:\n    *   Verify discount application (0%, 20%, 100%).\n    *   `ValueError` for invalid discount rates or negative subtotals.\n*   **Shipping**:\n    *   Verify shipping cost is applied when below the threshold.\n    *   Verify shipping is free when at or above the threshold.\n*   **Tax**:\n    *   Verify tax calculation based on the configured rate.\n    *   `ValueError` for negative amounts.\n*   **Grand Total**:\n    *   Verify the full calculation pipeline: `((subtotal * (1 - discount)) + shipping) * (1 + tax_rate)`.\n    *   Note: The implementation calculates tax on the `discounted_subtotal + shipping`.\n*   **Item Count**:\n    *   Verify `total_items()` returns the sum of all item quantities.\n\nI will now proceed to generate the `unittest` implementation based on these cases.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "Here is a list of unit test scenarios for the `OrderCalculator` class:\n\n### 1. Initialization (`__init__`)\n- **Normal**: Initialize with default parameters and verify `tax_rate`, `free_shipping_threshold`, and `shipping_cost` are set correctly.\n- **Normal**: Initialize with custom valid parameters and verify they are correctly stored.\n- **Exception**: Initialize with a `tax_rate` less than 0 or greater than 1 (expect `ValueError`).\n- **Exception**: Initialize with a negative `free_shipping_threshold` (expect `ValueError`).\n- **Exception**: Initialize with a negative `shipping_cost` (expect `ValueError`).\n- **Exception**: Initialize with non-numeric values for parameters (expect `TypeError`).\n\n### 2. Item Management (`add_item`)\n- **Normal**: Add a single item with a specific name, price, and default quantity (1).\n- **Normal**: Add multiple different items and verify the internal state reflects all of them.\n- **Normal**: Add an item that already exists with the same price (verify the quantity is incremented).\n- **Exception**: Add an item with an empty string as a name (expect `ValueError`).\n- **Exception**: Add an item with a price equal to or less than 0 (expect `ValueError`).\n- **Exception**: Add an item with a quantity less than 1 (expect `ValueError`).\n- **Exception**: Add an item with an existing name but a different price (expect `ValueError`).\n\n### 3. Item Removal (`remove_item`)\n- **Normal**: Remove an existing item by name and verify it is no longer in the order.\n- **Exception**: Attempt to remove an item that does not exist in the order (expect `ValueError`).\n\n### 4. Subtotal Calculation (`get_subtotal`)\n- **Normal**: Calculate the subtotal for multiple items with various quantities and verify the sum is correct (`price * quantity`).\n- **Normal**: Verify subtotal updates correctly after removing an item.\n- **Exception**: Call `get_subtotal` on an empty order (expect `ValueError`).\n\n### 5. Discount Application (`apply_discount`)\n- **Normal**: Apply a 0% discount (0.0) and verify the subtotal remains unchanged.\n- **Normal**: Apply a partial discount (e.g., 20% or 0.2) and verify the calculation.\n- **Normal**: Apply a 100% discount (1.0) and verify the result is 0.0.\n- **Exception**: Apply a negative discount (expect `ValueError`).\n- **Exception**: Apply a discount greater than 1.0 (expect `ValueError`).\n- **Exception**: Apply a discount to a negative subtotal amount (expect `ValueError`).\n\n### 6. Shipping Calculation (`calculate_shipping`)\n- **Normal**: Subtotal is strictly below the `free_shipping_threshold` (verify `shipping_cost` is returned).\n- **Normal**: Subtotal is exactly equal to the `free_shipping_threshold` (verify 0.0 is returned).\n- **Normal**: Subtotal is strictly above the `free_shipping_threshold` (verify 0.0 is returned).\n- **Exception**: Provide a negative subtotal (expect `ValueError`).\n\n### 7. Tax Calculation (`calculate_tax`)\n- **Normal**: Calculate tax for a positive amount using the default tax rate.\n- **Normal**: Calculate tax using a 0% tax rate.\n- **Exception**: Calculate tax on a negative amount (expect `ValueError`).\n\n### 8. Total Calculation (`calculate_total`)\n- **Normal**: Calculate the grand total for a standard order (subtotal + shipping + tax) with no discount.\n- **Normal**: Calculate the grand total including a discount and verify the order of operations (discount applied before tax/shipping).\n- **Normal**: Calculate the grand total where the discounted subtotal qualifies for free shipping.\n- **Exception**: Call `calculate_total` on an empty order (expect `ValueError`).\n\n### 9. Order Metadata and State (`total_items`, `is_empty`, `list_items`, `clear_order`)\n- **Normal (`total_items`)**: Verify it returns the sum of all item quantities, not just the number of unique items.\n- **Normal (`is_empty`)**: Verify it returns `True` for a new instance and `False` after adding an item.\n- **Normal (`is_empty`)**: Verify it returns `True` after removing the last item or clearing the order.\n- **Normal (`list_items`)**: Verify it returns a list containing all unique item names added.\n- **Normal (`list_items`)**: Verify it returns an empty list for an empty order.\n- **Normal (`clear_order`)**: Verify that after execution, `is_empty()` is `True` and `total_items()` is 0.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\nclass TestOrderCalculator(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_init_default_params(self):\n        self.assertEqual(self.calc.tax_rate, 0.23)\n        self.assertEqual(self.calc.free_shipping_threshold, 100.0)\n        self.assertEqual(self.calc.shipping_cost, 10.0)\n\n    def test_init_custom_params(self):\n        custom_calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=200.0, shipping_cost=5.0)\n        self.assertEqual(custom_calc.tax_rate, 0.1)\n        self.assertEqual(custom_calc.free_shipping_threshold, 200.0)\n        self.assertEqual(custom_calc.shipping_cost, 5.0)\n\n    def test_init_invalid_tax_rate_low(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_invalid_tax_rate_high(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=1.1)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-1.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_non_numeric_params(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"0.23\")\n\n    def test_add_item_single(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_multiple(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.assertEqual(self.calc.total_items(), 15)\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_add_item_existing_increment(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(self.calc.total_items(), 8)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 10.0, 1)\n\n    def test_add_item_invalid_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 0.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", -5.0, 1)\n\n    def test_add_item_invalid_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_mismatched_price(self):\n        self.calc.add_item(\"Apple\", 2.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Apple\", 3.0, 1)\n\n    def test_remove_item_success(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Orange\")\n\n    def test_get_subtotal_calculation(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.assertEqual(self.calc.get_subtotal(), 20.0)\n\n    def test_get_subtotal_after_removal(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.get_subtotal()\n\n    def test_apply_discount_zero(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_partial(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 0.2), 80.0)\n\n    def test_apply_discount_full(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 1.0), 0.0)\n\n    def test_apply_discount_negative(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_too_high(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 1.1)\n\n    def test_apply_discount_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-50.0, 0.1)\n\n    def test_calculate_shipping_below_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(99.9), 15.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-10.0)\n\n    def test_calculate_tax_positive(self):\n        self.calc.tax_rate = 0.2\n        self.assertAlmostEqual(self.calc.calculate_tax(100.0), 20.0)\n\n    def test_calculate_tax_zero_rate(self):\n        self.calc.tax_rate = 0.0\n        self.assertEqual(self.calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n    def test_calculate_total_no_discount(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        self.calc.tax_rate = 0.2\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 10.0\n        expected = (50.0 + 10.0) * 1.2\n        self.assertAlmostEqual(self.calc.calculate_total(0.0), expected)\n\n    def test_calculate_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        self.calc.tax_rate = 0.1\n        self.calc.free_shipping_threshold = 150.0\n        self.calc.shipping_cost = 10.0\n        discounted_subtotal = 100.0 * 0.8\n        expected = (discounted_subtotal + 10.0) * 1.1\n        self.assertAlmostEqual(self.calc.calculate_total(0.2), expected)\n\n    def test_calculate_total_qualify_free_shipping(self):\n        self.calc.add_item(\"Item\", 200.0, 1)\n        self.calc.tax_rate = 0.1\n        self.calc.free_shipping_threshold = 150.0\n        self.calc.shipping_cost = 10.0\n        expected = 200.0 * 1.1\n        self.assertAlmostEqual(self.calc.calculate_total(0.0), expected)\n\n    def test_calculate_total_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total()\n\n    def test_total_items_count(self):\n        self.calc.add_item(\"A\", 1.0, 2)\n        self.calc.add_item(\"B\", 1.0, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_is_empty_new_instance(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"A\", 1.0, 1)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_removal(self):\n        self.calc.add_item(\"A\", 1.0, 1)\n        self.calc.remove_item(\"A\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_list_items_content(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Banana\", 1.0, 1)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty(self):\n        self.assertEqual(self.calc.list_items(), [])\n\n    def test_clear_order_resets_state(self):\n        self.calc.add_item(\"A\", 1.0, 5)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.total_items(), 0)\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\nclass TestOrderCalculator(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_init_default_params(self):\n        self.assertEqual(self.calc.tax_rate, 0.23)\n        self.assertEqual(self.calc.free_shipping_threshold, 100.0)\n        self.assertEqual(self.calc.shipping_cost, 10.0)\n\n    def test_init_custom_params(self):\n        custom_calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=200.0, shipping_cost=5.0)\n        self.assertEqual(custom_calc.tax_rate, 0.1)\n        self.assertEqual(custom_calc.free_shipping_threshold, 200.0)\n        self.assertEqual(custom_calc.shipping_cost, 5.0)\n\n    def test_init_invalid_tax_rate_low(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_invalid_tax_rate_high(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=1.1)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-1.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_non_numeric_params(self):\n        with self.assertRaises(TypeError):\n            OrderCalculator(tax_rate=\"0.23\")\n\n    def test_add_item_single(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_multiple(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.assertEqual(self.calc.total_items(), 15)\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_add_item_existing_increment(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Apple\", 2.0, 3)\n        self.assertEqual(self.calc.total_items(), 8)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 10.0, 1)\n\n    def test_add_item_invalid_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 0.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", -5.0, 1)\n\n    def test_add_item_invalid_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_mismatched_price(self):\n        self.calc.add_item(\"Apple\", 2.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Apple\", 3.0, 1)\n\n    def test_remove_item_success(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Orange\")\n\n    def test_get_subtotal_calculation(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.assertEqual(self.calc.get_subtotal(), 20.0)\n\n    def test_get_subtotal_after_removal(self):\n        self.calc.add_item(\"Apple\", 2.0, 5)\n        self.calc.add_item(\"Banana\", 1.0, 10)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.get_subtotal()\n\n    def test_apply_discount_zero(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_partial(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 0.2), 80.0)\n\n    def test_apply_discount_full(self):\n        self.assertEqual(self.calc.apply_discount(100.0, 1.0), 0.0)\n\n    def test_apply_discount_negative(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_too_high(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 1.1)\n\n    def test_apply_discount_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-50.0, 0.1)\n\n    def test_calculate_shipping_below_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(99.9), 15.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 15.0\n        self.assertEqual(self.calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-10.0)\n\n    def test_calculate_tax_positive(self):\n        self.calc.tax_rate = 0.2\n        self.assertAlmostEqual(self.calc.calculate_tax(100.0), 20.0)\n\n    def test_calculate_tax_zero_rate(self):\n        self.calc.tax_rate = 0.0\n        self.assertEqual(self.calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n    def test_calculate_total_no_discount(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        self.calc.tax_rate = 0.2\n        self.calc.free_shipping_threshold = 100.0\n        self.calc.shipping_cost = 10.0\n        expected = (50.0 + 10.0) * 1.2\n        self.assertAlmostEqual(self.calc.calculate_total(0.0), expected)\n\n    def test_calculate_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        self.calc.tax_rate = 0.1\n        self.calc.free_shipping_threshold = 150.0\n        self.calc.shipping_cost = 10.0\n        discounted_subtotal = 100.0 * 0.8\n        expected = (discounted_subtotal + 10.0) * 1.1\n        self.assertAlmostEqual(self.calc.calculate_total(0.2), expected)\n\n    def test_calculate_total_qualify_free_shipping(self):\n        self.calc.add_item(\"Item\", 200.0, 1)\n        self.calc.tax_rate = 0.1\n        self.calc.free_shipping_threshold = 150.0\n        self.calc.shipping_cost = 10.0\n        expected = 200.0 * 1.1\n        self.assertAlmostEqual(self.calc.calculate_total(0.0), expected)\n\n    def test_calculate_total_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total()\n\n    def test_total_items_count(self):\n        self.calc.add_item(\"A\", 1.0, 2)\n        self.calc.add_item(\"B\", 1.0, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_is_empty_new_instance(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"A\", 1.0, 1)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_removal(self):\n        self.calc.add_item(\"A\", 1.0, 1)\n        self.calc.remove_item(\"A\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_list_items_content(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Banana\", 1.0, 1)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty(self):\n        self.assertEqual(self.calc.list_items(), [])\n\n    def test_clear_order_resets_state(self):\n        self.calc.add_item(\"A\", 1.0, 5)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.total_items(), 0)\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 93.84187626838684,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}