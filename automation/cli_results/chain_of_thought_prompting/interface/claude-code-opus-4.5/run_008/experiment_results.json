{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T09:25:20.790884",
  "response_time": 211.0573422908783,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_008\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class interface to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Class Overview\n`OrderCalculator` is an order/shopping cart management class that handles items, pricing, discounts, shipping, and tax calculations.\n\n### Constructor Parameters\n- `tax_rate` (default 0.23) - 23% tax rate\n- `free_shipping_threshold` (default 100.0) - orders above this get free shipping\n- `shipping_cost` (default 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds items to order\n   - Typical: add single item, add with quantity\n   - Edge cases: quantity=0, negative quantity, negative price, empty name\n   - Duplicate items behavior\n\n2. **`remove_item(name)`** - Removes item by name\n   - Typical: remove existing item\n   - Edge cases: remove non-existent item, remove from empty order\n\n3. **`get_subtotal()`** - Returns sum of item prices Ă— quantities\n   - Typical: single item, multiple items\n   - Edge cases: empty order, items with various quantities\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Typical: percentage discount, fixed discount\n   - Edge cases: discount > subtotal, zero discount, negative discount\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determines shipping cost\n   - Typical: below threshold (pays shipping), above threshold (free)\n   - Edge cases: exactly at threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Typical: positive amount\n   - Edge cases: zero amount, negative amount\n\n7. **`calculate_total(discount=0.0)`** - Full calculation (subtotal - discount + shipping + tax)\n   - Typical: with/without discount\n   - Edge cases: empty order, discount exceeding subtotal, free shipping threshold\n\n8. **`total_items()`** - Returns total item count\n   - Typical: single item, multiple items with quantities\n   - Edge cases: empty order\n\n9. **`clear_order()`** - Removes all items\n   - Typical: clear non-empty order\n   - Edge cases: clear already empty order\n\n10. **`list_items()`** - Returns list of item names\n    - Typical: multiple items\n    - Edge cases: empty order, duplicate names\n\n11. **`is_empty()`** - Returns boolean for empty state\n    - Typical: empty order, non-empty order\n    - After clear_order, after remove_item\n\n### Key Test Categories\n\n1. **Initialization tests** - default values, custom values, invalid constructor args\n2. **Item management tests** - add, remove, clear, list operations\n3. **Calculation tests** - subtotal, discount, shipping, tax, total\n4. **State query tests** - is_empty, total_items\n5. **Integration tests** - full workflow scenarios\n6. **Boundary tests** - threshold values, zero values\n7. **Error handling tests** - invalid inputs, exception behavior\n\n### Type Considerations\n- `Item` is a `TypedDict` - should verify structure expectations\n- `price` is float - test decimal precision\n- `quantity` is int - test integer enforcement\n- Returns `List[str]` for list_items\n\nI'm now ready to generate the unit tests based on this analysis.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **`__init__` - normal use - default values**: Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0 are applied\n2. **`__init__` - normal use - custom values**: Verify custom constructor parameters are stored correctly\n3. **`__init__` - edge case - zero tax rate**: Verify tax_rate=0 works correctly\n4. **`__init__` - edge case - zero shipping threshold**: Verify free_shipping_threshold=0 grants free shipping always\n5. **`__init__` - edge case - zero shipping cost**: Verify shipping_cost=0 works correctly\n6. **`__init__` - invalid input - negative tax rate**: Test behavior with negative tax_rate\n7. **`__init__` - invalid input - negative shipping threshold**: Test behavior with negative threshold\n8. **`__init__` - invalid input - negative shipping cost**: Test behavior with negative shipping_cost\n\n### `add_item`\n\n9. **`add_item` - normal use - single item default quantity**: Add one item with quantity=1\n10. **`add_item` - normal use - single item explicit quantity**: Add item with specific quantity\n11. **`add_item` - normal use - multiple different items**: Add several distinct items\n12. **`add_item` - edge case - duplicate item name**: Add same item name twice, check behavior\n13. **`add_item` - edge case - quantity zero**: Add item with quantity=0\n14. **`add_item` - edge case - large quantity**: Add item with very large quantity\n15. **`add_item` - edge case - price zero**: Add item with price=0.0\n16. **`add_item` - edge case - fractional price**: Add item with decimal price (e.g., 19.99)\n17. **`add_item` - invalid input - negative price**: Test behavior with negative price\n18. **`add_item` - invalid input - negative quantity**: Test behavior with negative quantity\n19. **`add_item` - invalid input - empty name**: Add item with empty string name\n20. **`add_item` - invalid input - None name**: Test behavior with None as name\n21. **`add_item` - invalid input - non-string name**: Test behavior with non-string name type\n22. **`add_item` - invalid input - non-numeric price**: Test behavior with string as price\n23. **`add_item` - invalid input - non-integer quantity**: Test behavior with float as quantity\n\n### `remove_item`\n\n24. **`remove_item` - normal use - existing item**: Remove item that exists in order\n25. **`remove_item` - normal use - after multiple adds**: Remove one of several items\n26. **`remove_item` - edge case - non-existent item**: Remove item not in order\n27. **`remove_item` - edge case - empty order**: Remove from empty order\n28. **`remove_item` - edge case - remove then re-add**: Remove item then add it again\n29. **`remove_item` - edge case - case sensitivity**: Test if \"Item\" and \"item\" are treated differently\n30. **`remove_item` - invalid input - empty string name**: Remove with empty string\n31. **`remove_item` - invalid input - None name**: Remove with None as name\n\n### `get_subtotal`\n\n32. **`get_subtotal` - normal use - single item**: Subtotal of one item\n33. **`get_subtotal` - normal use - multiple items**: Subtotal of several items\n34. **`get_subtotal` - normal use - items with quantities**: Subtotal respects quantity multipliers\n35. **`get_subtotal` - edge case - empty order**: Subtotal of empty order should be 0\n36. **`get_subtotal` - edge case - after removal**: Subtotal updates after item removal\n37. **`get_subtotal` - edge case - floating point precision**: Verify correct handling of decimal prices\n\n### `apply_discount`\n\n38. **`apply_discount` - normal use - small discount**: Apply discount less than subtotal\n39. **`apply_discount` - normal use - percentage-like discount**: Apply typical percentage-based amount\n40. **`apply_discount` - edge case - zero discount**: Apply discount=0\n41. **`apply_discount` - edge case - discount equals subtotal**: Discount exactly matches subtotal\n42. **`apply_discount` - edge case - discount exceeds subtotal**: Discount larger than subtotal\n43. **`apply_discount` - invalid input - negative discount**: Test behavior with negative discount\n44. **`apply_discount` - invalid input - negative subtotal**: Test behavior with negative subtotal parameter\n\n### `calculate_shipping`\n\n45. **`calculate_shipping` - normal use - below threshold**: Shipping charged when below threshold\n46. **`calculate_shipping` - normal use - above threshold**: Free shipping when above threshold\n47. **`calculate_shipping` - edge case - exactly at threshold**: Test behavior at exact threshold value\n48. **`calculate_shipping` - edge case - zero subtotal**: Shipping for zero discounted subtotal\n49. **`calculate_shipping` - edge case - just below threshold**: Test at threshold - 0.01\n50. **`calculate_shipping` - edge case - just above threshold**: Test at threshold + 0.01\n51. **`calculate_shipping` - invalid input - negative subtotal**: Test with negative discounted subtotal\n\n### `calculate_tax`\n\n52. **`calculate_tax` - normal use - positive amount**: Calculate tax on positive amount\n53. **`calculate_tax` - normal use - various amounts**: Verify tax calculation accuracy\n54. **`calculate_tax` - edge case - zero amount**: Tax on zero amount\n55. **`calculate_tax` - edge case - small amount**: Tax on very small amount (precision)\n56. **`calculate_tax` - edge case - large amount**: Tax on very large amount\n57. **`calculate_tax` - invalid input - negative amount**: Test with negative amount\n\n### `calculate_total`\n\n58. **`calculate_total` - normal use - no discount**: Total without discount applied\n59. **`calculate_total` - normal use - with discount**: Total with discount applied\n60. **`calculate_total` - normal use - free shipping achieved**: Total when above shipping threshold\n61. **`calculate_total` - normal use - shipping charged**: Total when below shipping threshold\n62. **`calculate_total` - edge case - empty order**: Total of empty order\n63. **`calculate_total` - edge case - discount equals subtotal**: Total when discount wipes out subtotal\n64. **`calculate_total` - edge case - discount exceeds subtotal**: Total when discount > subtotal\n65. **`calculate_total` - edge case - at shipping threshold**: Total when exactly at threshold\n66. **`calculate_total` - integration - full calculation verification**: Verify subtotal - discount + shipping + tax formula\n67. **`calculate_total` - invalid input - negative discount**: Test with negative discount parameter\n\n### `total_items`\n\n68. **`total_items` - normal use - single item**: Count with one item\n69. **`total_items` - normal use - multiple items**: Count with several items\n70. **`total_items` - normal use - items with quantities**: Total respects quantity values\n71. **`total_items` - edge case - empty order**: Count of empty order is 0\n72. **`total_items` - edge case - after removal**: Count updates after removal\n73. **`total_items` - edge case - after clear**: Count is 0 after clear\n\n### `clear_order`\n\n74. **`clear_order` - normal use - non-empty order**: Clear order with items\n75. **`clear_order` - edge case - empty order**: Clear already empty order\n76. **`clear_order` - edge case - verify state after clear**: Check is_empty, total_items, get_subtotal after clear\n\n### `list_items`\n\n77. **`list_items` - normal use - single item**: List with one item\n78. **`list_items` - normal use - multiple items**: List with several items\n79. **`list_items` - edge case - empty order**: List of empty order is empty list\n80. **`list_items` - edge case - after removal**: List updates after removal\n81. **`list_items` - edge case - duplicate names handling**: Check list behavior with duplicate item names\n\n### `is_empty`\n\n82. **`is_empty` - normal use - empty order**: Returns True for new/empty order\n83. **`is_empty` - normal use - non-empty order**: Returns False when items present\n84. **`is_empty` - edge case - after adding then removing all**: Returns True after removing all items\n85. **`is_empty` - edge case - after clear**: Returns True after clear_order\n\n### Integration/Workflow Scenarios\n\n86. **Integration - full order workflow**: Add items, apply discount, calculate total, clear\n87. **Integration - add remove add sequence**: Add item, remove it, add different item\n88. **Integration - custom constructor with calculations**: Non-default tax/shipping with full calculation\n89. **Integration - threshold boundary behavior**: Order fluctuating around shipping threshold\n90. **Integration - multiple operations consistency**: Verify state consistency across operations",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n        calc.add_item(\"item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        calc.add_item(\"item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        calc.add_item(\"item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.1)\n        self.assertEqual(calc.calculate_tax(100.0), -10.0)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-10.0)\n        calc.add_item(\"item\", 5.0)\n        self.assertEqual(calc.calculate_shipping(5.0), 0.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-5.0)\n        self.assertEqual(calc.shipping_cost, -5.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 2)\n        calc.add_item(\"apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"free_item\", 0.0, 5)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_fractional_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", -5.0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(None, 5.0)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(123, 5.0)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"item\", \"five\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"item\", 5.0, 2.5)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_after_multiple_adds(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        calc.remove_item(\"banana\")\n        items = calc.list_items()\n        self.assertNotIn(\"banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"banana\")\n\n    def test_remove_item_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"apple\", 2.00)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises((ValueError, TypeError)):\n            calc.remove_item(None)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        calc.add_item(\"banana\", 5.0)\n        calc.add_item(\"orange\", 3.0)\n        self.assertEqual(calc.get_subtotal(), 18.0)\n\n    def test_get_subtotal_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0, 3)\n        calc.add_item(\"banana\", 5.0, 2)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        calc.add_item(\"banana\", 5.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 0.1)\n        calc.add_item(\"item2\", 0.2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_percentage_like(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(200.0, 40.0)\n        self.assertEqual(result, 160.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-50.0, 10.0)\n        self.assertLessEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-10.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_various_amounts(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(50.0), 11.5, places=2)\n        self.assertAlmostEqual(calc.calculate_tax(200.0), 46.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_small_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total(discount=20.0)\n        expected = (80.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_achieved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_shipping_charged(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_calculation_verification(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"item1\", 30.0)\n        calc.add_item(\"item2\", 20.0)\n        subtotal = 50.0\n        discount = 10.0\n        discounted = 40.0\n        shipping = 5.0\n        total_before_tax = 45.0\n        tax = 4.5\n        expected = 49.5\n        self.assertAlmostEqual(calc.calculate_total(discount=10.0), expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.add_item(\"banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 8)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 3)\n        calc.add_item(\"banana\", 2.00, 2)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_total_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        items = calc.list_items()\n        self.assertIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n        self.assertIn(\"orange\", items)\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.remove_item(\"apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n\n    def test_list_items_duplicate_names(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"apple\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items.count(\"apple\"), 1)\n\n    def test_is_empty_empty_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_non_empty_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"laptop\", 500.0)\n        calc.add_item(\"mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 550.0)\n        self.assertEqual(calc.total_items(), 3)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_remove_add_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"banana\", 2.00)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.list_items(), [\"banana\"])\n\n    def test_integration_custom_constructor_with_calculations(self):\n        calc = OrderCalculator(tax_rate=0.05, free_shipping_threshold=200.0, shipping_cost=15.0)\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total()\n        expected = (100.0 + 15.0) * 1.05\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_threshold_boundary_behavior(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 50.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 10.0)\n        calc.add_item(\"item2\", 50.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 0.0)\n        calc.remove_item(\"item2\")\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 10.0)\n\n    def test_integration_multiple_operations_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"a\", 10.0, 2)\n        calc.add_item(\"b\", 20.0, 1)\n        calc.add_item(\"c\", 5.0, 4)\n        self.assertEqual(calc.get_subtotal(), 60.0)\n        self.assertEqual(calc.total_items(), 7)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 3)\n        calc.remove_item(\"b\")\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n        calc.add_item(\"item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        calc.add_item(\"item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        calc.add_item(\"item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.1)\n        self.assertEqual(calc.calculate_tax(100.0), -10.0)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-10.0)\n        calc.add_item(\"item\", 5.0)\n        self.assertEqual(calc.calculate_shipping(5.0), 0.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-5.0)\n        self.assertEqual(calc.shipping_cost, -5.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 2)\n        calc.add_item(\"apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"free_item\", 0.0, 5)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_fractional_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 19.99, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 59.97, places=2)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", -5.0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(None, 5.0)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(123, 5.0)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"item\", \"five\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"item\", 5.0, 2.5)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_after_multiple_adds(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        calc.remove_item(\"banana\")\n        items = calc.list_items()\n        self.assertNotIn(\"banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"banana\")\n\n    def test_remove_item_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"apple\", 2.00)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        with self.assertRaises((ValueError, TypeError)):\n            calc.remove_item(None)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        calc.add_item(\"banana\", 5.0)\n        calc.add_item(\"orange\", 3.0)\n        self.assertEqual(calc.get_subtotal(), 18.0)\n\n    def test_get_subtotal_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0, 3)\n        calc.add_item(\"banana\", 5.0, 2)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 10.0)\n        calc.add_item(\"banana\", 5.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 0.1)\n        calc.add_item(\"item2\", 0.2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_percentage_like(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(200.0, 40.0)\n        self.assertEqual(result, 160.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-50.0, 10.0)\n        self.assertLessEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-10.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_various_amounts(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(50.0), 11.5, places=2)\n        self.assertAlmostEqual(calc.calculate_tax(200.0), 46.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_small_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total(discount=20.0)\n        expected = (80.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_achieved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_shipping_charged(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_calculation_verification(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"item1\", 30.0)\n        calc.add_item(\"item2\", 20.0)\n        subtotal = 50.0\n        discount = 10.0\n        discounted = 40.0\n        shipping = 5.0\n        total_before_tax = 45.0\n        tax = 4.5\n        expected = 49.5\n        self.assertAlmostEqual(calc.calculate_total(discount=10.0), expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_total_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.add_item(\"banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 8)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 3)\n        calc.add_item(\"banana\", 2.00, 2)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_total_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.add_item(\"orange\", 1.75)\n        items = calc.list_items()\n        self.assertIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n        self.assertIn(\"orange\", items)\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.remove_item(\"apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n\n    def test_list_items_duplicate_names(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"apple\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items.count(\"apple\"), 1)\n\n    def test_is_empty_empty_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_non_empty_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.add_item(\"banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"laptop\", 500.0)\n        calc.add_item(\"mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 550.0)\n        self.assertEqual(calc.total_items(), 3)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_remove_add_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 1.50)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"banana\", 2.00)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.list_items(), [\"banana\"])\n\n    def test_integration_custom_constructor_with_calculations(self):\n        calc = OrderCalculator(tax_rate=0.05, free_shipping_threshold=200.0, shipping_cost=15.0)\n        calc.add_item(\"item\", 100.0)\n        total = calc.calculate_total()\n        expected = (100.0 + 15.0) * 1.05\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_threshold_boundary_behavior(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 50.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 10.0)\n        calc.add_item(\"item2\", 50.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 0.0)\n        calc.remove_item(\"item2\")\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 10.0)\n\n    def test_integration_multiple_operations_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"a\", 10.0, 2)\n        calc.add_item(\"b\", 20.0, 1)\n        calc.add_item(\"c\", 5.0, 4)\n        self.assertEqual(calc.get_subtotal(), 60.0)\n        self.assertEqual(calc.total_items(), 7)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 3)\n        calc.remove_item(\"b\")\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 211.0573422908783,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}