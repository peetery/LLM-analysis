{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2026-01-03T23:49:02.693616",
  "response_time": 145.29042720794678,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_030\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to understand its interface and prepare for test case generation.\n\n## Class Analysis\n\n### Overview\n`OrderCalculator` is an order/shopping cart management class that handles items, calculates prices with tax, discounts, and shipping.\n\n### Constructor Parameters\n- `tax_rate` (default 0.23) - 23% tax rate\n- `free_shipping_threshold` (default 100.0) - orders above this get free shipping\n- `shipping_cost` (default 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Add item to order\n   - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate items, very large values\n\n2. **`remove_item(name)`** - Remove item by name\n   - Edge cases: non-existent item, empty order, removing last item\n\n3. **`get_subtotal()`** - Calculate sum of (price Ă— quantity) for all items\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Apply discount to subtotal\n   - Edge cases: zero discount, 100% discount, discount > subtotal, negative discount, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determine shipping cost\n   - Edge cases: exactly at threshold, just below, just above, zero subtotal, negative\n\n6. **`calculate_tax(amount)`** - Calculate tax on amount\n   - Edge cases: zero amount, negative amount, large amounts\n\n7. **`calculate_total(discount=0.0)`** - Full calculation: subtotal - discount + shipping + tax\n   - Edge cases: empty order, with/without discount, at shipping threshold boundary\n\n8. **`total_items()`** - Count total quantity of all items\n   - Edge cases: empty order, multiple items with various quantities\n\n9. **`clear_order()`** - Remove all items\n   - Edge cases: already empty, after adding items\n\n10. **`list_items()`** - Return list of item names\n    - Edge cases: empty order, order with items\n\n11. **`is_empty()`** - Check if order has no items\n    - Edge cases: empty order, after adding/removing items\n\n### Key Testing Considerations\n\n- **State management**: Order maintains internal state (items list)\n- **Calculation chain**: `calculate_total` likely depends on other methods\n- **Boundary values**: threshold exactly at 100.0, tax calculations with precision\n- **Type validation**: strings, floats, integers need validation\n- **Exception handling**: invalid inputs should raise appropriate exceptions\n- **Float precision**: monetary calculations may have precision issues\n\n### Dependencies\n- `Item` TypedDict with likely fields: `name`, `price`, `quantity`\n- Returns `List[str]` from `list_items()`\n\nI'm ready to generate comprehensive unit tests for this class.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor `__init__`\n\n1. **Normal use** - Create calculator with default parameters, verify defaults are set\n2. **Normal use** - Create calculator with custom tax_rate, free_shipping_threshold, shipping_cost\n3. **Invalid input** - Negative tax_rate should raise exception\n4. **Invalid input** - Negative free_shipping_threshold should raise exception\n5. **Invalid input** - Negative shipping_cost should raise exception\n6. **Edge case** - Zero tax_rate (no tax scenario)\n7. **Edge case** - Zero shipping_cost (free shipping always)\n8. **Edge case** - Zero free_shipping_threshold (always free shipping above 0)\n\n### `add_item`\n\n9. **Normal use** - Add single item with default quantity\n10. **Normal use** - Add single item with explicit quantity\n11. **Normal use** - Add multiple different items\n12. **Normal use** - Add item with quantity > 1\n13. **Edge case** - Add item with very large price\n14. **Edge case** - Add item with very large quantity\n15. **Edge case** - Add duplicate item (same name) - should update or raise?\n16. **Invalid input** - Empty string name should raise exception\n17. **Invalid input** - Negative price should raise exception\n18. **Invalid input** - Zero price should raise exception (or be valid?)\n19. **Invalid input** - Negative quantity should raise exception\n20. **Invalid input** - Zero quantity should raise exception\n21. **Invalid input** - Non-string name should raise exception\n22. **Invalid input** - Non-numeric price should raise exception\n23. **Invalid input** - Non-integer quantity should raise exception\n\n### `remove_item`\n\n24. **Normal use** - Remove existing item from order\n25. **Normal use** - Remove item from order with multiple items\n26. **Edge case** - Remove last remaining item\n27. **Invalid input** - Remove non-existent item should raise exception\n28. **Invalid input** - Remove from empty order should raise exception\n29. **Invalid input** - Empty string name should raise exception\n\n### `get_subtotal`\n\n30. **Normal use** - Calculate subtotal for single item\n31. **Normal use** - Calculate subtotal for multiple items\n32. **Normal use** - Calculate subtotal with items having quantity > 1\n33. **Edge case** - Empty order returns 0.0\n34. **Edge case** - Verify float precision with many items\n\n### `apply_discount`\n\n35. **Normal use** - Apply percentage/fixed discount to subtotal\n36. **Normal use** - Apply zero discount (returns original)\n37. **Edge case** - Discount equals subtotal (result is 0)\n38. **Edge case** - Very small discount\n39. **Invalid input** - Negative discount should raise exception\n40. **Invalid input** - Discount greater than subtotal should raise exception (or clamp to 0?)\n41. **Invalid input** - Negative subtotal should raise exception\n42. **Edge case** - Zero subtotal with zero discount\n\n### `calculate_shipping`\n\n43. **Normal use** - Subtotal below threshold returns shipping_cost\n44. **Normal use** - Subtotal above threshold returns 0 (free shipping)\n45. **Edge case** - Subtotal exactly at threshold (boundary test)\n46. **Edge case** - Subtotal just below threshold (99.99)\n47. **Edge case** - Subtotal just above threshold (100.01)\n48. **Edge case** - Zero subtotal\n49. **Invalid input** - Negative subtotal should raise exception\n\n### `calculate_tax`\n\n50. **Normal use** - Calculate tax on positive amount\n51. **Normal use** - Calculate tax with custom tax_rate\n52. **Edge case** - Zero amount returns 0 tax\n53. **Edge case** - Very small amount (precision test)\n54. **Edge case** - Very large amount\n55. **Invalid input** - Negative amount should raise exception\n\n### `calculate_total`\n\n56. **Normal use** - Calculate total without discount\n57. **Normal use** - Calculate total with discount\n58. **Normal use** - Calculate total qualifying for free shipping\n59. **Normal use** - Calculate total not qualifying for free shipping\n60. **Edge case** - Empty order (should be 0 or raise?)\n61. **Edge case** - Order at exactly free_shipping_threshold after discount\n62. **Edge case** - Discount brings total below free_shipping_threshold\n63. **Edge case** - Verify tax is calculated on (subtotal - discount + shipping)\n64. **Invalid input** - Negative discount should raise exception\n\n### `total_items`\n\n65. **Normal use** - Count items with single item quantity 1\n66. **Normal use** - Count items with single item quantity > 1\n67. **Normal use** - Count items with multiple items various quantities\n68. **Edge case** - Empty order returns 0\n\n### `clear_order`\n\n69. **Normal use** - Clear order with items\n70. **Edge case** - Clear already empty order (should not raise)\n71. **Verification** - After clear, is_empty returns True\n72. **Verification** - After clear, get_subtotal returns 0\n\n### `list_items`\n\n73. **Normal use** - List items returns item names\n74. **Edge case** - Empty order returns empty list\n75. **Normal use** - Multiple items returns all names\n76. **Verification** - Order of items in list (insertion order?)\n\n### `is_empty`\n\n77. **Normal use** - Empty order returns True\n78. **Normal use** - Order with items returns False\n79. **State change** - Returns True after clear_order\n80. **State change** - Returns False after add_item\n81. **State change** - Returns True after removing all items\n\n### Integration/State Scenarios\n\n82. **Integration** - Full workflow: add items, apply discount, calculate total\n83. **Integration** - Add item, remove it, verify empty\n84. **Integration** - Multiple add/remove operations, verify consistency\n85. **Integration** - Clear order, add new items, calculate total\n86. **Precision** - Multiple floating point operations maintain accuracy",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_negative_tax_rate_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_free_shipping_threshold_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_add_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 1.00, 10000)\n        self.assertEqual(calc.total_items(), 10000)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_zero_price_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 0.0)\n\n    def test_add_item_negative_quantity_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_zero_quantity_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_remove_item_last_remaining(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent_raises_exception(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        self.assertEqual(calc.get_subtotal(), 2.25)\n\n    def test_get_subtotal_items_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 4.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 10)\n        calc.add_item(\"Item2\", 0.2, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_apply_discount_normal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_zero_subtotal_zero_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_negative_amount_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_total_without_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_not_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_brings_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=20.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount_raises_exception(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items_various_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Cherry\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_returns_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_get_subtotal_returns_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_returns_item_names(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Cherry\", 2.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Cherry\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Cherry\")\n\n    def test_is_empty_empty_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_multiple_add_remove_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n        calc.add_item(\"Cherry\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 7)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_integration_clear_add_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_precision_multiple_floating_point_operations(self):\n        calc = OrderCalculator(tax_rate=0.07)\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 0.33)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 33.0, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_negative_tax_rate_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_free_shipping_threshold_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost_raises_exception(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_add_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 1.00, 10000)\n        self.assertEqual(calc.total_items(), 10000)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_zero_price_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 0.0)\n\n    def test_add_item_negative_quantity_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_zero_quantity_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_from_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_remove_item_last_remaining(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent_raises_exception(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        self.assertEqual(calc.get_subtotal(), 2.25)\n\n    def test_get_subtotal_items_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 4.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 10)\n        calc.add_item(\"Item2\", 0.2, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_apply_discount_normal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equals_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_zero_subtotal_zero_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_negative_amount_raises_exception(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_total_without_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_not_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_brings_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=20.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount_raises_exception(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items_various_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Cherry\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_returns_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_get_subtotal_returns_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_returns_item_names(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Cherry\", 2.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Cherry\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Cherry\")\n\n    def test_is_empty_empty_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_multiple_add_remove_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n        calc.add_item(\"Cherry\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 7)\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_integration_clear_add_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_precision_multiple_floating_point_operations(self):\n        calc = OrderCalculator(tax_rate=0.07)\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 0.33)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 33.0, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 145.29042720794678,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}