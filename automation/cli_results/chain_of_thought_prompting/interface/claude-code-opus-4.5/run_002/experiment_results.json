{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T02:09:29.954788",
  "response_time": 197.12467217445374,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_002\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Class Purpose\n`OrderCalculator` is an e-commerce order management class that handles items, calculates prices with tax, discounts, and shipping.\n\n### Constructor Parameters\n- `tax_rate` (default: 0.23) - 23% tax rate\n- `free_shipping_threshold` (default: 100.0) - orders above this get free shipping\n- `shipping_cost` (default: 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Edge cases: empty name, zero/negative price, zero/negative quantity, duplicate items, float quantity\n\n2. **`remove_item(name)`** - Removes item from order\n   - Edge cases: non-existent item, empty order, case sensitivity\n\n3. **`get_subtotal()`** - Returns sum of item prices Ă— quantities\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Applies percentage discount\n   - Edge cases: 0% discount, 100% discount, negative discount, discount > 100%, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`** - Returns shipping cost\n   - Edge cases: exactly at threshold, just below/above threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, large amounts\n\n7. **`calculate_total(discount=0.0)`** - Full order total with tax and shipping\n   - Edge cases: empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Edge cases: empty order, multiple items with various quantities\n\n9. **`clear_order()`** - Empties the order\n   - Edge cases: already empty, with items\n\n10. **`list_items()`** - Returns list of item names\n    - Edge cases: empty order, multiple items, order of items\n\n11. **`is_empty()`** - Returns True if no items\n    - Edge cases: empty order, after adding/removing items\n\n### Key Test Categories\n\n1. **Initialization tests** - default values, custom values, invalid constructor args\n2. **Item management** - add, remove, clear operations\n3. **Calculation accuracy** - subtotal, tax, shipping, total\n4. **Discount logic** - valid discounts, boundary conditions\n5. **Shipping threshold** - free shipping logic\n6. **State queries** - is_empty, total_items, list_items\n7. **Error handling** - invalid inputs, exceptions\n8. **Integration** - complete order workflow scenarios\n\n### Potential Validation Points\n- Price validation (negative, zero)\n- Quantity validation (negative, zero, non-integer)\n- Name validation (empty string)\n- Discount range validation (0-100 or beyond)\n- Item existence checks for removal\n\nI'm now ready to generate the test code in the next step.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default values** (normal use) - Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom tax rate** (normal use) - Initialize with different tax rate and verify it's applied correctly\n3. **Custom shipping threshold** (normal use) - Initialize with different threshold and verify free shipping logic\n4. **Custom shipping cost** (normal use) - Initialize with different shipping cost\n5. **Zero tax rate** (edge case) - Tax rate of 0 should result in no tax\n6. **Zero shipping threshold** (edge case) - All orders should get free shipping\n7. **Zero shipping cost** (edge case) - Shipping should always be free\n8. **Negative tax rate** (invalid input) - Should raise exception or handle gracefully\n9. **Negative shipping threshold** (invalid input) - Should raise exception or handle gracefully\n10. **Negative shipping cost** (invalid input) - Should raise exception or handle gracefully\n\n### `add_item`\n\n11. **Single item with default quantity** (normal use) - Add one item, quantity defaults to 1\n12. **Single item with explicit quantity** (normal use) - Add item with quantity > 1\n13. **Multiple different items** (normal use) - Add several distinct items\n14. **Duplicate item name** (edge case) - Add same item twice, verify behavior (update or reject)\n15. **Empty item name** (invalid input) - Should raise exception\n16. **Whitespace-only name** (invalid input) - Should raise exception\n17. **Zero price** (edge case) - Free item, should be allowed or rejected\n18. **Negative price** (invalid input) - Should raise exception\n19. **Zero quantity** (invalid input) - Should raise exception or be rejected\n20. **Negative quantity** (invalid input) - Should raise exception\n21. **Float quantity** (invalid input) - Non-integer quantity should raise exception\n22. **Very large price** (edge case) - Verify handling of large numbers\n23. **Very large quantity** (edge case) - Verify handling of large quantities\n24. **Special characters in name** (edge case) - Names with unicode, symbols\n\n### `remove_item`\n\n25. **Remove existing item** (normal use) - Successfully remove an item\n26. **Remove non-existent item** (invalid input) - Should raise exception\n27. **Remove from empty order** (invalid input) - Should raise exception\n28. **Remove item twice** (invalid input) - Second removal should raise exception\n29. **Case sensitivity check** (edge case) - \"Apple\" vs \"apple\" behavior\n30. **Remove then re-add** (normal use) - Item can be added again after removal\n\n### `get_subtotal`\n\n31. **Empty order subtotal** (edge case) - Should return 0.0\n32. **Single item subtotal** (normal use) - price Ă— quantity\n33. **Multiple items subtotal** (normal use) - Sum of all price Ă— quantity\n34. **After item removal** (normal use) - Subtotal updates correctly\n35. **Floating point precision** (edge case) - Verify correct handling of decimals\n\n### `apply_discount`\n\n36. **Zero discount** (normal use) - Returns original subtotal\n37. **Valid discount percentage** (normal use) - 10%, 25%, 50% discounts\n38. **100% discount** (edge case) - Should return 0\n39. **Negative discount** (invalid input) - Should raise exception or handle\n40. **Discount over 100%** (invalid input) - Should raise exception or handle\n41. **Discount on zero subtotal** (edge case) - Should return 0\n42. **Discount on negative subtotal** (edge case) - Behavior undefined, test handling\n43. **Floating point discount** (normal use) - 12.5% discount\n\n### `calculate_shipping`\n\n44. **Below threshold** (normal use) - Returns shipping_cost\n45. **Exactly at threshold** (edge case) - Verify if free or charged\n46. **Above threshold** (normal use) - Returns 0 (free shipping)\n47. **Zero subtotal** (edge case) - Returns shipping_cost\n48. **Negative subtotal** (edge case) - Behavior undefined, test handling\n49. **Just below threshold** (edge case) - 99.99 when threshold is 100\n\n### `calculate_tax`\n\n50. **Tax on positive amount** (normal use) - amount Ă— tax_rate\n51. **Tax on zero amount** (edge case) - Should return 0\n52. **Tax on negative amount** (edge case) - Behavior undefined, test handling\n53. **Tax precision** (edge case) - Verify decimal precision in tax calculation\n\n### `calculate_total`\n\n54. **Empty order total** (edge case) - Should return 0 or just shipping\n55. **Single item no discount** (normal use) - subtotal + tax + shipping\n56. **Multiple items no discount** (normal use) - Full calculation\n57. **With discount below threshold** (normal use) - Discount applied, shipping charged\n58. **With discount above threshold** (normal use) - Discount applied, free shipping\n59. **Discount pushes below threshold** (edge case) - Order above threshold, discount brings below\n60. **100% discount** (edge case) - Should be 0 or just shipping\n61. **Invalid discount in total** (invalid input) - Negative or >100% discount handling\n\n### `total_items`\n\n62. **Empty order** (edge case) - Returns 0\n63. **Single item quantity 1** (normal use) - Returns 1\n64. **Single item quantity > 1** (normal use) - Returns quantity\n65. **Multiple items** (normal use) - Sum of all quantities\n66. **After removal** (normal use) - Count updates correctly\n\n### `clear_order`\n\n67. **Clear order with items** (normal use) - Order becomes empty\n68. **Clear already empty order** (edge case) - No error, remains empty\n69. **State after clear** (normal use) - is_empty returns True, total_items returns 0\n\n### `list_items`\n\n70. **Empty order** (edge case) - Returns empty list\n71. **Single item** (normal use) - Returns list with one name\n72. **Multiple items** (normal use) - Returns all item names\n73. **Order of items** (edge case) - Verify if order is preserved (insertion order)\n74. **After removal** (normal use) - Removed item not in list\n\n### `is_empty`\n\n75. **New order** (normal use) - Returns True\n76. **After adding item** (normal use) - Returns False\n77. **After removing all items** (normal use) - Returns True\n78. **After clear** (normal use) - Returns True\n\n### Integration/Workflow Scenarios\n\n79. **Complete order workflow** (integration) - Add items, apply discount, calculate total, clear\n80. **Add and remove same item** (integration) - Full cycle\n81. **Multiple discount applications** (integration) - Apply discount multiple times\n82. **Threshold boundary with discount** (integration) - Order exactly at threshold after discount\n83. **Order state persistence** (integration) - Multiple operations maintain consistent state\n84. **Concurrent-like operations** (integration) - Add multiple, remove some, calculate, add more",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        calc.add_item(\"Item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        calc.add_item(\"Item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 5.0)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"FreeItem\", 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 5.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 5.0, -1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 5.0, 2.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_special_characters_in_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Ä‚Ĺ›pfelâ„˘\", 5.0)\n        self.assertIn(\"Ä‚Ĺ›pfelâ„˘\", calc.list_items())\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 6.0)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 4)\n        self.assertEqual(calc.get_subtotal(), 22.0)\n\n    def test_get_subtotal_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 12.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.9, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_valid_percentage(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n        self.assertEqual(calc.apply_discount(100.0, 25.0), 75.0)\n        self.assertEqual(calc.apply_discount(100.0, 50.0), 50.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_floating_point(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 12.5)\n        self.assertEqual(result, 87.5)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + (50.0 * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0)\n        calc.add_item(\"Item2\", 40.0)\n        result = calc.calculate_total()\n        subtotal = 70.0\n        expected = subtotal + (subtotal * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0)\n        result = calc.calculate_total(discount=20.0)\n        discounted = 64.0\n        expected = discounted + (discounted * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        result = calc.calculate_total(discount=10.0)\n        discounted = 135.0\n        expected = discounted + (discounted * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_discount_pushes_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        result = calc.calculate_total(discount=20.0)\n        discounted = 88.0\n        expected = discounted + (discounted * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        result = calc.calculate_total(discount=100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_total_invalid_discount_negative(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0, 2)\n        calc.add_item(\"Item2\", 3.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0, 2)\n        calc.add_item(\"Item2\", 3.0, 3)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0)\n        calc.add_item(\"Item2\", 3.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 550.0)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 495.0\n        expected = discounted + (discounted * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_and_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Item\", 15.0)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_integration_multiple_discount_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        subtotal = calc.get_subtotal()\n        discounted1 = calc.apply_discount(subtotal, 10.0)\n        discounted2 = calc.apply_discount(subtotal, 20.0)\n        self.assertEqual(discounted1, 90.0)\n        self.assertEqual(discounted2, 80.0)\n\n    def test_integration_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 0.0)\n        discounted = calc.apply_discount(125.0, 20.0)\n        self.assertEqual(discounted, 100.0)\n        self.assertEqual(calc.calculate_shipping(discounted), 0.0)\n\n    def test_integration_order_state_persistence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 2)\n        calc.add_item(\"B\", 20.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.remove_item(\"A\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        calc.add_item(\"C\", 30.0, 3)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n\n    def test_integration_concurrent_like_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 5)\n        calc.add_item(\"Item2\", 20.0, 3)\n        calc.add_item(\"Item3\", 15.0, 2)\n        calc.remove_item(\"Item2\")\n        total1 = calc.calculate_total(discount=5.0)\n        calc.add_item(\"Item4\", 25.0, 1)\n        total2 = calc.calculate_total(discount=5.0)\n        self.assertGreater(total2, total1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        calc.add_item(\"Item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        calc.add_item(\"Item\", 10.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 5.0)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"FreeItem\", 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 5.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 5.0, -1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 5.0, 2.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_special_characters_in_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Ä‚Ĺ›pfelâ„˘\", 5.0)\n        self.assertIn(\"Ä‚Ĺ›pfelâ„˘\", calc.list_items())\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 6.0)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 4)\n        self.assertEqual(calc.get_subtotal(), 22.0)\n\n    def test_get_subtotal_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 12.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.9, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_valid_percentage(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n        self.assertEqual(calc.apply_discount(100.0, 25.0), 75.0)\n        self.assertEqual(calc.apply_discount(100.0, 50.0), 50.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_floating_point(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 12.5)\n        self.assertEqual(result, 87.5)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + (50.0 * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0)\n        calc.add_item(\"Item2\", 40.0)\n        result = calc.calculate_total()\n        subtotal = 70.0\n        expected = subtotal + (subtotal * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0)\n        result = calc.calculate_total(discount=20.0)\n        discounted = 64.0\n        expected = discounted + (discounted * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        result = calc.calculate_total(discount=10.0)\n        discounted = 135.0\n        expected = discounted + (discounted * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_discount_pushes_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        result = calc.calculate_total(discount=20.0)\n        discounted = 88.0\n        expected = discounted + (discounted * 0.23) + 10.0\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        result = calc.calculate_total(discount=100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_total_invalid_discount_negative(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0, 2)\n        calc.add_item(\"Item2\", 3.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0, 2)\n        calc.add_item(\"Item2\", 3.0, 3)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 5.0)\n        calc.add_item(\"Item2\", 3.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.add_item(\"Orange\", 4.0)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_complete_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 550.0)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 495.0\n        expected = discounted + (discounted * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_and_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Item\")\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Item\", 15.0)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_integration_multiple_discount_calculations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        subtotal = calc.get_subtotal()\n        discounted1 = calc.apply_discount(subtotal, 10.0)\n        discounted2 = calc.apply_discount(subtotal, 20.0)\n        self.assertEqual(discounted1, 90.0)\n        self.assertEqual(discounted2, 80.0)\n\n    def test_integration_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0)\n        self.assertEqual(calc.calculate_shipping(calc.get_subtotal()), 0.0)\n        discounted = calc.apply_discount(125.0, 20.0)\n        self.assertEqual(discounted, 100.0)\n        self.assertEqual(calc.calculate_shipping(discounted), 0.0)\n\n    def test_integration_order_state_persistence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 2)\n        calc.add_item(\"B\", 20.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.remove_item(\"A\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        calc.add_item(\"C\", 30.0, 3)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n\n    def test_integration_concurrent_like_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 10.0, 5)\n        calc.add_item(\"Item2\", 20.0, 3)\n        calc.add_item(\"Item3\", 15.0, 2)\n        calc.remove_item(\"Item2\")\n        total1 = calc.calculate_total(discount=5.0)\n        calc.add_item(\"Item4\", 25.0, 1)\n        total2 = calc.calculate_total(discount=5.0)\n        self.assertGreater(total2, total1)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 197.12467217445374,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}