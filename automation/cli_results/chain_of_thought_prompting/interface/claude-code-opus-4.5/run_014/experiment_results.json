{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T19:33:39.304775",
  "response_time": 167.8362262248993,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_014\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor (`__init__`)\n- **Parameters**: `tax_rate` (default 0.23), `free_shipping_threshold` (default 100.0), `shipping_cost` (default 10.0)\n- **Edge cases**: Negative values, zero values, non-numeric types, very large values\n\n### Public Methods\n\n1. **`add_item(name, price, quantity=1)`**\n   - Adds item with name, price, and optional quantity\n   - Edge cases: Empty name, negative price, zero price, negative quantity, zero quantity, non-string name, non-numeric price/quantity, duplicate names, very large values\n\n2. **`remove_item(name)`**\n   - Removes item by name\n   - Edge cases: Non-existent item, empty name, removing from empty order, case sensitivity\n\n3. **`get_subtotal()`**\n   - Returns sum of item prices Ă— quantities\n   - Edge cases: Empty order, single item, multiple items, floating point precision\n\n4. **`apply_discount(subtotal, discount)`**\n   - Applies discount to subtotal\n   - Edge cases: Zero discount, 100% discount, negative discount, discount > 100%, zero subtotal, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`**\n   - Returns shipping cost based on threshold\n   - Edge cases: Exactly at threshold, just below threshold, just above threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`**\n   - Calculates tax on amount\n   - Edge cases: Zero amount, negative amount, very large amount, floating point precision\n\n7. **`calculate_total(discount=0.0)`**\n   - Calculates final total (subtotal - discount + shipping + tax)\n   - Edge cases: Empty order, with/without discount, free shipping qualification, combination scenarios\n\n8. **`total_items()`**\n   - Returns total count of items (sum of quantities)\n   - Edge cases: Empty order, single item, multiple items with various quantities\n\n9. **`clear_order()`**\n   - Removes all items\n   - Edge cases: Already empty order, order with items\n\n10. **`list_items()`**\n    - Returns list of item names\n    - Edge cases: Empty order, single item, multiple items, order of items\n\n11. **`is_empty()`**\n    - Returns boolean if order has no items\n    - Edge cases: Empty order, order with items, after clearing\n\n### Key Test Categories to Cover\n\n1. **Initialization tests** - default and custom parameters\n2. **Item management** - add, remove, clear operations\n3. **Calculation tests** - subtotal, discount, shipping, tax, total\n4. **State queries** - total_items, list_items, is_empty\n5. **Edge cases** - empty states, boundary values, invalid inputs\n6. **Exception handling** - expected errors for invalid operations\n7. **Integration scenarios** - complete order workflows\n\n### Dependencies\n- `Item` is a `TypedDict` - items likely have `name`, `price`, `quantity` fields\n- Uses `typing.List` for return type annotation\n\nReady to proceed with test code generation.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** (normal use) - Verify default values for tax_rate, free_shipping_threshold, and shipping_cost are set correctly\n2. **Custom tax_rate** (normal use) - Initialize with custom tax rate and verify it's applied\n3. **Custom free_shipping_threshold** (normal use) - Initialize with custom threshold\n4. **Custom shipping_cost** (normal use) - Initialize with custom shipping cost\n5. **All custom parameters** (normal use) - Initialize with all custom values\n6. **Zero tax_rate** (edge case) - Tax rate of 0.0 should work\n7. **Zero shipping_cost** (edge case) - Free shipping by default\n8. **Zero free_shipping_threshold** (edge case) - Always qualify for free shipping\n9. **Negative tax_rate** (invalid input) - Should raise exception or handle gracefully\n10. **Negative shipping_cost** (invalid input) - Should raise exception or handle gracefully\n11. **Negative threshold** (invalid input) - Should raise exception or handle gracefully\n\n### `add_item(name, price, quantity)`\n\n12. **Add single item** (normal use) - Add one item with default quantity\n13. **Add item with explicit quantity** (normal use) - Add item with quantity > 1\n14. **Add multiple different items** (normal use) - Add several unique items\n15. **Add item with same name twice** (edge case) - May update or raise error\n16. **Add item with zero price** (edge case) - Free item\n17. **Add item with negative price** (invalid input) - Should raise exception\n18. **Add item with zero quantity** (edge case) - Should raise exception or ignore\n19. **Add item with negative quantity** (invalid input) - Should raise exception\n20. **Add item with empty name** (invalid input) - Should raise exception\n21. **Add item with None name** (invalid input) - Should raise TypeError\n22. **Add item with non-string name** (invalid input) - Should raise TypeError\n23. **Add item with non-numeric price** (invalid input) - Should raise TypeError\n24. **Add item with non-integer quantity** (invalid input) - Should raise TypeError or convert\n25. **Add item with very large price** (edge case) - Handle large numbers\n26. **Add item with very large quantity** (edge case) - Handle large quantities\n27. **Add item with float quantity** (edge case) - Should convert or raise error\n\n### `remove_item(name)`\n\n28. **Remove existing item** (normal use) - Successfully remove an item\n29. **Remove non-existent item** (exception) - Should raise KeyError or similar\n30. **Remove from empty order** (exception) - Should raise exception\n31. **Remove with empty string** (invalid input) - Should raise exception\n32. **Remove with None** (invalid input) - Should raise TypeError\n33. **Case sensitivity test** (edge case) - Check if \"Item\" vs \"item\" matters\n34. **Remove and re-add same item** (normal use) - Verify item can be re-added\n\n### `get_subtotal()`\n\n35. **Subtotal of empty order** (edge case) - Should return 0.0\n36. **Subtotal with single item quantity 1** (normal use) - Price equals subtotal\n37. **Subtotal with single item quantity > 1** (normal use) - Price Ă— quantity\n38. **Subtotal with multiple items** (normal use) - Sum of all price Ă— quantity\n39. **Subtotal precision** (edge case) - Floating point calculation accuracy\n40. **Subtotal after removing item** (normal use) - Recalculates correctly\n\n### `apply_discount(subtotal, discount)`\n\n41. **Apply zero discount** (edge case) - Subtotal unchanged\n42. **Apply small discount** (normal use) - 10% discount\n43. **Apply 50% discount** (normal use) - Half price\n44. **Apply 100% discount** (edge case) - Should return 0\n45. **Apply discount > 100%** (invalid input) - Should raise exception or cap\n46. **Apply negative discount** (invalid input) - Should raise exception\n47. **Apply discount to zero subtotal** (edge case) - Should return 0\n48. **Apply discount to negative subtotal** (edge case) - Undefined behavior test\n49. **Discount as integer** (edge case) - e.g., 10 instead of 10.0\n50. **Discount precision** (edge case) - Floating point accuracy\n\n### `calculate_shipping(discounted_subtotal)`\n\n51. **Shipping below threshold** (normal use) - Should charge shipping\n52. **Shipping exactly at threshold** (edge case) - Free or charged? Boundary test\n53. **Shipping above threshold** (normal use) - Free shipping\n54. **Shipping for zero subtotal** (edge case) - Should charge shipping\n55. **Shipping for negative subtotal** (edge case) - Undefined behavior\n56. **Shipping just below threshold** (edge case) - e.g., 99.99 when threshold is 100\n57. **Shipping just above threshold** (edge case) - e.g., 100.01\n\n### `calculate_tax(amount)`\n\n58. **Tax on positive amount** (normal use) - Amount Ă— tax_rate\n59. **Tax on zero amount** (edge case) - Should return 0\n60. **Tax on negative amount** (edge case) - May return negative or raise error\n61. **Tax precision** (edge case) - Floating point accuracy\n62. **Tax with zero tax_rate** (edge case) - Should return 0\n63. **Tax on very large amount** (edge case) - Handle large numbers\n\n### `calculate_total(discount)`\n\n64. **Total with no items** (edge case) - Should return shipping cost or 0\n65. **Total with items, no discount** (normal use) - Subtotal + shipping + tax\n66. **Total with discount** (normal use) - Apply discount then calculate\n67. **Total qualifying for free shipping** (normal use) - No shipping added\n68. **Total not qualifying for free shipping** (normal use) - Shipping added\n69. **Total at exact shipping threshold** (edge case) - Boundary test\n70. **Total with 100% discount** (edge case) - Just shipping + tax on 0?\n71. **Total calculation order** (normal use) - Verify discount â†’ shipping â†’ tax order\n72. **Total with negative discount** (invalid input) - Should raise exception\n73. **Total with discount > 100** (invalid input) - Should raise exception\n\n### `total_items()`\n\n74. **Total items empty order** (edge case) - Should return 0\n75. **Total items single item quantity 1** (normal use) - Should return 1\n76. **Total items single item quantity > 1** (normal use) - Return quantity\n77. **Total items multiple items** (normal use) - Sum of all quantities\n78. **Total items after remove** (normal use) - Decreases correctly\n\n### `clear_order()`\n\n79. **Clear order with items** (normal use) - All items removed\n80. **Clear empty order** (edge case) - No error, stays empty\n81. **Clear and verify state** (normal use) - is_empty returns True, subtotal is 0\n82. **Add items after clear** (normal use) - Can add new items\n\n### `list_items()`\n\n83. **List items empty order** (edge case) - Return empty list\n84. **List items single item** (normal use) - Return list with one name\n85. **List items multiple items** (normal use) - Return all names\n86. **List items order preserved** (edge case) - Check if insertion order matters\n87. **List items after removal** (normal use) - Removed item not in list\n\n### `is_empty()`\n\n88. **is_empty on new order** (normal use) - Should return True\n89. **is_empty after adding item** (normal use) - Should return False\n90. **is_empty after removing all items** (normal use) - Should return True\n91. **is_empty after clear** (normal use) - Should return True\n\n### Integration/Workflow Scenarios\n\n92. **Complete order workflow** (normal use) - Add items, apply discount, calculate total\n93. **Order modification workflow** (normal use) - Add, remove, modify, calculate\n94. **Multiple calculations consistency** (normal use) - Calling calculate_total multiple times\n95. **State consistency after operations** (normal use) - All getters return consistent data",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        self.assertEqual(calc.tax_rate, 0.1)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_with_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.0)\n\n    def test_add_item_with_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_with_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(None, 1.50)\n\n    def test_add_item_with_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_with_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_with_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, \"five\")\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_with_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"\")\n\n    def test_remove_with_none(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, KeyError, ValueError)):\n            calc.remove_item(None)\n\n    def test_remove_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"apple\")\n\n    def test_remove_and_readd_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 2.00)\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 3)\n        self.assertEqual(calc.get_subtotal(), 19.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_get_subtotal_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_zero_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_small_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_fifty_percent_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_negative_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_as_integer(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 33.33)\n        self.assertAlmostEqual(result, 22.22, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_total_no_items(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertAlmostEqual(result, 12.3, places=2)\n\n    def test_calculate_total_with_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total(10.0)\n        expected = 90.0 + 10.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0)\n        result = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_not_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_at_exact_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_calculation_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 120.0)\n        result = calc.calculate_total(20.0)\n        discounted = 96.0\n        shipping = 0.0\n        tax = (96.0 + 0.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_and_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_add_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_on_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Laptop\", 1000.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 1050.0)\n        self.assertEqual(calc.total_items(), 3)\n        total = calc.calculate_total(10.0)\n        discounted = 1050.0 * 0.9\n        expected = discounted + 0.0 + (discounted * 0.1)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 10)\n        calc.add_item(\"Banana\", 3.0, 5)\n        self.assertEqual(calc.get_subtotal(), 65.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 15.0)\n        calc.add_item(\"Orange\", 4.0, 3)\n        self.assertEqual(calc.get_subtotal(), 27.0)\n        total = calc.calculate_total()\n        self.assertGreater(total, 0)\n\n    def test_multiple_calculations_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total1 = calc.calculate_total(10.0)\n        total2 = calc.calculate_total(10.0)\n        total3 = calc.calculate_total(10.0)\n        self.assertEqual(total1, total2)\n        self.assertEqual(total2, total3)\n\n    def test_state_consistency_after_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 3)\n        calc.add_item(\"Banana\", 5.0, 2)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertFalse(calc.is_empty())\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        self.assertEqual(calc.tax_rate, 0.1)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_with_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_with_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_with_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.0)\n\n    def test_add_item_with_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_with_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_with_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_with_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(None, 1.50)\n\n    def test_add_item_with_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_with_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_with_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, \"five\")\n\n    def test_add_item_with_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_with_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_with_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_with_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"\")\n\n    def test_remove_with_none(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, KeyError, ValueError)):\n            calc.remove_item(None)\n\n    def test_remove_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"apple\")\n\n    def test_remove_and_readd_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 2.00)\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 2)\n        calc.add_item(\"Banana\", 3.0, 3)\n        self.assertEqual(calc.get_subtotal(), 19.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_get_subtotal_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        calc.add_item(\"Banana\", 3.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_zero_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_small_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_fifty_percent_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_negative_discount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_as_integer(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 33.33)\n        self.assertAlmostEqual(result, 22.22, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_total_no_items(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertAlmostEqual(result, 12.3, places=2)\n\n    def test_calculate_total_with_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total(10.0)\n        expected = 90.0 + 10.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 150.0)\n        result = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_not_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_at_exact_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_calculation_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 120.0)\n        result = calc.calculate_total(20.0)\n        discounted = 96.0\n        shipping = 0.0\n        tax = (96.0 + 0.0) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_and_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_add_items_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preserved(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_on_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Laptop\", 1000.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.get_subtotal(), 1050.0)\n        self.assertEqual(calc.total_items(), 3)\n        total = calc.calculate_total(10.0)\n        discounted = 1050.0 * 0.9\n        expected = discounted + 0.0 + (discounted * 0.1)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 10)\n        calc.add_item(\"Banana\", 3.0, 5)\n        self.assertEqual(calc.get_subtotal(), 65.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 15.0)\n        calc.add_item(\"Orange\", 4.0, 3)\n        self.assertEqual(calc.get_subtotal(), 27.0)\n        total = calc.calculate_total()\n        self.assertGreater(total, 0)\n\n    def test_multiple_calculations_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total1 = calc.calculate_total(10.0)\n        total2 = calc.calculate_total(10.0)\n        total3 = calc.calculate_total(10.0)\n        self.assertEqual(total1, total2)\n        self.assertEqual(total2, total3)\n\n    def test_state_consistency_after_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 3)\n        calc.add_item(\"Banana\", 5.0, 2)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertFalse(calc.is_empty())\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(len(calc.list_items()), 1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 167.8362262248993,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}