{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T20:37:31.680868",
  "response_time": 172.00090551376343,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_016\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze this `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Purpose\n`OrderCalculator` is an e-commerce order management class that handles items, pricing, discounts, shipping, and tax calculations.\n\n### Constructor Parameters\n- `tax_rate` (default 0.23 / 23%) - tax percentage applied to orders\n- `free_shipping_threshold` (default 100.0) - subtotal above which shipping is free\n- `shipping_cost` (default 10.0) - flat shipping fee when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Edge cases: empty name, zero/negative price, zero/negative quantity, duplicate items, float quantity\n\n2. **`remove_item(name)`** - Removes item from order\n   - Edge cases: non-existent item, empty string, case sensitivity\n\n3. **`get_subtotal()`** - Returns sum of (price Ă— quantity) for all items\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Edge cases: zero discount, 100% discount, negative discount, discount > subtotal, percentage vs absolute\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determines shipping cost\n   - Edge cases: exactly at threshold, just below, just above, zero subtotal, negative\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, different tax rates\n\n7. **`calculate_total(discount=0.0)`** - Full calculation (subtotal - discount + shipping + tax)\n   - Edge cases: empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Edge cases: empty order, single item, multiple items with quantities\n\n9. **`clear_order()`** - Removes all items\n   - Edge cases: already empty, after clearing verify state\n\n10. **`list_items()`** - Returns list of item names\n    - Edge cases: empty order, ordering/format of returned list\n\n11. **`is_empty()`** - Returns boolean for empty state\n    - Edge cases: initially empty, after adding, after clearing\n\n### Key Testing Areas\n\n1. **Input Validation** - Invalid types, negative values, empty strings\n2. **Boundary Conditions** - Threshold values, zero quantities\n3. **State Management** - Order persistence, item accumulation\n4. **Calculation Accuracy** - Floating point precision, tax/discount math\n5. **Exception Handling** - Expected errors for invalid operations\n6. **Integration** - Full order workflow from add to total\n\n### Identified Relationships\n- `calculate_total` depends on `get_subtotal`, `apply_discount`, `calculate_shipping`, `calculate_tax`\n- Shipping depends on discounted subtotal (discount applied first)\n- Tax calculation timing (before/after shipping?) needs verification\n\nReady to generate test code on request.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 1 | `__init__` | Normal use | Create instance with default parameters |\n| 2 | `__init__` | Normal use | Create instance with custom tax_rate |\n| 3 | `__init__` | Normal use | Create instance with custom free_shipping_threshold |\n| 4 | `__init__` | Normal use | Create instance with custom shipping_cost |\n| 5 | `__init__` | Normal use | Create instance with all custom parameters |\n| 6 | `__init__` | Edge case | Create instance with zero tax_rate |\n| 7 | `__init__` | Edge case | Create instance with zero free_shipping_threshold |\n| 8 | `__init__` | Edge case | Create instance with zero shipping_cost |\n| 9 | `__init__` | Invalid input | Create instance with negative tax_rate |\n| 10 | `__init__` | Invalid input | Create instance with negative free_shipping_threshold |\n| 11 | `__init__` | Invalid input | Create instance with negative shipping_cost |\n\n### `add_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 12 | `add_item` | Normal use | Add single item with default quantity |\n| 13 | `add_item` | Normal use | Add single item with explicit quantity |\n| 14 | `add_item` | Normal use | Add multiple different items |\n| 15 | `add_item` | Normal use | Add item with high price |\n| 16 | `add_item` | Normal use | Add item with high quantity |\n| 17 | `add_item` | Edge case | Add item with quantity of 1 explicitly |\n| 18 | `add_item` | Edge case | Add item with very small price (e.g., 0.01) |\n| 19 | `add_item` | Edge case | Add duplicate item (same name twice) |\n| 20 | `add_item` | Invalid input | Add item with empty name |\n| 21 | `add_item` | Invalid input | Add item with zero price |\n| 22 | `add_item` | Invalid input | Add item with negative price |\n| 23 | `add_item` | Invalid input | Add item with zero quantity |\n| 24 | `add_item` | Invalid input | Add item with negative quantity |\n| 25 | `add_item` | Invalid input | Add item with non-string name |\n| 26 | `add_item` | Invalid input | Add item with non-numeric price |\n| 27 | `add_item` | Invalid input | Add item with non-integer quantity |\n| 28 | `add_item` | Edge case | Add item with whitespace-only name |\n\n### `remove_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 29 | `remove_item` | Normal use | Remove existing item |\n| 30 | `remove_item` | Normal use | Remove item and verify order state |\n| 31 | `remove_item` | Edge case | Remove item from single-item order |\n| 32 | `remove_item` | Edge case | Remove item from multi-item order |\n| 33 | `remove_item` | Invalid input | Remove non-existent item |\n| 34 | `remove_item` | Invalid input | Remove item with empty string name |\n| 35 | `remove_item` | Invalid input | Remove from empty order |\n| 36 | `remove_item` | Edge case | Case sensitivity test for item name |\n\n### `get_subtotal`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 37 | `get_subtotal` | Normal use | Calculate subtotal with single item |\n| 38 | `get_subtotal` | Normal use | Calculate subtotal with multiple items |\n| 39 | `get_subtotal` | Normal use | Calculate subtotal with items of varying quantities |\n| 40 | `get_subtotal` | Edge case | Get subtotal of empty order (should be 0) |\n| 41 | `get_subtotal` | Edge case | Verify subtotal accuracy with floating point prices |\n| 42 | `get_subtotal` | Normal use | Subtotal after adding and removing items |\n\n### `apply_discount`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 43 | `apply_discount` | Normal use | Apply small discount to subtotal |\n| 44 | `apply_discount` | Normal use | Apply moderate discount |\n| 45 | `apply_discount` | Edge case | Apply zero discount |\n| 46 | `apply_discount` | Edge case | Apply discount equal to subtotal (100% off) |\n| 47 | `apply_discount` | Edge case | Apply discount to zero subtotal |\n| 48 | `apply_discount` | Invalid input | Apply negative discount |\n| 49 | `apply_discount` | Invalid input | Apply discount greater than subtotal |\n| 50 | `apply_discount` | Edge case | Apply discount with floating point precision |\n\n### `calculate_shipping`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 51 | `calculate_shipping` | Normal use | Calculate shipping below threshold |\n| 52 | `calculate_shipping` | Normal use | Calculate shipping above threshold (free) |\n| 53 | `calculate_shipping` | Edge case | Calculate shipping exactly at threshold |\n| 54 | `calculate_shipping` | Edge case | Calculate shipping just below threshold |\n| 55 | `calculate_shipping` | Edge case | Calculate shipping just above threshold |\n| 56 | `calculate_shipping` | Edge case | Calculate shipping for zero subtotal |\n| 57 | `calculate_shipping` | Invalid input | Calculate shipping for negative subtotal |\n| 58 | `calculate_shipping` | Edge case | Verify custom shipping_cost is used |\n| 59 | `calculate_shipping` | Edge case | Verify custom threshold is used |\n\n### `calculate_tax`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 60 | `calculate_tax` | Normal use | Calculate tax on positive amount |\n| 61 | `calculate_tax` | Normal use | Calculate tax with default rate (23%) |\n| 62 | `calculate_tax` | Edge case | Calculate tax on zero amount |\n| 63 | `calculate_tax` | Edge case | Calculate tax with custom rate |\n| 64 | `calculate_tax` | Edge case | Calculate tax with zero rate |\n| 65 | `calculate_tax` | Invalid input | Calculate tax on negative amount |\n| 66 | `calculate_tax` | Edge case | Verify floating point precision in tax calculation |\n\n### `calculate_total`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 67 | `calculate_total` | Normal use | Calculate total with no discount |\n| 68 | `calculate_total` | Normal use | Calculate total with discount |\n| 69 | `calculate_total` | Normal use | Calculate total qualifying for free shipping |\n| 70 | `calculate_total` | Normal use | Calculate total not qualifying for free shipping |\n| 71 | `calculate_total` | Edge case | Calculate total of empty order |\n| 72 | `calculate_total` | Edge case | Calculate total with discount making subtotal zero |\n| 73 | `calculate_total` | Edge case | Calculate total at exact shipping threshold |\n| 74 | `calculate_total` | Invalid input | Calculate total with negative discount |\n| 75 | `calculate_total` | Invalid input | Calculate total with discount exceeding subtotal |\n| 76 | `calculate_total` | Normal use | Verify correct order of operations (discount, then shipping, then tax) |\n| 77 | `calculate_total` | Edge case | Calculate total with all custom constructor params |\n\n### `total_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 78 | `total_items` | Normal use | Count items with single item quantity 1 |\n| 79 | `total_items` | Normal use | Count items with single item quantity > 1 |\n| 80 | `total_items` | Normal use | Count items with multiple items |\n| 81 | `total_items` | Edge case | Count items in empty order |\n| 82 | `total_items` | Normal use | Count items after adding and removing |\n\n### `clear_order`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 83 | `clear_order` | Normal use | Clear order with items |\n| 84 | `clear_order` | Edge case | Clear already empty order |\n| 85 | `clear_order` | Normal use | Verify state after clearing (subtotal, total_items, is_empty) |\n\n### `list_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 86 | `list_items` | Normal use | List items in populated order |\n| 87 | `list_items` | Edge case | List items in empty order |\n| 88 | `list_items` | Normal use | Verify return type is List[str] |\n| 89 | `list_items` | Normal use | List items after removing one item |\n\n### `is_empty`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 90 | `is_empty` | Normal use | Check empty on new order |\n| 91 | `is_empty` | Normal use | Check empty after adding item |\n| 92 | `is_empty` | Normal use | Check empty after removing all items |\n| 93 | `is_empty` | Normal use | Check empty after clear_order |\n\n### Integration / Workflow Scenarios\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 94 | Multiple | Integration | Full workflow: add items, apply discount, calculate total |\n| 95 | Multiple | Integration | Add items, remove some, verify subtotal and total |\n| 96 | Multiple | Integration | Add items, clear, add new items, verify state |\n| 97 | Multiple | Integration | Multiple operations maintaining consistent state |\n| 98 | Multiple | Edge case | Order with many items (stress test) |",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.10)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_high_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Luxury Item\", 10000.00)\n        self.assertEqual(calc.get_subtotal(), 10000.00)\n\n    def test_add_item_high_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 1.00, 1000)\n        self.assertEqual(calc.total_items(), 1000)\n\n    def test_add_item_quantity_one_explicit(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative Item\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_verify_order_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_item_from_single_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_remove_item_from_multi_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.get_subtotal(), 3.50)\n\n    def test_get_subtotal_items_with_varying_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 5.0)\n        self.assertEqual(result, 95.0)\n\n    def test_apply_discount_moderate(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 25.0)\n        self.assertEqual(result, 75.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_shipping_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=25.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 25.0)\n\n    def test_calculate_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_default_rate(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(200.0)\n        self.assertEqual(result, 46.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_not_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap Item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_making_subtotal_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_exact_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=100.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 90.0)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 80.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_all_custom_params(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Item\", 40.0)\n        total = calc.calculate_total()\n        expected = (40.0 + 5.0) * 1.10\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertTrue(calc.is_empty())\n\n    def test_list_items_populated_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        self.assertIsInstance(items, list)\n        self.assertTrue(all(isinstance(item, str) for item in items))\n\n    def test_list_items_after_removing_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 5.0, 10)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_clear_and_add_new(self):\n        calc = OrderCalculator()\n        calc.add_item(\"OldItem\", 100.0)\n        calc.clear_order()\n        calc.add_item(\"NewItem\", 200.0)\n        self.assertEqual(calc.get_subtotal(), 200.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"NewItem\", calc.list_items())\n\n    def test_integration_multiple_operations_consistent_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 120.0)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 60.0)\n        calc.add_item(\"Item3\", 50.0)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n\n    def test_integration_many_items_stress_test(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.10)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-50.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_high_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Luxury Item\", 10000.00)\n        self.assertEqual(calc.get_subtotal(), 10000.00)\n\n    def test_add_item_high_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk Item\", 1.00, 1000)\n        self.assertEqual(calc.total_items(), 1000)\n\n    def test_add_item_quantity_one_explicit(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Negative Item\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_verify_order_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_item_from_single_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_remove_item_from_multi_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 2)\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.get_subtotal(), 3.50)\n\n    def test_get_subtotal_items_with_varying_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 5.0)\n        self.assertEqual(result, 95.0)\n\n    def test_apply_discount_moderate(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 25.0)\n        self.assertEqual(result, 75.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_shipping(-50.0)\n\n    def test_calculate_shipping_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=25.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 25.0)\n\n    def test_calculate_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_default_rate(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(200.0)\n        self.assertEqual(result, 46.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.calculate_tax(-100.0)\n\n    def test_calculate_tax_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_not_qualifying_for_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap Item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_making_subtotal_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_exact_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=100.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 90.0)\n        total = calc.calculate_total(discount=10.0)\n        discounted = 80.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_all_custom_params(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Item\", 40.0)\n        total = calc.calculate_total()\n        expected = (40.0 + 5.0) * 1.10\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n        self.assertTrue(calc.is_empty())\n\n    def test_list_items_populated_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        self.assertIsInstance(items, list)\n        self.assertTrue(all(isinstance(item, str) for item in items))\n\n    def test_list_items_after_removing_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 5.0, 10)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_clear_and_add_new(self):\n        calc = OrderCalculator()\n        calc.add_item(\"OldItem\", 100.0)\n        calc.clear_order()\n        calc.add_item(\"NewItem\", 200.0)\n        self.assertEqual(calc.get_subtotal(), 200.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"NewItem\", calc.list_items())\n\n    def test_integration_multiple_operations_consistent_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 2)\n        calc.add_item(\"Item2\", 20.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 120.0)\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 60.0)\n        calc.add_item(\"Item3\", 50.0)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n\n    def test_integration_many_items_stress_test(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 172.00090551376343,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}