{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T02:58:28.381634",
  "response_time": 219.57564520835876,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_004\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze this `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor (`__init__`)\n- **Parameters**: `tax_rate` (default 0.23), `free_shipping_threshold` (default 100.0), `shipping_cost` (default 10.0)\n- **Edge cases**: Negative values, zero values, very large values, non-numeric types\n\n### `add_item(name, price, quantity=1)`\n- **Purpose**: Add an item to the order\n- **Edge cases**: Empty name, negative price, zero/negative quantity, duplicate items, non-string name, non-numeric price/quantity\n\n### `remove_item(name)`\n- **Purpose**: Remove an item from the order\n- **Edge cases**: Non-existent item, empty order, case sensitivity\n\n### `get_subtotal()`\n- **Purpose**: Calculate sum of all items (price Ă— quantity)\n- **Edge cases**: Empty order, single item, multiple items, floating point precision\n\n### `apply_discount(subtotal, discount)`\n- **Purpose**: Apply discount to subtotal\n- **Edge cases**: Zero discount, 100% discount, negative discount, discount > 100%, discount on zero subtotal\n\n### `calculate_shipping(discounted_subtotal)`\n- **Purpose**: Determine shipping cost based on threshold\n- **Edge cases**: Subtotal exactly at threshold, just below/above threshold, zero subtotal, negative subtotal\n\n### `calculate_tax(amount)`\n- **Purpose**: Calculate tax on given amount\n- **Edge cases**: Zero amount, negative amount, very large amount, floating point precision\n\n### `calculate_total(discount=0.0)`\n- **Purpose**: Calculate final total (subtotal - discount + shipping + tax)\n- **Edge cases**: Empty order, with/without discount, free shipping scenarios, combined edge cases\n\n### `total_items()`\n- **Purpose**: Count total number of items (considering quantities)\n- **Edge cases**: Empty order, single item, multiple items with various quantities\n\n### `clear_order()`\n- **Purpose**: Remove all items from order\n- **Edge cases**: Already empty order, order with items\n\n### `list_items()`\n- **Purpose**: Return list of item names\n- **Edge cases**: Empty order, order with items, ordering consistency\n\n### `is_empty()`\n- **Purpose**: Check if order has no items\n- **Edge cases**: Empty order, order with items, after clear\n\n## Key Test Categories Identified\n\n1. **Initialization tests** - default and custom parameters\n2. **Item management tests** - add, remove, clear operations\n3. **Calculation tests** - subtotal, discount, shipping, tax, total\n4. **State query tests** - total_items, list_items, is_empty\n5. **Boundary tests** - thresholds, zero values, edge conditions\n6. **Error handling tests** - invalid inputs, exceptional conditions\n7. **Integration tests** - combined operations workflow\n\nReady for the next step to write test scenarios or test code.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default parameters** (normal use) - Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom tax rate** (normal use) - Initialize with custom tax rate value\n3. **Custom shipping threshold** (normal use) - Initialize with custom free shipping threshold\n4. **Custom shipping cost** (normal use) - Initialize with custom shipping cost\n5. **All custom parameters** (normal use) - Initialize with all custom values\n6. **Zero tax rate** (edge case) - Verify behavior with 0% tax\n7. **Zero shipping threshold** (edge case) - All orders get free shipping\n8. **Zero shipping cost** (edge case) - Shipping is always free\n9. **Negative tax rate** (invalid input) - Behavior with negative tax rate\n10. **Negative shipping threshold** (invalid input) - Behavior with negative threshold\n11. **Negative shipping cost** (invalid input) - Behavior with negative shipping cost\n\n### `add_item(name, price, quantity)`\n\n12. **Add single item default quantity** (normal use) - Add item with quantity=1\n13. **Add single item explicit quantity** (normal use) - Add item with specific quantity\n14. **Add multiple different items** (normal use) - Add several distinct items\n15. **Add item with large quantity** (normal use) - Add item with high quantity value\n16. **Add item with float price** (normal use) - Price with decimal places\n17. **Add duplicate item name** (edge case) - Add item with same name as existing\n18. **Empty item name** (invalid input) - Add item with empty string name\n19. **Whitespace item name** (invalid input) - Add item with only whitespace\n20. **Zero price** (edge case) - Add item with price of 0\n21. **Negative price** (invalid input) - Add item with negative price\n22. **Zero quantity** (invalid input) - Add item with quantity of 0\n23. **Negative quantity** (invalid input) - Add item with negative quantity\n24. **Non-string name** (invalid input) - Pass non-string type as name\n25. **Non-numeric price** (invalid input) - Pass non-numeric type as price\n26. **Non-integer quantity** (invalid input) - Pass float or string as quantity\n27. **Very small price** (edge case) - Price with many decimal places\n\n### `remove_item(name)`\n\n28. **Remove existing item** (normal use) - Remove item that exists in order\n29. **Remove from order with multiple items** (normal use) - Remove one of several items\n30. **Remove non-existent item** (invalid input) - Remove item not in order\n31. **Remove from empty order** (invalid input) - Remove from order with no items\n32. **Case sensitivity check** (edge case) - Remove with different case than added\n33. **Remove item twice** (edge case) - Try to remove same item after already removed\n\n### `get_subtotal()`\n\n34. **Subtotal empty order** (edge case) - Subtotal when no items\n35. **Subtotal single item quantity 1** (normal use) - One item with quantity 1\n36. **Subtotal single item multiple quantity** (normal use) - One item with quantity > 1\n37. **Subtotal multiple items** (normal use) - Several items with various quantities\n38. **Subtotal after item removal** (normal use) - Verify subtotal updates after removal\n39. **Subtotal floating point precision** (edge case) - Verify handling of decimal prices\n\n### `apply_discount(subtotal, discount)`\n\n40. **Zero discount** (normal use) - No discount applied\n41. **Small percentage discount** (normal use) - e.g., 5% discount\n42. **Large percentage discount** (normal use) - e.g., 50% discount\n43. **100% discount** (edge case) - Full discount\n44. **Discount greater than 100%** (invalid input) - Discount exceeding subtotal\n45. **Negative discount** (invalid input) - Negative discount value\n46. **Discount on zero subtotal** (edge case) - Apply discount when subtotal is 0\n47. **Very small discount** (edge case) - Discount like 0.01%\n48. **Discount with decimal precision** (edge case) - e.g., 12.5% discount\n\n### `calculate_shipping(discounted_subtotal)`\n\n49. **Subtotal below threshold** (normal use) - Shipping cost applies\n50. **Subtotal above threshold** (normal use) - Free shipping\n51. **Subtotal exactly at threshold** (edge case) - Boundary condition\n52. **Subtotal just below threshold** (edge case) - e.g., 99.99 when threshold is 100\n53. **Subtotal just above threshold** (edge case) - e.g., 100.01 when threshold is 100\n54. **Zero subtotal** (edge case) - Shipping on empty/free order\n55. **Negative subtotal** (invalid input) - Behavior with negative value\n56. **Very large subtotal** (edge case) - Extremely high value\n\n### `calculate_tax(amount)`\n\n57. **Tax on positive amount** (normal use) - Standard tax calculation\n58. **Tax on zero amount** (edge case) - Tax when amount is 0\n59. **Tax on negative amount** (invalid input) - Behavior with negative value\n60. **Tax precision** (edge case) - Verify rounding/precision of tax calculation\n61. **Tax on very small amount** (edge case) - e.g., 0.01\n62. **Tax on very large amount** (edge case) - Extremely high value\n\n### `calculate_total(discount)`\n\n63. **Total with no discount, below shipping threshold** (normal use) - Standard order\n64. **Total with no discount, above shipping threshold** (normal use) - Free shipping order\n65. **Total with discount, below shipping threshold** (normal use) - Discounted order with shipping\n66. **Total with discount, above shipping threshold** (normal use) - Discounted order, free shipping\n67. **Total on empty order** (edge case) - No items in order\n68. **Total with 100% discount** (edge case) - Full discount applied\n69. **Discount pushes below shipping threshold** (edge case) - Was above, now below after discount\n70. **Discount pushes to exactly threshold** (edge case) - Ends exactly at threshold\n71. **Total with default discount parameter** (normal use) - Using discount=0.0 default\n72. **Total with negative discount** (invalid input) - Negative discount value\n73. **Total calculation order** (normal use) - Verify subtotalâ†’discountâ†’shippingâ†’tax order\n\n### `total_items()`\n\n74. **Total items empty order** (edge case) - No items returns 0\n75. **Total items single item quantity 1** (normal use) - One item\n76. **Total items single item multiple quantity** (normal use) - One item, quantity > 1\n77. **Total items multiple items** (normal use) - Sum of all quantities\n78. **Total items after adding** (normal use) - Count updates after add\n79. **Total items after removing** (normal use) - Count updates after remove\n\n### `clear_order()`\n\n80. **Clear order with items** (normal use) - Remove all items\n81. **Clear empty order** (edge case) - Clear when already empty\n82. **Clear then verify empty** (normal use) - is_empty returns True after clear\n83. **Clear then verify subtotal** (normal use) - Subtotal is 0 after clear\n84. **Clear then add new items** (normal use) - Can add items after clearing\n\n### `list_items()`\n\n85. **List items empty order** (edge case) - Returns empty list\n86. **List items single item** (normal use) - Returns list with one name\n87. **List items multiple items** (normal use) - Returns list with all names\n88. **List items after removal** (normal use) - Removed item not in list\n89. **List items order consistency** (edge case) - Verify consistent ordering\n90. **List items returns copy** (edge case) - Modifying returned list doesn't affect order\n\n### `is_empty()`\n\n91. **Empty order returns True** (normal use) - New order is empty\n92. **Order with items returns False** (normal use) - After adding items\n93. **After clear returns True** (normal use) - After clearing items\n94. **After remove last item returns True** (edge case) - Removing only item\n95. **After add then remove all returns True** (normal use) - Add and remove sequence\n\n### Integration/Workflow Scenarios\n\n96. **Full order workflow** (integration) - Add items, apply discount, calculate total\n97. **Add, remove, add sequence** (integration) - Multiple operations in sequence\n98. **Multiple discounts scenario** (integration) - Different discount values in succession\n99. **Threshold boundary with discount** (integration) - Order crosses threshold after discount\n100. **State consistency after operations** (integration) - Verify internal state remains consistent",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 3.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 1000)\n        self.assertEqual(calc.total_items(), 1000)\n\n    def test_add_item_float_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.99)\n        self.assertAlmostEqual(calc.get_subtotal(), 1.99, places=2)\n\n    def test_add_duplicate_item_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_from_order_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Orange\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertAlmostEqual(calc.get_subtotal(), 2.50, places=2)\n\n    def test_get_subtotal_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 4)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.00, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.00, places=2)\n\n    def test_get_subtotal_after_item_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 9.00, places=2)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 10)\n        calc.add_item(\"Item2\", 0.2, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_small_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 5.0)\n        self.assertAlmostEqual(result, 95.0, places=2)\n\n    def test_apply_discount_large_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_greater_than_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertGreaterEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_decimal_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 12.5)\n        self.assertAlmostEqual(result, 87.5, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(-50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(1000000.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(result, -23.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(1000000.0)\n        self.assertAlmostEqual(result, 230000.0, places=2)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 20.0, 2)\n        total = calc.calculate_total()\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 20.0, 2)\n        total = calc.calculate_total(10.0)\n        discounted = 40.0 * 0.9\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total(10.0)\n        discounted = 150.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_pushes_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total(50.0)\n        discounted = 150.0 * 0.5\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_pushes_to_exactly_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 4)\n        total = calc.calculate_total(50.0)\n        discounted = 200.0 * 0.5\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total_default = calc.calculate_total()\n        total_explicit = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_default, total_explicit, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 80.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 80.0\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.10\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 3.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_adding(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_verify_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add_new_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_order_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items1 = calc.list_items()\n        items2 = calc.list_items()\n        self.assertEqual(items1, items2)\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_remove_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 550.0, places=2)\n        total = calc.calculate_total(10.0)\n        discounted = 550.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_add_remove_add_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 3.00, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_multiple_discounts_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total_10 = calc.calculate_total(10.0)\n        total_20 = calc.calculate_total(20.0)\n        self.assertGreater(total_10, total_20)\n\n    def test_threshold_boundary_with_discount(self):\n        calc = OrderCalculator(tax_rate=0.0, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        total_no_discount = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_no_discount, 120.0, places=2)\n        total_with_discount = calc.calculate_total(20.0)\n        discounted = 120.0 * 0.8\n        expected = discounted + 10.0\n        self.assertAlmostEqual(total_with_discount, expected, places=2)\n\n    def test_state_consistency_after_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 3.00, 1)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertAlmostEqual(calc.get_subtotal(), 9.0, places=2)\n        self.assertFalse(calc.is_empty())\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 3.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 1000)\n        self.assertEqual(calc.total_items(), 1000)\n\n    def test_add_item_float_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.99)\n        self.assertAlmostEqual(calc.get_subtotal(), 1.99, places=2)\n\n    def test_add_duplicate_item_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_from_order_with_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Orange\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertAlmostEqual(calc.get_subtotal(), 2.50, places=2)\n\n    def test_get_subtotal_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 4)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.00, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.00, places=2)\n\n    def test_get_subtotal_after_item_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 9.00, places=2)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 10)\n        calc.add_item(\"Item2\", 0.2, 10)\n        self.assertAlmostEqual(calc.get_subtotal(), 3.0, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_small_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 5.0)\n        self.assertAlmostEqual(result, 95.0, places=2)\n\n    def test_apply_discount_large_percentage(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_greater_than_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertGreaterEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_decimal_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 12.5)\n        self.assertAlmostEqual(result, 87.5, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(-50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(1000000.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(result, -23.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_tax_very_small_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_very_large_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(1000000.0)\n        self.assertAlmostEqual(result, 230000.0, places=2)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 20.0, 2)\n        total = calc.calculate_total()\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 20.0, 2)\n        total = calc.calculate_total(10.0)\n        discounted = 40.0 * 0.9\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total(10.0)\n        discounted = 150.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_pushes_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total = calc.calculate_total(50.0)\n        discounted = 150.0 * 0.5\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_pushes_to_exactly_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 4)\n        total = calc.calculate_total(50.0)\n        discounted = 200.0 * 0.5\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 3)\n        total_default = calc.calculate_total()\n        total_explicit = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_default, total_explicit, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 80.0, 1)\n        total = calc.calculate_total(10.0)\n        subtotal = 80.0\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.10\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_multiple_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 3.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_adding(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(calc.total_items(), 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_verify_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add_new_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_order_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items1 = calc.list_items()\n        items2 = calc.list_items()\n        self.assertEqual(items1, items2)\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_remove_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove_all(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 550.0, places=2)\n        total = calc.calculate_total(10.0)\n        discounted = 550.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_add_remove_add_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 3.00, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_multiple_discounts_scenario(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total_10 = calc.calculate_total(10.0)\n        total_20 = calc.calculate_total(20.0)\n        self.assertGreater(total_10, total_20)\n\n    def test_threshold_boundary_with_discount(self):\n        calc = OrderCalculator(tax_rate=0.0, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        total_no_discount = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_no_discount, 120.0, places=2)\n        total_with_discount = calc.calculate_total(20.0)\n        discounted = 120.0 * 0.8\n        expected = discounted + 10.0\n        self.assertAlmostEqual(total_with_discount, expected, places=2)\n\n    def test_state_consistency_after_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 3.00, 1)\n        self.assertEqual(calc.total_items(), 4)\n        self.assertAlmostEqual(calc.get_subtotal(), 9.0, places=2)\n        self.assertFalse(calc.is_empty())\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 219.57564520835876,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}