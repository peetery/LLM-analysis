{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2026-01-03T22:41:21.319103",
  "response_time": 233.94782519340515,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_027\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor (`__init__`)\n- **Parameters**: `tax_rate` (default 0.23), `free_shipping_threshold` (default 100.0), `shipping_cost` (default 10.0)\n- **Test considerations**: Default values, custom values, edge cases (zero, negative values)\n\n### Public Methods\n\n1. **`add_item(name, price, quantity=1)`**\n   - Adds item to order\n   - Test: valid items, duplicate names, invalid price (negative/zero), invalid quantity (negative/zero), edge cases for name (empty string)\n\n2. **`remove_item(name)`**\n   - Removes item by name\n   - Test: existing item, non-existing item, empty order\n\n3. **`get_subtotal()`**\n   - Returns sum of (price Ă— quantity) for all items\n   - Test: empty order, single item, multiple items, items with different quantities\n\n4. **`apply_discount(subtotal, discount)`**\n   - Applies discount to subtotal\n   - Test: valid discounts (0-100%), edge cases (0%, 100%), invalid discounts (negative, >100%), zero subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`**\n   - Returns shipping cost based on threshold\n   - Test: below threshold, at threshold, above threshold, zero subtotal\n\n6. **`calculate_tax(amount)`**\n   - Calculates tax on amount\n   - Test: positive amount, zero amount, negative amount (edge case)\n\n7. **`calculate_total(discount=0.0)`**\n   - Combines subtotal, discount, shipping, and tax\n   - Test: empty order, with/without discount, free shipping threshold, various combinations\n\n8. **`total_items()`**\n   - Returns total quantity of all items\n   - Test: empty order, single item, multiple items with various quantities\n\n9. **`clear_order()`**\n   - Empties the order\n   - Test: clear empty order, clear order with items\n\n10. **`list_items()`**\n    - Returns list of item names\n    - Test: empty order, single item, multiple items, order preservation\n\n11. **`is_empty()`**\n    - Returns boolean for empty state\n    - Test: new order, after adding items, after clearing\n\n### Key Test Categories Identified\n\n1. **Initialization tests** - constructor parameters\n2. **Item management tests** - add/remove/clear operations\n3. **Calculation tests** - subtotal, discount, shipping, tax, total\n4. **State query tests** - total_items, list_items, is_empty\n5. **Edge cases** - boundary values, empty states\n6. **Invalid input tests** - negative values, invalid types, missing items\n7. **Integration tests** - full order workflow scenarios\n\nReady for the next step to write test scenarios or test code.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 1 | `__init__` | Normal use | Create calculator with default values (tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0) |\n| 2 | `__init__` | Normal use | Create calculator with custom tax_rate |\n| 3 | `__init__` | Normal use | Create calculator with custom free_shipping_threshold |\n| 4 | `__init__` | Normal use | Create calculator with custom shipping_cost |\n| 5 | `__init__` | Normal use | Create calculator with all custom values |\n| 6 | `__init__` | Edge case | Create calculator with zero tax_rate |\n| 7 | `__init__` | Edge case | Create calculator with zero free_shipping_threshold |\n| 8 | `__init__` | Edge case | Create calculator with zero shipping_cost |\n| 9 | `__init__` | Invalid input | Create calculator with negative tax_rate |\n| 10 | `__init__` | Invalid input | Create calculator with negative free_shipping_threshold |\n| 11 | `__init__` | Invalid input | Create calculator with negative shipping_cost |\n\n### `add_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 12 | `add_item` | Normal use | Add single item with default quantity (1) |\n| 13 | `add_item` | Normal use | Add single item with explicit quantity |\n| 14 | `add_item` | Normal use | Add multiple different items |\n| 15 | `add_item` | Normal use | Add item with high price value |\n| 16 | `add_item` | Normal use | Add item with high quantity |\n| 17 | `add_item` | Edge case | Add item with quantity = 1 explicitly |\n| 18 | `add_item` | Edge case | Add item with very small price (e.g., 0.01) |\n| 19 | `add_item` | Edge case | Add item with same name twice (duplicate handling) |\n| 20 | `add_item` | Invalid input | Add item with zero price |\n| 21 | `add_item` | Invalid input | Add item with negative price |\n| 22 | `add_item` | Invalid input | Add item with zero quantity |\n| 23 | `add_item` | Invalid input | Add item with negative quantity |\n| 24 | `add_item` | Invalid input | Add item with empty name string |\n| 25 | `add_item` | Invalid input | Add item with None as name |\n| 26 | `add_item` | Invalid input | Add item with non-string name |\n| 27 | `add_item` | Invalid input | Add item with non-numeric price |\n| 28 | `add_item` | Invalid input | Add item with non-integer quantity |\n\n### `remove_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 29 | `remove_item` | Normal use | Remove existing item from order |\n| 30 | `remove_item` | Normal use | Remove item and verify it's gone from list |\n| 31 | `remove_item` | Edge case | Remove item from order with single item (becomes empty) |\n| 32 | `remove_item` | Edge case | Remove first of multiple items |\n| 33 | `remove_item` | Edge case | Remove last of multiple items |\n| 34 | `remove_item` | Exception | Remove non-existing item from non-empty order |\n| 35 | `remove_item` | Exception | Remove item from empty order |\n| 36 | `remove_item` | Edge case | Remove item with case-sensitive name matching |\n\n### `get_subtotal`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 37 | `get_subtotal` | Normal use | Calculate subtotal for single item (quantity=1) |\n| 38 | `get_subtotal` | Normal use | Calculate subtotal for single item with quantity > 1 |\n| 39 | `get_subtotal` | Normal use | Calculate subtotal for multiple items |\n| 40 | `get_subtotal` | Edge case | Get subtotal of empty order (should be 0) |\n| 41 | `get_subtotal` | Edge case | Verify subtotal calculation precision (floating point) |\n| 42 | `get_subtotal` | Normal use | Subtotal updates correctly after adding items |\n| 43 | `get_subtotal` | Normal use | Subtotal updates correctly after removing items |\n\n### `apply_discount`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 44 | `apply_discount` | Normal use | Apply 10% discount to subtotal |\n| 45 | `apply_discount` | Normal use | Apply 50% discount to subtotal |\n| 46 | `apply_discount` | Edge case | Apply 0% discount (no change) |\n| 47 | `apply_discount` | Edge case | Apply 100% discount (result should be 0) |\n| 48 | `apply_discount` | Edge case | Apply discount to zero subtotal |\n| 49 | `apply_discount` | Invalid input | Apply negative discount |\n| 50 | `apply_discount` | Invalid input | Apply discount greater than 100% |\n| 51 | `apply_discount` | Edge case | Verify discount calculation precision |\n| 52 | `apply_discount` | Invalid input | Apply discount to negative subtotal |\n\n### `calculate_shipping`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 53 | `calculate_shipping` | Normal use | Calculate shipping when subtotal below threshold |\n| 54 | `calculate_shipping` | Edge case | Calculate shipping when subtotal exactly at threshold |\n| 55 | `calculate_shipping` | Normal use | Calculate shipping when subtotal above threshold (free) |\n| 56 | `calculate_shipping` | Edge case | Calculate shipping for zero subtotal |\n| 57 | `calculate_shipping` | Edge case | Calculate shipping with custom shipping_cost |\n| 58 | `calculate_shipping` | Edge case | Calculate shipping with custom threshold |\n| 59 | `calculate_shipping` | Edge case | Calculate shipping when subtotal is just below threshold |\n| 60 | `calculate_shipping` | Edge case | Calculate shipping when subtotal is just above threshold |\n\n### `calculate_tax`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 61 | `calculate_tax` | Normal use | Calculate tax on positive amount |\n| 62 | `calculate_tax` | Edge case | Calculate tax on zero amount |\n| 63 | `calculate_tax` | Normal use | Calculate tax with default rate (23%) |\n| 64 | `calculate_tax` | Normal use | Calculate tax with custom rate |\n| 65 | `calculate_tax` | Edge case | Calculate tax with zero tax rate |\n| 66 | `calculate_tax` | Edge case | Verify tax calculation precision |\n| 67 | `calculate_tax` | Edge case | Calculate tax on very small amount |\n| 68 | `calculate_tax` | Edge case | Calculate tax on very large amount |\n\n### `calculate_total`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 69 | `calculate_total` | Normal use | Calculate total without discount |\n| 70 | `calculate_total` | Normal use | Calculate total with discount |\n| 71 | `calculate_total` | Edge case | Calculate total for empty order |\n| 72 | `calculate_total` | Normal use | Calculate total with free shipping (above threshold) |\n| 73 | `calculate_total` | Normal use | Calculate total with paid shipping (below threshold) |\n| 74 | `calculate_total` | Edge case | Calculate total at exact shipping threshold |\n| 75 | `calculate_total` | Invalid input | Calculate total with negative discount |\n| 76 | `calculate_total` | Invalid input | Calculate total with discount > 100% |\n| 77 | `calculate_total` | Edge case | Calculate total with 100% discount |\n| 78 | `calculate_total` | Normal use | Verify total = (subtotal - discount) + shipping + tax |\n| 79 | `calculate_total` | Edge case | Total calculation precision with multiple items |\n\n### `total_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 80 | `total_items` | Normal use | Count items in order with single item (qty=1) |\n| 81 | `total_items` | Normal use | Count items with single item (qty>1) |\n| 82 | `total_items` | Normal use | Count items with multiple different items |\n| 83 | `total_items` | Edge case | Count items in empty order (should be 0) |\n| 84 | `total_items` | Normal use | Count updates after adding item |\n| 85 | `total_items` | Normal use | Count updates after removing item |\n| 86 | `total_items` | Normal use | Count reflects sum of all quantities |\n\n### `clear_order`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 87 | `clear_order` | Normal use | Clear order with multiple items |\n| 88 | `clear_order` | Edge case | Clear already empty order |\n| 89 | `clear_order` | Normal use | Verify is_empty returns True after clear |\n| 90 | `clear_order` | Normal use | Verify subtotal is 0 after clear |\n| 91 | `clear_order` | Normal use | Verify total_items is 0 after clear |\n| 92 | `clear_order` | Normal use | Verify list_items returns empty list after clear |\n\n### `list_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 93 | `list_items` | Normal use | List items from order with multiple items |\n| 94 | `list_items` | Normal use | List items from order with single item |\n| 95 | `list_items` | Edge case | List items from empty order (empty list) |\n| 96 | `list_items` | Normal use | Verify returned list contains correct item names |\n| 97 | `list_items` | Edge case | Verify list order matches insertion order |\n| 98 | `list_items` | Normal use | List updates after adding item |\n| 99 | `list_items` | Normal use | List updates after removing item |\n\n### `is_empty`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 100 | `is_empty` | Normal use | Check new/fresh order is empty |\n| 101 | `is_empty` | Normal use | Check order with items is not empty |\n| 102 | `is_empty` | Normal use | Check after adding item (False) |\n| 103 | `is_empty` | Normal use | Check after removing all items (True) |\n| 104 | `is_empty` | Normal use | Check after clear_order (True) |\n\n### Integration / Workflow Scenarios\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 105 | Multiple | Integration | Full order workflow: add items, apply discount, calculate total |\n| 106 | Multiple | Integration | Order modification: add, remove, recalculate |\n| 107 | Multiple | Integration | Multiple orders with same calculator instance |\n| 108 | Multiple | Integration | Verify state consistency across operations |\n| 109 | Multiple | Edge case | Large order with many items |\n| 110 | Multiple | Integration | Order exactly at free shipping threshold after discount |",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        self.assertEqual(calc.tax_rate, 0.15)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n\nclass TestAddItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_item_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_explicit_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_item_high_price(self):\n        self.calc.add_item(\"Luxury Item\", 10000.00)\n        self.assertEqual(self.calc.get_subtotal(), 10000.00)\n\n    def test_add_item_high_quantity(self):\n        self.calc.add_item(\"Bulk Item\", 1.00, 1000)\n        self.assertEqual(self.calc.total_items(), 1000)\n\n    def test_add_item_quantity_one_explicit(self):\n        self.calc.add_item(\"Item\", 5.00, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_add_item_very_small_price(self):\n        self.calc.add_item(\"Penny Item\", 0.01)\n        self.assertEqual(self.calc.get_subtotal(), 0.01)\n\n    def test_add_item_duplicate_name(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Apple\", 2.00)\n        items = self.calc.list_items()\n        self.assertEqual(items.count(\"Apple\"), 2)\n\n    def test_add_item_zero_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_negative_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative Item\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Zero Qty\", 5.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative Qty\", 5.00, -1)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 5.00)\n\n    def test_add_item_none_name(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(None, 5.00)\n\n    def test_add_item_non_string_name(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(123, 5.00)\n\n    def test_add_item_non_numeric_price(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", \"five\")\n\n    def test_add_item_non_integer_quantity(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", 5.00, 2.5)\n\n\nclass TestRemoveItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_item_verify_gone(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_single_item_becomes_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_first_of_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_remove_last_of_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.calc.remove_item(\"Orange\")\n        self.assertNotIn(\"Orange\", self.calc.list_items())\n\n    def test_remove_non_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitive(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"apple\")\n\n\nclass TestGetSubtotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_subtotal_single_item_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.get_subtotal(), 1.50)\n\n    def test_subtotal_single_item_quantity_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.get_subtotal(), 4.50)\n\n    def test_subtotal_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.get_subtotal(), 9.00)\n\n    def test_subtotal_empty_order(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_subtotal_precision(self):\n        self.calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.3, places=2)\n\n    def test_subtotal_updates_after_adding(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.get_subtotal(), 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(self.calc.get_subtotal(), 3.50)\n\n    def test_subtotal_updates_after_removing(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 2.00)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_discount_10_percent(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_50_percent(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero_percent(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_100_percent(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_100(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_precision(self):\n        result = self.calc.apply_discount(33.33, 15.0)\n        self.assertAlmostEqual(result, 28.3305, places=2)\n\n    def test_apply_discount_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_shipping_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_custom_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 15.0)\n\n    def test_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_tax_zero_amount(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_tax_default_rate(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_tax_precision(self):\n        result = self.calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_tax_very_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_tax_very_large_amount(self):\n        result = self.calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_without_discount(self):\n        self.calc.add_item(\"Item\", 50.0)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_free_shipping(self):\n        self.calc.add_item(\"Item\", 150.0)\n        total = self.calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_paid_shipping(self):\n        self.calc.add_item(\"Item\", 50.0)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_at_shipping_threshold(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_negative_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=-10.0)\n\n    def test_total_discount_greater_than_100(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=110.0)\n\n    def test_total_100_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_formula_verification(self):\n        self.calc.add_item(\"Item\", 80.0)\n        total = self.calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_precision_multiple_items(self):\n        self.calc.add_item(\"Item1\", 33.33)\n        self.calc.add_item(\"Item2\", 22.22, 2)\n        total = self.calc.calculate_total(discount=5.0)\n        subtotal = 33.33 + 44.44\n        discounted = subtotal * 0.95\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nclass TestTotalItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_items_single_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_multiple_different(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_total_items_updates_after_add(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_updates_after_remove(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.total_items(), 3)\n\n    def test_total_items_sum_of_quantities(self):\n        self.calc.add_item(\"A\", 1.0, 10)\n        self.calc.add_item(\"B\", 2.0, 20)\n        self.calc.add_item(\"C\", 3.0, 30)\n        self.assertEqual(self.calc.total_items(), 60)\n\n\nclass TestClearOrder(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_order_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_is_empty_true(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_subtotal_zero(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_clear_order_total_items_zero(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_clear_order_list_items_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.list_items(), [])\n\n\nclass TestListItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_items_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_single(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_correct_names(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_order_preserved(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        items = self.calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_updates_after_add(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(len(self.calc.list_items()), 1)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_list_items_updates_after_remove(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n\nclass TestIsEmpty(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_is_empty_new_order(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_add(self):\n        self.assertTrue(self.calc.is_empty())\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_remove_all(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_full_order_workflow(self):\n        self.calc.add_item(\"Laptop\", 999.99)\n        self.calc.add_item(\"Mouse\", 29.99, 2)\n        self.calc.add_item(\"Keyboard\", 79.99)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 1139.96, places=2)\n        total = self.calc.calculate_total(discount=10.0)\n        expected_discounted = subtotal * 0.9\n        expected_total = expected_discounted * 1.23\n        self.assertAlmostEqual(total, expected_total, places=2)\n\n    def test_order_modification(self):\n        self.calc.add_item(\"Item1\", 50.0)\n        self.calc.add_item(\"Item2\", 30.0)\n        self.assertEqual(self.calc.get_subtotal(), 80.0)\n        self.calc.remove_item(\"Item1\")\n        self.assertEqual(self.calc.get_subtotal(), 30.0)\n        self.calc.add_item(\"Item3\", 40.0)\n        self.assertEqual(self.calc.get_subtotal(), 70.0)\n\n    def test_multiple_orders_same_calculator(self):\n        self.calc.add_item(\"Order1Item\", 50.0)\n        total1 = self.calc.calculate_total()\n        self.calc.clear_order()\n        self.calc.add_item(\"Order2Item\", 100.0)\n        total2 = self.calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_state_consistency(self):\n        self.calc.add_item(\"Item1\", 25.0, 2)\n        self.calc.add_item(\"Item2\", 50.0)\n        self.assertEqual(self.calc.total_items(), 3)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        self.assertEqual(len(self.calc.list_items()), 2)\n        self.assertFalse(self.calc.is_empty())\n        self.calc.remove_item(\"Item1\")\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertEqual(self.calc.get_subtotal(), 50.0)\n        self.assertEqual(len(self.calc.list_items()), 1)\n\n    def test_large_order(self):\n        for i in range(100):\n            self.calc.add_item(f\"Item{i}\", 10.0, 5)\n        self.assertEqual(self.calc.total_items(), 500)\n        self.assertEqual(self.calc.get_subtotal(), 5000.0)\n        self.assertEqual(len(self.calc.list_items()), 100)\n\n    def test_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 110.0)\n        total_no_discount = self.calc.calculate_total(discount=0.0)\n        total_with_discount = self.calc.calculate_total(discount=10.0)\n        discounted_subtotal = 110.0 * 0.9\n        self.assertLess(discounted_subtotal, 100.0)\n        expected_with_shipping = (discounted_subtotal + 10.0) * 1.23\n        self.assertAlmostEqual(total_with_discount, expected_with_shipping, places=2)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.15)\n        self.assertEqual(calc.tax_rate, 0.15)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n\nclass TestAddItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_item_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_explicit_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_item_high_price(self):\n        self.calc.add_item(\"Luxury Item\", 10000.00)\n        self.assertEqual(self.calc.get_subtotal(), 10000.00)\n\n    def test_add_item_high_quantity(self):\n        self.calc.add_item(\"Bulk Item\", 1.00, 1000)\n        self.assertEqual(self.calc.total_items(), 1000)\n\n    def test_add_item_quantity_one_explicit(self):\n        self.calc.add_item(\"Item\", 5.00, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_add_item_very_small_price(self):\n        self.calc.add_item(\"Penny Item\", 0.01)\n        self.assertEqual(self.calc.get_subtotal(), 0.01)\n\n    def test_add_item_duplicate_name(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Apple\", 2.00)\n        items = self.calc.list_items()\n        self.assertEqual(items.count(\"Apple\"), 2)\n\n    def test_add_item_zero_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_negative_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative Item\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Zero Qty\", 5.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative Qty\", 5.00, -1)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 5.00)\n\n    def test_add_item_none_name(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(None, 5.00)\n\n    def test_add_item_non_string_name(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(123, 5.00)\n\n    def test_add_item_non_numeric_price(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", \"five\")\n\n    def test_add_item_non_integer_quantity(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", 5.00, 2.5)\n\n\nclass TestRemoveItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_item_verify_gone(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_single_item_becomes_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_first_of_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_remove_last_of_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.calc.remove_item(\"Orange\")\n        self.assertNotIn(\"Orange\", self.calc.list_items())\n\n    def test_remove_non_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_item_case_sensitive(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"apple\")\n\n\nclass TestGetSubtotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_subtotal_single_item_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.get_subtotal(), 1.50)\n\n    def test_subtotal_single_item_quantity_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.get_subtotal(), 4.50)\n\n    def test_subtotal_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.get_subtotal(), 9.00)\n\n    def test_subtotal_empty_order(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_subtotal_precision(self):\n        self.calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.3, places=2)\n\n    def test_subtotal_updates_after_adding(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.get_subtotal(), 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(self.calc.get_subtotal(), 3.50)\n\n    def test_subtotal_updates_after_removing(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 2.00)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_discount_10_percent(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_50_percent(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero_percent(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_100_percent(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_100(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_precision(self):\n        result = self.calc.apply_discount(33.33, 15.0)\n        self.assertAlmostEqual(result, 28.3305, places=2)\n\n    def test_apply_discount_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_shipping_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_custom_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 15.0)\n\n    def test_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 0.0)\n\n    def test_shipping_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_shipping_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_tax_zero_amount(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_tax_default_rate(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_tax_precision(self):\n        result = self.calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_tax_very_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_tax_very_large_amount(self):\n        result = self.calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_without_discount(self):\n        self.calc.add_item(\"Item\", 50.0)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_free_shipping(self):\n        self.calc.add_item(\"Item\", 150.0)\n        total = self.calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_paid_shipping(self):\n        self.calc.add_item(\"Item\", 50.0)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_at_shipping_threshold(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_negative_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=-10.0)\n\n    def test_total_discount_greater_than_100(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=110.0)\n\n    def test_total_100_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0)\n        total = self.calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_formula_verification(self):\n        self.calc.add_item(\"Item\", 80.0)\n        total = self.calc.calculate_total(discount=10.0)\n        subtotal = 80.0\n        discounted = subtotal * 0.9\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_precision_multiple_items(self):\n        self.calc.add_item(\"Item1\", 33.33)\n        self.calc.add_item(\"Item2\", 22.22, 2)\n        total = self.calc.calculate_total(discount=5.0)\n        subtotal = 33.33 + 44.44\n        discounted = subtotal * 0.95\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nclass TestTotalItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_items_single_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_multiple_different(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_total_items_updates_after_add(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_updates_after_remove(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.total_items(), 3)\n\n    def test_total_items_sum_of_quantities(self):\n        self.calc.add_item(\"A\", 1.0, 10)\n        self.calc.add_item(\"B\", 2.0, 20)\n        self.calc.add_item(\"C\", 3.0, 30)\n        self.assertEqual(self.calc.total_items(), 60)\n\n\nclass TestClearOrder(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_order_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_is_empty_true(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_subtotal_zero(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_clear_order_total_items_zero(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_clear_order_list_items_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.list_items(), [])\n\n\nclass TestListItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_items_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 3)\n\n    def test_list_items_single(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_correct_names(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n    def test_list_items_order_preserved(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        items = self.calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_updates_after_add(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(len(self.calc.list_items()), 1)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_list_items_updates_after_remove(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n\nclass TestIsEmpty(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_is_empty_new_order(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_add(self):\n        self.assertTrue(self.calc.is_empty())\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_remove_all(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_full_order_workflow(self):\n        self.calc.add_item(\"Laptop\", 999.99)\n        self.calc.add_item(\"Mouse\", 29.99, 2)\n        self.calc.add_item(\"Keyboard\", 79.99)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 1139.96, places=2)\n        total = self.calc.calculate_total(discount=10.0)\n        expected_discounted = subtotal * 0.9\n        expected_total = expected_discounted * 1.23\n        self.assertAlmostEqual(total, expected_total, places=2)\n\n    def test_order_modification(self):\n        self.calc.add_item(\"Item1\", 50.0)\n        self.calc.add_item(\"Item2\", 30.0)\n        self.assertEqual(self.calc.get_subtotal(), 80.0)\n        self.calc.remove_item(\"Item1\")\n        self.assertEqual(self.calc.get_subtotal(), 30.0)\n        self.calc.add_item(\"Item3\", 40.0)\n        self.assertEqual(self.calc.get_subtotal(), 70.0)\n\n    def test_multiple_orders_same_calculator(self):\n        self.calc.add_item(\"Order1Item\", 50.0)\n        total1 = self.calc.calculate_total()\n        self.calc.clear_order()\n        self.calc.add_item(\"Order2Item\", 100.0)\n        total2 = self.calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_state_consistency(self):\n        self.calc.add_item(\"Item1\", 25.0, 2)\n        self.calc.add_item(\"Item2\", 50.0)\n        self.assertEqual(self.calc.total_items(), 3)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        self.assertEqual(len(self.calc.list_items()), 2)\n        self.assertFalse(self.calc.is_empty())\n        self.calc.remove_item(\"Item1\")\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertEqual(self.calc.get_subtotal(), 50.0)\n        self.assertEqual(len(self.calc.list_items()), 1)\n\n    def test_large_order(self):\n        for i in range(100):\n            self.calc.add_item(f\"Item{i}\", 10.0, 5)\n        self.assertEqual(self.calc.total_items(), 500)\n        self.assertEqual(self.calc.get_subtotal(), 5000.0)\n        self.assertEqual(len(self.calc.list_items()), 100)\n\n    def test_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 110.0)\n        total_no_discount = self.calc.calculate_total(discount=0.0)\n        total_with_discount = self.calc.calculate_total(discount=10.0)\n        discounted_subtotal = 110.0 * 0.9\n        self.assertLess(discounted_subtotal, 100.0)\n        expected_with_shipping = (discounted_subtotal + 10.0) * 1.23\n        self.assertAlmostEqual(total_with_discount, expected_with_shipping, places=2)\n\n\nif __name__ == '__main__':\n    unittest.main()\n```",
    "total_response_time": 233.94782519340515,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}