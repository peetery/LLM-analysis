{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T20:59:33.566393",
  "response_time": 167.28100085258484,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_017\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor (`__init__`)\n- **Parameters**: `tax_rate` (default 0.23), `free_shipping_threshold` (default 100.0), `shipping_cost` (default 10.0)\n- **Edge cases**: Negative values, zero values, custom values\n- **State**: Initializes internal items collection\n\n### Public Methods\n\n1. **`add_item(name, price, quantity=1)`**\n   - Adds item with name, price, and optional quantity\n   - Edge cases: Empty name, negative/zero price, negative/zero quantity, duplicate names, float quantity\n\n2. **`remove_item(name)`**\n   - Removes item by name\n   - Edge cases: Non-existent item, empty string, case sensitivity\n\n3. **`get_subtotal()`**\n   - Returns sum of (price Ă— quantity) for all items\n   - Edge cases: Empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`**\n   - Applies discount to subtotal\n   - Edge cases: Discount > subtotal, negative discount, zero discount, percentage vs absolute interpretation\n\n5. **`calculate_shipping(discounted_subtotal)`**\n   - Returns shipping cost based on threshold\n   - Edge cases: Exactly at threshold, just below, just above, negative subtotal\n\n6. **`calculate_tax(amount)`**\n   - Calculates tax on amount\n   - Edge cases: Zero amount, negative amount, large amounts\n\n7. **`calculate_total(discount=0.0)`**\n   - Combines subtotal, discount, shipping, and tax\n   - Edge cases: Empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`**\n   - Returns total quantity of all items\n   - Edge cases: Empty order, multiple items with varying quantities\n\n9. **`clear_order()`**\n   - Removes all items\n   - Edge cases: Already empty, after adding items\n\n10. **`list_items()`**\n    - Returns list of item names\n    - Edge cases: Empty order, order of items\n\n11. **`is_empty()`**\n    - Returns boolean for empty state\n    - Edge cases: After init, after add, after remove, after clear\n\n### Key Testing Areas\n\n1. **State management**: Items collection integrity across operations\n2. **Calculations**: Mathematical correctness of subtotal, tax, shipping, total\n3. **Thresholds**: Free shipping boundary conditions\n4. **Input validation**: Invalid inputs (negative prices, empty names, etc.)\n5. **Exception handling**: Expected exceptions for invalid operations\n6. **Integration**: Combined operations (addâ†’removeâ†’calculate)\n7. **Precision**: Floating-point arithmetic handling\n\n### Likely Exception Scenarios\n- Removing non-existent item\n- Adding item with invalid price/quantity\n- Negative discount values\n- Invalid tax rates\n\nReady to generate test code on request.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** (normal use) - Verify default values for tax_rate, free_shipping_threshold, and shipping_cost are set correctly\n2. **Custom tax rate** (normal use) - Initialize with custom tax_rate and verify it's applied\n3. **Custom shipping threshold** (normal use) - Initialize with custom free_shipping_threshold\n4. **Custom shipping cost** (normal use) - Initialize with custom shipping_cost\n5. **All custom parameters** (normal use) - Initialize with all custom values\n6. **Zero tax rate** (edge case) - Initialize with tax_rate=0\n7. **Zero shipping threshold** (edge case) - All orders should qualify for free shipping\n8. **Zero shipping cost** (edge case) - Shipping is always free\n9. **Negative tax rate** (invalid input) - Should raise exception or handle gracefully\n10. **Negative shipping threshold** (invalid input) - Should raise exception or handle gracefully\n11. **Negative shipping cost** (invalid input) - Should raise exception or handle gracefully\n\n### `add_item`\n\n12. **Add single item** (normal use) - Add one item with default quantity\n13. **Add item with explicit quantity** (normal use) - Add item with quantity > 1\n14. **Add multiple different items** (normal use) - Add several distinct items\n15. **Add item with same name twice** (edge case) - Verify behavior (update or error)\n16. **Add item with zero price** (edge case) - Free item handling\n17. **Add item with negative price** (invalid input) - Should raise exception\n18. **Add item with zero quantity** (invalid input) - Should raise exception or reject\n19. **Add item with negative quantity** (invalid input) - Should raise exception\n20. **Add item with empty name** (invalid input) - Should raise exception\n21. **Add item with whitespace-only name** (invalid input) - Should raise exception\n22. **Add item with very large price** (edge case) - Verify no overflow issues\n23. **Add item with very large quantity** (edge case) - Verify no overflow issues\n24. **Add item with float quantity** (invalid input) - Should raise exception or truncate\n\n### `remove_item`\n\n25. **Remove existing item** (normal use) - Remove item that exists\n26. **Remove non-existent item** (exception) - Should raise KeyError or similar\n27. **Remove from empty order** (exception) - Should raise exception\n28. **Remove with empty string** (invalid input) - Should raise exception\n29. **Remove item, then verify subtotal updates** (integration) - Ensure calculations reflect removal\n30. **Remove item case sensitivity** (edge case) - Verify if \"Apple\" != \"apple\"\n31. **Remove all items one by one** (normal use) - Order should become empty\n\n### `get_subtotal`\n\n32. **Subtotal of empty order** (edge case) - Should return 0\n33. **Subtotal with single item, quantity 1** (normal use) - Returns item price\n34. **Subtotal with single item, quantity > 1** (normal use) - Returns price Ă— quantity\n35. **Subtotal with multiple items** (normal use) - Sum of all (price Ă— quantity)\n36. **Subtotal with mixed quantities** (normal use) - Correct calculation with varying quantities\n37. **Subtotal precision** (edge case) - Verify floating-point precision (e.g., 0.1 + 0.2)\n\n### `apply_discount`\n\n38. **Apply zero discount** (edge case) - Subtotal unchanged\n39. **Apply small discount** (normal use) - Correct reduction\n40. **Apply discount equal to subtotal** (edge case) - Result should be 0\n41. **Apply discount greater than subtotal** (edge case) - Should return 0 or raise exception\n42. **Apply negative discount** (invalid input) - Should raise exception or treat as surcharge\n43. **Apply discount to zero subtotal** (edge case) - Should return 0\n44. **Apply very large discount** (edge case) - Verify handling\n\n### `calculate_shipping`\n\n45. **Shipping below threshold** (normal use) - Should return shipping_cost\n46. **Shipping exactly at threshold** (edge case) - Should return 0 (free shipping)\n47. **Shipping above threshold** (normal use) - Should return 0 (free shipping)\n48. **Shipping just below threshold** (edge case) - e.g., 99.99 with threshold 100\n49. **Shipping just above threshold** (edge case) - e.g., 100.01 with threshold 100\n50. **Shipping with zero subtotal** (edge case) - Should return shipping_cost\n51. **Shipping with negative subtotal** (invalid input) - Undefined behavior, verify handling\n\n### `calculate_tax`\n\n52. **Tax on positive amount** (normal use) - Correct tax calculation\n53. **Tax on zero amount** (edge case) - Should return 0\n54. **Tax on negative amount** (invalid input) - Should raise exception or return negative\n55. **Tax precision** (edge case) - Verify rounding/precision handling\n56. **Tax with zero tax rate** (edge case) - Should return 0\n57. **Tax with 100% tax rate** (edge case) - Should double the amount\n\n### `calculate_total`\n\n58. **Total with no discount, below shipping threshold** (normal use) - subtotal + shipping + tax\n59. **Total with no discount, above shipping threshold** (normal use) - subtotal + tax (free shipping)\n60. **Total with discount applied** (normal use) - Correct order of operations\n61. **Total with discount achieving free shipping** (integration) - Discount brings subtotal below threshold, verify shipping\n62. **Total of empty order** (edge case) - Should return shipping cost + tax on shipping, or 0\n63. **Total with discount exceeding subtotal** (edge case) - Verify non-negative result\n64. **Total with zero tax rate** (edge case) - No tax applied\n65. **Total calculation order** (integration) - Verify: discount applied first, then shipping calculated, then tax on final amount\n\n### `total_items`\n\n66. **Total items in empty order** (edge case) - Should return 0\n67. **Total items with one item, quantity 1** (normal use) - Returns 1\n68. **Total items with one item, quantity > 1** (normal use) - Returns quantity\n69. **Total items with multiple items** (normal use) - Sum of all quantities\n70. **Total items after removal** (integration) - Correctly decrements\n\n### `clear_order`\n\n71. **Clear non-empty order** (normal use) - Order becomes empty\n72. **Clear already empty order** (edge case) - No error, remains empty\n73. **Clear then verify is_empty** (integration) - is_empty returns True\n74. **Clear then verify subtotal** (integration) - Subtotal returns 0\n75. **Clear then add new items** (integration) - Fresh start works correctly\n\n### `list_items`\n\n76. **List items in empty order** (edge case) - Returns empty list\n77. **List items with one item** (normal use) - Returns list with one name\n78. **List items with multiple items** (normal use) - Returns all names\n79. **List items order preservation** (edge case) - Verify if insertion order is maintained\n80. **List items after removal** (integration) - Removed item not in list\n\n### `is_empty`\n\n81. **is_empty on new order** (normal use) - Returns True\n82. **is_empty after adding item** (normal use) - Returns False\n83. **is_empty after removing all items** (integration) - Returns True\n84. **is_empty after clear** (integration) - Returns True\n85. **is_empty with item of quantity 0** (edge case) - Depends on add_item behavior\n\n### Integration/State Scenarios\n\n86. **Add, calculate, remove, recalculate** (integration) - All values update correctly\n87. **Multiple operations sequence** (integration) - add â†’ add â†’ remove â†’ get_subtotal â†’ calculate_total\n88. **Discount applied correctly in total flow** (integration) - Verify discountâ†’shippingâ†’tax order\n89. **Free shipping boundary with discount** (integration) - Subtotal 110, discount 15 â†’ shipping charged\n90. **Repeated clear and add cycles** (integration) - Order state remains consistent",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100), 23.0)\n        self.assertEqual(calc.calculate_shipping(50), 10.0)\n        self.assertEqual(calc.calculate_shipping(100), 0.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.calculate_tax(100), 10.0)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n        self.assertEqual(calc.calculate_shipping(49.99), 10.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.calculate_shipping(50), 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.calculate_tax(100), 15.0)\n        self.assertEqual(calc.calculate_shipping(199), 20.0)\n        self.assertEqual(calc.calculate_shipping(200), 0.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(0), 0.0)\n        self.assertEqual(calc.calculate_shipping(1), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_with_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_with_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"\")\n\n    def test_remove_item_updates_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_mixed_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 1)\n        calc.add_item(\"Banana\", 1.00, 5)\n        calc.add_item(\"Orange\", 3.00, 2)\n        self.assertEqual(calc.get_subtotal(), 13.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 100.0), 0.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(0.0, 10.0), 0.0)\n\n    def test_apply_discount_very_large(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1000000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-10.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_with_hundred_percent_tax_rate(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        self.assertEqual(calc.calculate_tax(100.0), 100.0)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_achieving_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=15.0)\n        expected = (95.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        self.assertEqual(total, 60.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        total = calc.calculate_total(discount=30.0)\n        discounted = 90.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_one_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_one_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_non_empty_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_is_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add_new_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 0.75, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_one_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_calculate_remove_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        subtotal1 = calc.get_subtotal()\n        self.assertEqual(subtotal1, 20.0)\n        calc.add_item(\"Banana\", 5.0, 4)\n        subtotal2 = calc.get_subtotal()\n        self.assertEqual(subtotal2, 40.0)\n        calc.remove_item(\"Apple\")\n        subtotal3 = calc.get_subtotal()\n        self.assertEqual(subtotal3, 20.0)\n\n    def test_integration_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        calc.add_item(\"Banana\", 15.0, 2)\n        calc.remove_item(\"Banana\")\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_discount_applied_in_total_flow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0)\n        total = calc.calculate_total(discount=50.0)\n        discounted = 150.0\n        shipping = 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_free_shipping_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=15.0)\n        discounted = 95.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_repeated_clear_and_add_cycles(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Banana\", 3.0, 4)\n        self.assertEqual(calc.get_subtotal(), 12.0)\n        calc.clear_order()\n        calc.add_item(\"Orange\", 2.0, 5)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n        self.assertEqual(calc.total_items(), 5)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100), 23.0)\n        self.assertEqual(calc.calculate_shipping(50), 10.0)\n        self.assertEqual(calc.calculate_shipping(100), 0.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.calculate_tax(100), 10.0)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n        self.assertEqual(calc.calculate_shipping(49.99), 10.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.calculate_shipping(50), 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.calculate_tax(100), 15.0)\n        self.assertEqual(calc.calculate_shipping(199), 20.0)\n        self.assertEqual(calc.calculate_shipping(200), 0.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(0), 0.0)\n        self.assertEqual(calc.calculate_shipping(1), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_with_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Invalid\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_whitespace_only_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 1.50)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_with_empty_string(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"\")\n\n    def test_remove_item_updates_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_mixed_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 1)\n        calc.add_item(\"Banana\", 1.00, 5)\n        calc.add_item(\"Orange\", 3.00, 2)\n        self.assertEqual(calc.get_subtotal(), 13.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 100.0), 0.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(0.0, 10.0), 0.0)\n\n    def test_apply_discount_very_large(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1000000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-10.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_with_hundred_percent_tax_rate(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        self.assertEqual(calc.calculate_tax(100.0), 100.0)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_achieving_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=15.0)\n        expected = (95.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        self.assertEqual(total, 60.0)\n\n    def test_calculate_total_order_of_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        total = calc.calculate_total(discount=30.0)\n        discounted = 90.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_one_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_one_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_non_empty_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_is_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_then_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_clear_then_add_new_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 0.75, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_one_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items[0], \"Apple\")\n        self.assertEqual(items[1], \"Banana\")\n        self.assertEqual(items[2], \"Orange\")\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_add_calculate_remove_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        subtotal1 = calc.get_subtotal()\n        self.assertEqual(subtotal1, 20.0)\n        calc.add_item(\"Banana\", 5.0, 4)\n        subtotal2 = calc.get_subtotal()\n        self.assertEqual(subtotal2, 40.0)\n        calc.remove_item(\"Apple\")\n        subtotal3 = calc.get_subtotal()\n        self.assertEqual(subtotal3, 20.0)\n\n    def test_integration_multiple_operations_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        calc.add_item(\"Banana\", 15.0, 2)\n        calc.remove_item(\"Banana\")\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 50.0)\n        total = calc.calculate_total(discount=10.0)\n        expected = (40.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_discount_applied_in_total_flow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0)\n        total = calc.calculate_total(discount=50.0)\n        discounted = 150.0\n        shipping = 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_free_shipping_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total = calc.calculate_total(discount=15.0)\n        discounted = 95.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_repeated_clear_and_add_cycles(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        calc.add_item(\"Banana\", 3.0, 4)\n        self.assertEqual(calc.get_subtotal(), 12.0)\n        calc.clear_order()\n        calc.add_item(\"Orange\", 2.0, 5)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n        self.assertEqual(calc.total_items(), 5)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 167.28100085258484,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}