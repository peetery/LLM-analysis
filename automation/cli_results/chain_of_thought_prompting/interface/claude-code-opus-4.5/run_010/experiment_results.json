{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T10:13:15.100690",
  "response_time": 165.1918363571167,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_010\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating unit tests.\n\n## Class Analysis\n\n### Class Purpose\n`OrderCalculator` is an order management class that handles items in a shopping cart, calculates subtotals, applies discounts, determines shipping costs, calculates taxes, and computes final totals.\n\n### Constructor Parameters\n- `tax_rate` (default: 0.23) - 23% tax rate\n- `free_shipping_threshold` (default: 100.0) - orders above this get free shipping\n- `shipping_cost` (default: 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate items, large quantities\n\n2. **`remove_item(name)`** - Removes item from order\n   - Edge cases: non-existent item, empty order, case sensitivity\n\n3. **`get_subtotal()`** - Returns sum of item prices Ă— quantities\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Edge cases: zero discount, 100% discount, discount > subtotal, negative discount, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determines shipping cost\n   - Edge cases: exactly at threshold, just below/above threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, large amounts\n\n7. **`calculate_total(discount=0.0)`** - Full calculation: subtotal - discount + shipping + tax\n   - Edge cases: empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Edge cases: empty order, single item, multiple items with various quantities\n\n9. **`clear_order()`** - Empties the order\n   - Edge cases: already empty order, order with items\n\n10. **`list_items()`** - Returns list of item names\n    - Edge cases: empty order, order with items, duplicate handling\n\n11. **`is_empty()`** - Checks if order has no items\n    - Edge cases: empty order, non-empty order\n\n### Key Testing Considerations\n\n- **State management**: Order maintains internal state (items list)\n- **Numeric precision**: Float calculations for prices, taxes, discounts\n- **Boundary conditions**: Free shipping threshold, 0% and 100% discounts\n- **Input validation**: Negative values, zero values, invalid types\n- **Exception handling**: What errors are raised for invalid inputs?\n- **Integration**: `calculate_total()` combines multiple methods internally\n\n### Potential Test Categories\n\n1. **Initialization tests** - default and custom constructor values\n2. **Item management tests** - add, remove, clear, list operations\n3. **Calculation tests** - subtotal, discount, shipping, tax, total\n4. **Edge case tests** - boundary values, empty states\n5. **Error handling tests** - invalid inputs, exceptions\n6. **Integration tests** - full workflow scenarios\n\nI'm ready to generate the test code when requested.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** (normal use) - Verify default values: tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom tax rate** (normal use) - Initialize with custom tax rate and verify it's stored\n3. **Custom shipping threshold** (normal use) - Initialize with custom free_shipping_threshold\n4. **Custom shipping cost** (normal use) - Initialize with custom shipping_cost\n5. **All custom parameters** (normal use) - Initialize with all custom values\n6. **Zero tax rate** (edge case) - Initialize with tax_rate=0\n7. **Zero shipping threshold** (edge case) - All orders get free shipping\n8. **Zero shipping cost** (edge case) - Shipping is always free\n9. **Negative tax rate** (invalid input) - Should raise exception or handle gracefully\n10. **Negative shipping threshold** (invalid input) - Invalid threshold value\n11. **Negative shipping cost** (invalid input) - Invalid shipping cost\n\n### `add_item`\n\n12. **Add single item** (normal use) - Add one item with default quantity\n13. **Add item with quantity** (normal use) - Add item with explicit quantity > 1\n14. **Add multiple different items** (normal use) - Add several distinct items\n15. **Add duplicate item** (edge case) - Add same item name twice, verify behavior\n16. **Add item with zero price** (edge case) - Free item\n17. **Add item with negative price** (invalid input) - Should raise exception\n18. **Add item with zero quantity** (edge case) - Should this be rejected?\n19. **Add item with negative quantity** (invalid input) - Should raise exception\n20. **Add item with empty name** (invalid input) - Empty string as name\n21. **Add item with whitespace name** (edge case) - Name with only spaces\n22. **Add item with very large price** (edge case) - Test numeric limits\n23. **Add item with very large quantity** (edge case) - Test numeric limits\n24. **Add item with float quantity** (invalid input) - Non-integer quantity\n25. **Add item with non-string name** (invalid input) - Wrong type for name\n26. **Add item with non-numeric price** (invalid input) - Wrong type for price\n\n### `remove_item`\n\n27. **Remove existing item** (normal use) - Remove item that exists\n28. **Remove non-existent item** (invalid input) - Should raise exception or return gracefully\n29. **Remove from empty order** (edge case) - No items to remove\n30. **Remove item case sensitivity** (edge case) - Test if \"Apple\" and \"apple\" are same\n31. **Remove item with whitespace variations** (edge case) - \"item\" vs \" item \"\n32. **Remove and verify order state** (normal use) - Confirm item is gone from list\n\n### `get_subtotal`\n\n33. **Subtotal empty order** (edge case) - Should return 0\n34. **Subtotal single item quantity 1** (normal use) - price Ă— 1\n35. **Subtotal single item quantity > 1** (normal use) - price Ă— quantity\n36. **Subtotal multiple items** (normal use) - Sum of all price Ă— quantity\n37. **Subtotal with zero-price item** (edge case) - Include free items\n38. **Subtotal precision** (edge case) - Test float precision (e.g., 0.1 + 0.2)\n\n### `apply_discount`\n\n39. **Apply zero discount** (edge case) - Subtotal unchanged\n40. **Apply small discount** (normal use) - Typical discount amount\n41. **Apply discount equal to subtotal** (edge case) - Result should be 0\n42. **Apply discount greater than subtotal** (edge case) - Should result be 0 or negative?\n43. **Apply negative discount** (invalid input) - Should raise exception\n44. **Apply discount to zero subtotal** (edge case) - 0 - discount\n45. **Apply discount to negative subtotal** (invalid input) - Invalid subtotal\n46. **Apply percentage-like discount** (normal use) - Large discount value\n47. **Apply discount precision** (edge case) - Float precision handling\n\n### `calculate_shipping`\n\n48. **Shipping below threshold** (normal use) - Should return shipping_cost\n49. **Shipping exactly at threshold** (edge case) - Boundary: should shipping be free?\n50. **Shipping above threshold** (normal use) - Should return 0 (free shipping)\n51. **Shipping for zero subtotal** (edge case) - Empty order shipping\n52. **Shipping for negative subtotal** (edge case) - After large discount\n53. **Shipping just below threshold** (edge case) - 99.99 when threshold is 100\n54. **Shipping just above threshold** (edge case) - 100.01 when threshold is 100\n\n### `calculate_tax`\n\n55. **Tax on positive amount** (normal use) - amount Ă— tax_rate\n56. **Tax on zero amount** (edge case) - Should return 0\n57. **Tax on negative amount** (edge case) - Refund scenario?\n58. **Tax precision** (edge case) - Float multiplication precision\n59. **Tax with zero tax rate** (edge case) - No tax scenario\n60. **Tax on large amount** (edge case) - Numeric limits\n\n### `calculate_total`\n\n61. **Total empty order no discount** (edge case) - Should handle gracefully\n62. **Total single item no discount** (normal use) - subtotal + shipping + tax\n63. **Total multiple items no discount** (normal use) - Full calculation\n64. **Total with discount** (normal use) - Discount applied before shipping/tax\n65. **Total qualifying for free shipping** (normal use) - No shipping added\n66. **Total not qualifying for free shipping** (normal use) - Shipping added\n67. **Total with 100% discount** (edge case) - Discount equals subtotal\n68. **Total with discount exceeding subtotal** (edge case) - Negative before shipping?\n69. **Total with negative discount** (invalid input) - Should raise exception\n70. **Total precision** (edge case) - Accumulated float errors\n71. **Total order of operations** (normal use) - Verify: (subtotal - discount) + shipping, then tax\n\n### `total_items`\n\n72. **Total items empty order** (edge case) - Should return 0\n73. **Total items single item quantity 1** (normal use) - Returns 1\n74. **Total items single item quantity > 1** (normal use) - Returns quantity\n75. **Total items multiple items** (normal use) - Sum of all quantities\n76. **Total items after removal** (normal use) - Count updates correctly\n\n### `clear_order`\n\n77. **Clear non-empty order** (normal use) - All items removed\n78. **Clear empty order** (edge case) - No error, stays empty\n79. **Clear and verify state** (normal use) - is_empty returns True after clear\n80. **Clear and verify subtotal** (normal use) - Subtotal is 0 after clear\n\n### `list_items`\n\n81. **List empty order** (edge case) - Returns empty list\n82. **List single item** (normal use) - Returns list with one name\n83. **List multiple items** (normal use) - Returns all item names\n84. **List order preservation** (edge case) - Items in insertion order?\n85. **List after removal** (normal use) - Removed item not in list\n86. **List return type** (normal use) - Returns List[str]\n\n### `is_empty`\n\n87. **Is empty on new order** (normal use) - Fresh order is empty\n88. **Is empty after adding item** (normal use) - Returns False\n89. **Is empty after removing all items** (normal use) - Returns True\n90. **Is empty after clear** (normal use) - Returns True\n\n### Integration/Workflow Scenarios\n\n91. **Full order workflow** (integration) - Add items, get subtotal, apply discount, calculate total\n92. **Add then remove same item** (integration) - Order returns to empty state\n93. **Multiple discounts** (integration) - Apply discount, then calculate total with another discount\n94. **Threshold boundary with discount** (integration) - Order above threshold, discount brings below\n95. **State consistency** (integration) - Multiple operations maintain consistent state",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 10.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 4)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_with_zero_price_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 5)\n        calc.add_item(\"PaidItem\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1)\n        calc.add_item(\"Item2\", 0.2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.33, 10.11)\n        self.assertAlmostEqual(result, 90.22, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_total_empty_order_no_discount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertAlmostEqual(result, 12.30, places=2)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0)\n        calc.add_item(\"Item2\", 40.0)\n        result = calc.calculate_total()\n        expected = (70.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0)\n        result = calc.calculate_total(discount=10.0)\n        expected = (70.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_qualifying_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        result = calc.calculate_total()\n        expected = 120.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_not_qualifying_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        result = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 0.75, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 0.75, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_is_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        discounted = calc.apply_discount(subtotal, 50.0)\n        self.assertEqual(discounted, 500.0)\n        shipping = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_integration_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        shipping_before = calc.calculate_shipping(120.0)\n        self.assertEqual(shipping_before, 0.0)\n        discounted = calc.apply_discount(120.0, 30.0)\n        shipping_after = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping_after, 10.0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 2)\n        calc.add_item(\"B\", 20.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertEqual(len(calc.list_items()), 2)\n        calc.remove_item(\"A\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        self.assertEqual(len(calc.list_items()), 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-10)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.add_item(\"Orange\", 2.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.0)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 10.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 4)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_with_zero_price_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 5)\n        calc.add_item(\"PaidItem\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1)\n        calc.add_item(\"Item2\", 0.2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_equal_to_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(50.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.33, 10.11)\n        self.assertAlmostEqual(result, 90.22, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_tax_with_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_total_empty_order_no_discount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        self.assertAlmostEqual(result, 12.30, places=2)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0)\n        calc.add_item(\"Item2\", 40.0)\n        result = calc.calculate_total()\n        expected = (70.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 80.0)\n        result = calc.calculate_total(discount=10.0)\n        expected = (70.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_qualifying_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        result = calc.calculate_total()\n        expected = 120.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_not_qualifying_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        result = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_discount_exceeding_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        result = calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(discount=-10.0)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 0.75, 2)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 0.75, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_is_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        discounted = calc.apply_discount(subtotal, 50.0)\n        self.assertEqual(discounted, 500.0)\n        shipping = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = calc.calculate_total(discount=50.0)\n        expected = 500.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_integration_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0)\n        shipping_before = calc.calculate_shipping(120.0)\n        self.assertEqual(shipping_before, 0.0)\n        discounted = calc.apply_discount(120.0, 30.0)\n        shipping_after = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping_after, 10.0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 2)\n        calc.add_item(\"B\", 20.0, 1)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        self.assertEqual(len(calc.list_items()), 2)\n        calc.remove_item(\"A\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        self.assertEqual(len(calc.list_items()), 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 165.1918363571167,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}