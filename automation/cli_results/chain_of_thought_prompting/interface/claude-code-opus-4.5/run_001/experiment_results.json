{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T01:47:26.835955",
  "response_time": 158.2140817642212,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_001\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor: `__init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)`\n- Initializes calculator with configurable tax rate, free shipping threshold, and shipping cost\n- All parameters have defaults\n- Edge cases: negative values, zero values, custom values\n\n### Methods to Test:\n\n1. **`add_item(name, price, quantity=1)`**\n   - Adds item with name, price, and optional quantity\n   - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate names, large quantities\n\n2. **`remove_item(name)`**\n   - Removes item by name\n   - Edge cases: non-existent item, empty order, case sensitivity\n\n3. **`get_subtotal()`**\n   - Returns sum of (price Ă— quantity) for all items\n   - Edge cases: empty order, single item, multiple items, floating point precision\n\n4. **`apply_discount(subtotal, discount)`**\n   - Applies discount to subtotal\n   - Edge cases: zero discount, 100% discount, discount > 100%, negative discount, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`**\n   - Returns shipping cost based on threshold\n   - Edge cases: exactly at threshold, just below/above threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`**\n   - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, large amounts, floating point precision\n\n7. **`calculate_total(discount=0.0)`**\n   - Combines subtotal, discount, shipping, and tax\n   - Edge cases: empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`**\n   - Returns total quantity of all items\n   - Edge cases: empty order, single item, multiple items with various quantities\n\n9. **`clear_order()`**\n   - Removes all items\n   - Edge cases: already empty order, order with items\n\n10. **`list_items()`**\n    - Returns list of item names\n    - Edge cases: empty order, single item, multiple items, order of items\n\n11. **`is_empty()`**\n    - Returns boolean indicating if order has no items\n    - Edge cases: empty order, after adding/removing items\n\n### Key Test Categories:\n- **Initialization**: Default and custom constructor parameters\n- **State management**: Adding, removing, clearing items\n- **Calculations**: Subtotal, discount, shipping, tax, total\n- **Boundary conditions**: Thresholds, zero values, empty states\n- **Error handling**: Invalid inputs, missing items\n- **Integration**: Multiple operations in sequence\n\n### Potential Exception Scenarios:\n- Removing non-existent items (KeyError or ValueError)\n- Invalid price/quantity (ValueError)\n- Invalid discount percentages\n\nI'm now ready to generate the test code.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** (normal use) - Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0 are set correctly\n2. **Custom tax rate** (normal use) - Initialize with custom tax rate and verify it's applied\n3. **Custom shipping threshold** (normal use) - Initialize with custom free_shipping_threshold\n4. **Custom shipping cost** (normal use) - Initialize with custom shipping_cost\n5. **All custom parameters** (normal use) - Initialize with all custom values\n6. **Zero tax rate** (edge case) - Initialize with tax_rate=0\n7. **Zero shipping threshold** (edge case) - All orders get free shipping\n8. **Zero shipping cost** (edge case) - Shipping is always free\n9. **Negative tax rate** (invalid input) - May raise exception or behave unexpectedly\n10. **Negative shipping threshold** (invalid input) - Test behavior with negative threshold\n11. **Negative shipping cost** (invalid input) - Test behavior with negative cost\n\n### `add_item`\n\n12. **Add single item with default quantity** (normal use) - Add item with name and price, quantity defaults to 1\n13. **Add single item with explicit quantity** (normal use) - Add item with specified quantity > 1\n14. **Add multiple different items** (normal use) - Add several distinct items\n15. **Add item with same name twice** (edge case) - Test duplicate handling (replace or accumulate?)\n16. **Add item with zero price** (edge case) - Free item\n17. **Add item with negative price** (invalid input) - Should raise exception or reject\n18. **Add item with zero quantity** (edge case) - Item with quantity 0\n19. **Add item with negative quantity** (invalid input) - Should raise exception or reject\n20. **Add item with empty name** (invalid input) - Empty string as name\n21. **Add item with very large quantity** (edge case) - Test with large numbers\n22. **Add item with very large price** (edge case) - Test with large price values\n23. **Add item with float quantity** (invalid input) - Quantity should be integer\n\n### `remove_item`\n\n24. **Remove existing item** (normal use) - Remove item that exists in order\n25. **Remove non-existent item** (exception) - Should raise KeyError or ValueError\n26. **Remove from empty order** (exception) - Should raise exception\n27. **Remove item then verify subtotal updates** (normal use) - State consistency after removal\n28. **Remove all items one by one** (normal use) - Order becomes empty\n29. **Case sensitivity in removal** (edge case) - Test if name matching is case-sensitive\n\n### `get_subtotal`\n\n30. **Subtotal of empty order** (edge case) - Should return 0\n31. **Subtotal with single item quantity 1** (normal use) - Returns item price\n32. **Subtotal with single item quantity > 1** (normal use) - Returns price Ă— quantity\n33. **Subtotal with multiple items** (normal use) - Sum of all (price Ă— quantity)\n34. **Subtotal floating point precision** (edge case) - Verify correct handling of decimals\n35. **Subtotal after adding and removing items** (normal use) - State consistency\n\n### `apply_discount`\n\n36. **Apply zero discount** (edge case) - Returns subtotal unchanged\n37. **Apply typical discount (e.g., 10%)** (normal use) - Returns reduced subtotal\n38. **Apply 100% discount** (edge case) - Returns 0\n39. **Apply discount > 100%** (invalid input) - Should handle or raise exception\n40. **Apply negative discount** (invalid input) - Should handle or raise exception\n41. **Apply discount to zero subtotal** (edge case) - Returns 0\n42. **Apply discount to negative subtotal** (invalid input) - Test behavior\n43. **Discount with floating point values** (edge case) - Test precision\n\n### `calculate_shipping`\n\n44. **Shipping below threshold** (normal use) - Returns shipping_cost\n45. **Shipping exactly at threshold** (edge case) - Should be free (â‰Ą threshold)\n46. **Shipping above threshold** (normal use) - Returns 0 (free shipping)\n47. **Shipping with zero subtotal** (edge case) - Below threshold, returns shipping_cost\n48. **Shipping with negative subtotal** (invalid input) - Test behavior\n49. **Shipping just below threshold** (boundary) - e.g., 99.99 when threshold is 100\n\n### `calculate_tax`\n\n50. **Tax on positive amount** (normal use) - Returns amount Ă— tax_rate\n51. **Tax on zero amount** (edge case) - Returns 0\n52. **Tax on negative amount** (invalid input) - Test behavior\n53. **Tax with default rate** (normal use) - Verify 23% calculation\n54. **Tax with custom rate** (normal use) - Verify custom rate applied\n55. **Tax with zero rate** (edge case) - Returns 0\n56. **Tax floating point precision** (edge case) - Verify decimal handling\n\n### `calculate_total`\n\n57. **Total with no discount, below shipping threshold** (normal use) - subtotal + shipping + tax\n58. **Total with no discount, above shipping threshold** (normal use) - subtotal + tax (free shipping)\n59. **Total with discount applied** (normal use) - Discounted subtotal + shipping/tax\n60. **Total of empty order** (edge case) - Should return 0 or just shipping\n61. **Total with 100% discount** (edge case) - Only shipping and tax on remaining\n62. **Total exactly at shipping threshold after discount** (boundary) - Test threshold boundary\n63. **Total integration test** (normal use) - Full workflow with multiple items and discount\n\n### `total_items`\n\n64. **Total items in empty order** (edge case) - Returns 0\n65. **Total items with single item quantity 1** (normal use) - Returns 1\n66. **Total items with single item quantity > 1** (normal use) - Returns quantity\n67. **Total items with multiple items** (normal use) - Sum of all quantities\n68. **Total items after removal** (normal use) - Updates correctly\n\n### `clear_order`\n\n69. **Clear order with items** (normal use) - Order becomes empty\n70. **Clear already empty order** (edge case) - No error, remains empty\n71. **Verify state after clear** (normal use) - is_empty returns True, subtotal is 0\n\n### `list_items`\n\n72. **List items from empty order** (edge case) - Returns empty list\n73. **List items with single item** (normal use) - Returns list with one name\n74. **List items with multiple items** (normal use) - Returns all names\n75. **List items preserves order** (edge case) - Test if insertion order is maintained\n76. **List items returns copy** (edge case) - Modifying returned list doesn't affect order\n\n### `is_empty`\n\n77. **Empty order is empty** (normal use) - Returns True for new order\n78. **Order with items not empty** (normal use) - Returns False after adding item\n79. **Order empty after clear** (normal use) - Returns True after clear_order\n80. **Order empty after removing all items** (normal use) - Returns True\n\n### Integration/Workflow Scenarios\n\n81. **Full purchase workflow** (integration) - Add items, apply discount, calculate total\n82. **Modify order and recalculate** (integration) - Add, remove, change, verify totals\n83. **Multiple discounts in sequence** (integration) - Apply different discounts to same order\n84. **Order state persistence** (integration) - Multiple operations maintain consistent state",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 2.00, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"InvalidItem\", -5.0, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50, 1)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 1000000.00, 1)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_updates_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"apple\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_typical(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10.0)\n        self.assertEqual(result, -90.0)\n\n    def test_apply_discount_floating_point(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(99.99, 15.5)\n        self.assertAlmostEqual(result, 84.49155, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_default_rate(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(200.0)\n        self.assertEqual(result, 46.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 60.0, 2)\n        total = calc.calculate_total(0.0)\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(10.0)\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total(0.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 4)\n        total = calc.calculate_total(50.0)\n        discounted = 100.0\n        shipping = 0.0\n        tax = discounted * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_integration(self):\n        calc = OrderCalculator(tax_rate=0.20, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Apple\", 10.0, 3)\n        calc.add_item(\"Banana\", 5.0, 4)\n        total = calc.calculate_total(10.0)\n        subtotal = 30.0 + 20.0\n        discounted = 45.0\n        shipping = 5.0\n        tax = (discounted + shipping) * 0.20\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_verification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_preserves_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        items = calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_purchase_workflow(self):\n        calc = OrderCalculator(tax_rate=0.20, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        calc.add_item(\"Keyboard\", 75.0, 1)\n        self.assertEqual(calc.get_subtotal(), 625.0)\n        self.assertEqual(calc.total_items(), 4)\n        total = calc.calculate_total(10.0)\n        discounted = 562.5\n        shipping = 0.0\n        tax = discounted * 0.20\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_modify_order_and_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 4)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        calc.add_item(\"Orange\", 8.0, 3)\n        self.assertEqual(calc.get_subtotal(), 44.0)\n\n    def test_multiple_discounts_in_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total1 = calc.calculate_total(10.0)\n        total2 = calc.calculate_total(20.0)\n        total3 = calc.calculate_total(0.0)\n        self.assertGreater(total3, total1)\n        self.assertGreater(total1, total2)\n\n    def test_order_state_persistence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 2)\n        calc.calculate_total(5.0)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 2.00, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"InvalidItem\", -5.0, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50, 1)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 1000000.00, 1)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((TypeError, ValueError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_updates_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_remove_all_items_one_by_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises((KeyError, ValueError)):\n            calc.remove_item(\"apple\")\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        self.assertEqual(calc.get_subtotal(), 6.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 1)\n        calc.add_item(\"Item2\", 0.2, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 4)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_typical(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10.0)\n        self.assertEqual(result, -90.0)\n\n    def test_apply_discount_floating_point(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(99.99, 15.5)\n        self.assertAlmostEqual(result, 84.49155, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_default_rate(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(200.0)\n        self.assertEqual(result, 46.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 25.0, 2)\n        total = calc.calculate_total(0.0)\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 60.0, 2)\n        total = calc.calculate_total(0.0)\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(10.0)\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total(0.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 2)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0, 4)\n        total = calc.calculate_total(50.0)\n        discounted = 100.0\n        shipping = 0.0\n        tax = discounted * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_integration(self):\n        calc = OrderCalculator(tax_rate=0.20, free_shipping_threshold=50.0, shipping_cost=5.0)\n        calc.add_item(\"Apple\", 10.0, 3)\n        calc.add_item(\"Banana\", 5.0, 4)\n        total = calc.calculate_total(10.0)\n        subtotal = 30.0 + 20.0\n        discounted = 45.0\n        shipping = 5.0\n        tax = (discounted + shipping) * 0.20\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_state_verification(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.get_subtotal(), 0.0)\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_preserves_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        items = calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_full_purchase_workflow(self):\n        calc = OrderCalculator(tax_rate=0.20, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        calc.add_item(\"Keyboard\", 75.0, 1)\n        self.assertEqual(calc.get_subtotal(), 625.0)\n        self.assertEqual(calc.total_items(), 4)\n        total = calc.calculate_total(10.0)\n        discounted = 562.5\n        shipping = 0.0\n        tax = discounted * 0.20\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_modify_order_and_recalculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 4)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(calc.get_subtotal(), 20.0)\n        calc.add_item(\"Orange\", 8.0, 3)\n        self.assertEqual(calc.get_subtotal(), 44.0)\n\n    def test_multiple_discounts_in_sequence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total1 = calc.calculate_total(10.0)\n        total2 = calc.calculate_total(20.0)\n        total3 = calc.calculate_total(0.0)\n        self.assertGreater(total3, total1)\n        self.assertGreater(total1, total2)\n\n    def test_order_state_persistence(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 2)\n        calc.calculate_total(5.0)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 2)\n        self.assertEqual(calc.get_subtotal(), 20.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 158.2140817642212,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}