{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T09:49:15.651532",
  "response_time": 211.84281659126282,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_009\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor: `__init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)`\n- **Parameters**: Three optional parameters with defaults\n- **Test considerations**: Default values, custom values, edge cases (zero, negative, very large values)\n\n### Public Methods:\n\n1. **`add_item(name: str, price: float, quantity: int = 1)`**\n   - Adds item with name, price, and optional quantity\n   - Test: valid items, duplicate names, invalid prices (negative, zero), invalid quantities (zero, negative), edge cases for types\n\n2. **`remove_item(name: str)`**\n   - Removes item by name\n   - Test: existing item, non-existing item, empty order, case sensitivity\n\n3. **`get_subtotal() -> float`**\n   - Returns sum of (price Ă— quantity) for all items\n   - Test: empty order, single item, multiple items, precision handling\n\n4. **`apply_discount(subtotal: float, discount: float) -> float`**\n   - Applies discount to subtotal\n   - Test: zero discount, valid discount (0-100%), 100% discount, invalid discount (negative, >100%), edge cases\n\n5. **`calculate_shipping(discounted_subtotal: float) -> float`**\n   - Returns shipping cost based on threshold\n   - Test: below threshold, at threshold, above threshold, zero/negative subtotal\n\n6. **`calculate_tax(amount: float) -> float`**\n   - Calculates tax on amount\n   - Test: positive amount, zero amount, negative amount, precision\n\n7. **`calculate_total(discount: float = 0.0) -> float`**\n   - Full calculation: subtotal â†’ discount â†’ shipping â†’ tax\n   - Test: no discount, with discount, free shipping qualification, empty order\n\n8. **`total_items() -> int`**\n   - Returns total count of all items (sum of quantities)\n   - Test: empty, single item, multiple items, items with quantity > 1\n\n9. **`clear_order()`**\n   - Removes all items\n   - Test: clearing non-empty order, clearing already empty order\n\n10. **`list_items() -> List[str]`**\n    - Returns list of item names\n    - Test: empty order, single item, multiple items, order preservation\n\n11. **`is_empty() -> bool`**\n    - Checks if order has no items\n    - Test: empty order, non-empty order, after clear\n\n### Key Test Categories Identified:\n\n1. **Initialization tests**: Default and custom constructor parameters\n2. **Item management**: add, remove, clear operations\n3. **Calculations**: subtotal, discount, shipping, tax, total\n4. **State queries**: total_items, list_items, is_empty\n5. **Edge cases**: empty orders, boundary values, precision\n6. **Invalid inputs**: negative values, out-of-range discounts, non-existent items\n7. **Integration scenarios**: complete order workflows\n\n### Dependencies:\n- `Item` is a `TypedDict` - likely structure: `{\"name\": str, \"price\": float, \"quantity\": int}`\n- Uses standard Python types, no external dependencies expected\n\nReady to generate test scenarios and code in the next step.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** (normal) - Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom tax rate** (normal) - Initialize with custom tax rate and verify it's applied\n3. **Custom shipping threshold** (normal) - Initialize with custom free_shipping_threshold\n4. **Custom shipping cost** (normal) - Initialize with custom shipping_cost\n5. **Zero tax rate** (edge case) - Tax rate of 0.0 should result in no tax\n6. **Zero shipping cost** (edge case) - Shipping cost of 0.0 means free shipping always\n7. **Zero shipping threshold** (edge case) - Threshold of 0.0 means always free shipping\n8. **Negative tax rate** (invalid input) - Should handle or reject negative tax rate\n9. **Negative shipping threshold** (invalid input) - Should handle or reject negative threshold\n10. **Negative shipping cost** (invalid input) - Should handle or reject negative cost\n\n### `add_item`\n\n11. **Add single item with default quantity** (normal) - Add item with name, price, quantity=1\n12. **Add single item with explicit quantity** (normal) - Add item with quantity > 1\n13. **Add multiple different items** (normal) - Add several distinct items\n14. **Add item with same name twice** (edge case) - Behavior when adding duplicate name (replace or error?)\n15. **Add item with zero price** (edge case) - Price of 0.0, should be valid (free item)\n16. **Add item with negative price** (invalid input) - Should reject or raise exception\n17. **Add item with zero quantity** (invalid input) - Should reject quantity of 0\n18. **Add item with negative quantity** (invalid input) - Should reject negative quantity\n19. **Add item with empty name** (invalid input) - Empty string as name\n20. **Add item with very large price** (edge case) - Test with very large float value\n21. **Add item with very large quantity** (edge case) - Test with very large integer\n22. **Add item with float quantity** (invalid input) - Quantity must be int, not float\n\n### `remove_item`\n\n23. **Remove existing item** (normal) - Remove item that exists in order\n24. **Remove non-existing item** (invalid input) - Should handle gracefully or raise exception\n25. **Remove from empty order** (edge case) - Attempt removal when order is empty\n26. **Remove item case sensitivity** (edge case) - Check if name matching is case-sensitive\n27. **Remove item then re-add** (normal) - Verify item can be added again after removal\n28. **Remove one of multiple items** (normal) - Other items should remain\n\n### `get_subtotal`\n\n29. **Subtotal of empty order** (edge case) - Should return 0.0\n30. **Subtotal with single item quantity=1** (normal) - Returns price\n31. **Subtotal with single item quantity>1** (normal) - Returns price Ă— quantity\n32. **Subtotal with multiple items** (normal) - Sum of all (price Ă— quantity)\n33. **Subtotal precision** (edge case) - Verify floating-point precision handling\n34. **Subtotal after removing item** (normal) - Recalculates correctly\n\n### `apply_discount`\n\n35. **Zero discount** (normal) - Returns subtotal unchanged\n36. **Valid discount 10%** (normal) - Returns 90% of subtotal\n37. **Valid discount 50%** (normal) - Returns 50% of subtotal\n38. **100% discount** (edge case) - Returns 0.0\n39. **Negative discount** (invalid input) - Should reject or raise exception\n40. **Discount greater than 100%** (invalid input) - Should reject discount > 100\n41. **Discount on zero subtotal** (edge case) - Apply discount to 0.0\n42. **Discount on negative subtotal** (edge case) - Handle negative subtotal input\n43. **Discount precision** (edge case) - Verify precision with fractional discounts\n\n### `calculate_shipping`\n\n44. **Subtotal below threshold** (normal) - Returns shipping_cost\n45. **Subtotal exactly at threshold** (edge case) - Should qualify for free shipping\n46. **Subtotal above threshold** (normal) - Returns 0.0 (free shipping)\n47. **Zero subtotal** (edge case) - Shipping behavior with $0 order\n48. **Negative subtotal** (edge case) - Handle negative input\n49. **Custom threshold - below** (normal) - Test with non-default threshold\n50. **Custom threshold - above** (normal) - Test free shipping with custom threshold\n\n### `calculate_tax`\n\n51. **Tax on positive amount** (normal) - Returns amount Ă— tax_rate\n52. **Tax on zero amount** (edge case) - Returns 0.0\n53. **Tax on negative amount** (edge case) - Handle negative input\n54. **Tax with zero tax rate** (edge case) - Returns 0.0\n55. **Tax precision** (edge case) - Verify floating-point precision\n56. **Tax with custom rate** (normal) - Verify custom tax rate is applied\n\n### `calculate_total`\n\n57. **Total with no discount, below threshold** (normal) - subtotal + shipping + tax\n58. **Total with no discount, above threshold** (normal) - subtotal + tax (free shipping)\n59. **Total with discount, below threshold** (normal) - discounted + shipping + tax\n60. **Total with discount, above threshold** (normal) - discounted + tax\n61. **Total with discount causing free shipping** (edge case) - Discount pushes below threshold but free shipping based on discounted amount\n62. **Total on empty order** (edge case) - Should return appropriate value (shipping + tax on zero?)\n63. **Total with 100% discount** (edge case) - Everything free\n64. **Total with invalid discount** (invalid input) - Negative or >100% discount\n65. **Total precision** (edge case) - Verify final calculation precision\n\n### `total_items`\n\n66. **Total items in empty order** (edge case) - Returns 0\n67. **Total items with single item quantity=1** (normal) - Returns 1\n68. **Total items with single item quantity>1** (normal) - Returns quantity\n69. **Total items with multiple items** (normal) - Sum of all quantities\n70. **Total items after removal** (normal) - Correctly updates count\n\n### `clear_order`\n\n71. **Clear non-empty order** (normal) - Removes all items, order becomes empty\n72. **Clear already empty order** (edge case) - Should not error\n73. **Clear then add items** (normal) - Can add items after clearing\n74. **Verify subtotal after clear** (normal) - Subtotal becomes 0.0\n\n### `list_items`\n\n75. **List items in empty order** (edge case) - Returns empty list\n76. **List items with single item** (normal) - Returns list with one name\n77. **List items with multiple items** (normal) - Returns all names\n78. **List items order preservation** (edge case) - Check if insertion order is maintained\n79. **List items after removal** (normal) - Removed item not in list\n80. **List items returns copy** (edge case) - Modifying returned list doesn't affect order\n\n### `is_empty`\n\n81. **Empty order returns True** (normal) - New order is empty\n82. **Non-empty order returns False** (normal) - After adding item\n83. **After clear returns True** (normal) - Order becomes empty after clear\n84. **After removing all items returns True** (normal) - Manually removing all items\n\n### Integration/Workflow Scenarios\n\n85. **Complete order workflow** (integration) - Add items â†’ apply discount â†’ calculate total\n86. **Order modification workflow** (integration) - Add â†’ remove â†’ add different â†’ total\n87. **Multiple orders independence** (integration) - Two OrderCalculator instances don't interfere\n88. **Recalculation after modification** (integration) - Totals update after adding/removing items",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"free_item\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"expensive\", 1e10)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"many\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"apple\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_remove_one_of_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertNotIn(\"apple\", calc.list_items())\n        self.assertIn(\"banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 1)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        self.assertEqual(calc.get_subtotal(), 19.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_get_subtotal_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 50.0), 50.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 100.0), 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(0.0, 50.0), 0.0)\n\n    def test_apply_discount_on_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10.0)\n        self.assertEqual(result, -90.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(-50.0), 10.0)\n\n    def test_calculate_shipping_custom_threshold_below(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(30.0), 5.0)\n\n    def test_calculate_shipping_custom_threshold_above(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(60.0), 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(-100.0), -23.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.calculate_tax(100.0), 10.0)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 150.0)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 80.0)\n        total = calc.calculate_total(10.0)\n        discounted = 72.0\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 200.0)\n        total = calc.calculate_total(10.0)\n        discounted = 180.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_causes_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 120.0)\n        total = calc.calculate_total(20.0)\n        discounted = 96.0\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        total = calc.calculate_total(0.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_invalid_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_invalid_over_hundred_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(110.0)\n\n    def test_calculate_total_precision(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 33.33)\n        total = calc.calculate_total(0.0)\n        expected = (33.33 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_then_add_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        calc.add_item(\"banana\", 3.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"banana\", calc.list_items())\n\n    def test_subtotal_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertEqual(calc.list_items(), [\"apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n        self.assertIn(\"cherry\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        items = calc.list_items()\n        self.assertEqual(items, [\"apple\", \"banana\", \"cherry\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertNotIn(\"apple\", calc.list_items())\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        items = calc.list_items()\n        items.append(\"banana\")\n        self.assertNotIn(\"banana\", calc.list_items())\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        calc.remove_item(\"banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"laptop\", 500.0, 1)\n        calc.add_item(\"mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        discounted = calc.apply_discount(subtotal, 10.0)\n        self.assertEqual(discounted, 495.0)\n        shipping = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = calc.calculate_total(10.0)\n        expected = 495.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        calc.add_item(\"banana\", 3.0, 2)\n        self.assertEqual(calc.get_subtotal(), 21.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 6.0)\n        calc.add_item(\"cherry\", 4.0, 2)\n        self.assertEqual(calc.get_subtotal(), 14.0)\n\n    def test_multiple_orders_independence(self):\n        calc1 = OrderCalculator(tax_rate=0.10)\n        calc2 = OrderCalculator(tax_rate=0.20)\n        calc1.add_item(\"item1\", 100.0)\n        calc2.add_item(\"item2\", 200.0)\n        self.assertEqual(calc1.get_subtotal(), 100.0)\n        self.assertEqual(calc2.get_subtotal(), 200.0)\n        self.assertEqual(calc1.calculate_tax(100.0), 10.0)\n        self.assertEqual(calc2.calculate_tax(100.0), 20.0)\n\n    def test_recalculation_after_modification(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total1 = calc.calculate_total(0.0)\n        calc.add_item(\"item2\", 60.0)\n        total2 = calc.calculate_total(0.0)\n        self.assertNotEqual(total1, total2)\n        expected1 = (50.0 + 10.0) * 1.23\n        expected2 = 110.0 * 1.23\n        self.assertAlmostEqual(total1, expected1, places=2)\n        self.assertAlmostEqual(total2, expected2, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(10.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"apple\", calc.list_items())\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"free_item\", 0.0)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", -5.0)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"item\", 5.0, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.0)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"expensive\", 1e10)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"many\", 1.0, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.remove_item(\"apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_non_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"banana\")\n\n    def test_remove_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_case_sensitivity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.0)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"apple\")\n\n    def test_remove_item_then_readd(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.remove_item(\"apple\")\n        calc.add_item(\"apple\", 10.0)\n        self.assertEqual(calc.get_subtotal(), 10.0)\n\n    def test_remove_one_of_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertNotIn(\"apple\", calc.list_items())\n        self.assertIn(\"banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 1)\n        self.assertEqual(calc.get_subtotal(), 5.0)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        self.assertEqual(calc.get_subtotal(), 19.0)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=10)\n\n    def test_get_subtotal_after_removing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 3.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 0.0), 100.0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 10.0), 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 50.0), 50.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(100.0, 100.0), 0.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.apply_discount(0.0, 50.0), 0.0)\n\n    def test_apply_discount_on_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10.0)\n        self.assertEqual(result, -90.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        self.assertEqual(calc.calculate_shipping(-50.0), 10.0)\n\n    def test_calculate_shipping_custom_threshold_below(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(30.0), 5.0)\n\n    def test_calculate_shipping_custom_threshold_above(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(60.0), 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(100.0), 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        self.assertEqual(calc.calculate_tax(-100.0), -23.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=4)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.calculate_tax(100.0), 10.0)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(0.0)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 150.0)\n        total = calc.calculate_total(0.0)\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 80.0)\n        total = calc.calculate_total(10.0)\n        discounted = 72.0\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount_above_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 200.0)\n        total = calc.calculate_total(10.0)\n        discounted = 180.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_causes_below_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 120.0)\n        total = calc.calculate_total(20.0)\n        discounted = 96.0\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        total = calc.calculate_total(0.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total = calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_invalid_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_invalid_over_hundred_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"item\", 50.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(110.0)\n\n    def test_calculate_total_precision(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 33.33)\n        total = calc.calculate_total(0.0)\n        expected = (33.33 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 2)\n        calc.add_item(\"banana\", 3.0, 3)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_then_add_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        calc.add_item(\"banana\", 3.0)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"banana\", calc.list_items())\n\n    def test_subtotal_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertEqual(calc.list_items(), [\"apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"apple\", items)\n        self.assertIn(\"banana\", items)\n        self.assertIn(\"cherry\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.add_item(\"cherry\", 2.0)\n        items = calc.list_items()\n        self.assertEqual(items, [\"apple\", \"banana\", \"cherry\"])\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        self.assertNotIn(\"apple\", calc.list_items())\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        items = calc.list_items()\n        items.append(\"banana\")\n        self.assertNotIn(\"banana\", calc.list_items())\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0)\n        calc.add_item(\"banana\", 3.0)\n        calc.remove_item(\"apple\")\n        calc.remove_item(\"banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"laptop\", 500.0, 1)\n        calc.add_item(\"mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        discounted = calc.apply_discount(subtotal, 10.0)\n        self.assertEqual(discounted, 495.0)\n        shipping = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = calc.calculate_total(10.0)\n        expected = 495.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"apple\", 5.0, 3)\n        calc.add_item(\"banana\", 3.0, 2)\n        self.assertEqual(calc.get_subtotal(), 21.0)\n        calc.remove_item(\"apple\")\n        self.assertEqual(calc.get_subtotal(), 6.0)\n        calc.add_item(\"cherry\", 4.0, 2)\n        self.assertEqual(calc.get_subtotal(), 14.0)\n\n    def test_multiple_orders_independence(self):\n        calc1 = OrderCalculator(tax_rate=0.10)\n        calc2 = OrderCalculator(tax_rate=0.20)\n        calc1.add_item(\"item1\", 100.0)\n        calc2.add_item(\"item2\", 200.0)\n        self.assertEqual(calc1.get_subtotal(), 100.0)\n        self.assertEqual(calc2.get_subtotal(), 200.0)\n        self.assertEqual(calc1.calculate_tax(100.0), 10.0)\n        self.assertEqual(calc2.calculate_tax(100.0), 20.0)\n\n    def test_recalculation_after_modification(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"item\", 50.0)\n        total1 = calc.calculate_total(0.0)\n        calc.add_item(\"item2\", 60.0)\n        total2 = calc.calculate_total(0.0)\n        self.assertNotEqual(total1, total2)\n        expected1 = (50.0 + 10.0) * 1.23\n        expected2 = 110.0 * 1.23\n        self.assertAlmostEqual(total1, expected1, places=2)\n        self.assertAlmostEqual(total2, expected2, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 211.84281659126282,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}