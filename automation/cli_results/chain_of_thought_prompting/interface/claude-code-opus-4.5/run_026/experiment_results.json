{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2026-01-03T22:19:15.372610",
  "response_time": 166.45610332489014,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_026\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Class Overview\n`OrderCalculator` is an e-commerce order management class that handles:\n- Item management (add/remove/list/clear)\n- Price calculations (subtotal, discounts, shipping, tax, total)\n- Order state queries (total items, is empty)\n\n### Constructor Parameters\n- `tax_rate` (default: 0.23) - 23% tax rate\n- `free_shipping_threshold` (default: 100.0) - Orders â‰Ą100 get free shipping\n- `shipping_cost` (default: 10.0) - Standard shipping fee\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Add item to order\n   - Typical: valid name, positive price, positive quantity\n   - Edge cases: quantity=1 (default), large quantities, duplicate items\n   - Invalid: empty name, negative/zero price, negative/zero quantity\n\n2. **`remove_item(name)`** - Remove item from order\n   - Typical: remove existing item\n   - Edge cases: case sensitivity of names\n   - Invalid: non-existent item, empty name\n\n3. **`get_subtotal()`** - Calculate sum of item prices Ă— quantities\n   - Typical: multiple items\n   - Edge cases: empty order, single item, floating point precision\n\n4. **`apply_discount(subtotal, discount)`** - Apply percentage discount\n   - Typical: 10%, 50% discounts\n   - Edge cases: 0% discount, 100% discount\n   - Invalid: negative discount, >100% discount\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determine shipping cost\n   - Typical: below threshold (pay shipping), above threshold (free)\n   - Edge cases: exactly at threshold, zero subtotal\n\n6. **`calculate_tax(amount)`** - Calculate tax on amount\n   - Typical: positive amounts\n   - Edge cases: zero amount, custom tax rates\n\n7. **`calculate_total(discount=0.0)`** - Full calculation pipeline\n   - Typical: items + discount combinations\n   - Edge cases: empty order, no discount, full discount, threshold boundary\n\n8. **`total_items()`** - Count total item quantity\n   - Typical: multiple items with varying quantities\n   - Edge cases: empty order, single item\n\n9. **`clear_order()`** - Remove all items\n   - Typical: clear populated order\n   - Edge cases: clear already empty order\n\n10. **`list_items()`** - Return list of item names\n    - Typical: multiple items\n    - Edge cases: empty order, order of items\n\n11. **`is_empty()`** - Check if order has no items\n    - Typical: empty vs non-empty\n    - Edge cases: after clear, after remove last item\n\n### Key Test Scenarios to Cover\n\n1. **Item Management Flow**: add â†’ list â†’ remove â†’ verify\n2. **Calculation Pipeline**: subtotal â†’ discount â†’ shipping â†’ tax â†’ total\n3. **Threshold Boundaries**: free shipping at exactly 100.0\n4. **State Transitions**: empty â†’ populated â†’ cleared â†’ empty\n5. **Input Validation**: all invalid input scenarios\n6. **Constructor Variations**: custom tax rates, thresholds, shipping costs\n7. **Floating Point Handling**: prices like 19.99, precision issues\n\n### Expected Exceptions\n- `ValueError` likely for invalid inputs (negative prices, invalid discounts)\n- `KeyError` or custom exception for removing non-existent items\n\nI'm now ready to generate the test code in the next step.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### `__init__` (Constructor)\n\n1. **Default initialization** (normal use) - Verify default values: tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom tax rate** (normal use) - Initialize with custom tax rate and verify it's applied\n3. **Custom shipping threshold** (normal use) - Initialize with custom free_shipping_threshold\n4. **Custom shipping cost** (normal use) - Initialize with custom shipping_cost\n5. **All custom parameters** (normal use) - Initialize with all parameters customized\n6. **Zero tax rate** (edge case) - Initialize with tax_rate=0\n7. **Zero shipping threshold** (edge case) - All orders should get free shipping\n8. **Zero shipping cost** (edge case) - Shipping is always free regardless of threshold\n9. **Negative tax rate** (invalid input) - Should raise exception or handle gracefully\n10. **Negative shipping threshold** (invalid input) - Should raise exception\n11. **Negative shipping cost** (invalid input) - Should raise exception\n\n### `add_item`\n\n12. **Add single item with default quantity** (normal use) - Add item with name, price, quantity=1\n13. **Add single item with explicit quantity** (normal use) - Add item with quantity > 1\n14. **Add multiple different items** (normal use) - Add several distinct items\n15. **Add duplicate item** (edge case) - Add same item name twice, verify behavior (update or accumulate)\n16. **Add item with float price** (normal use) - Price like 19.99\n17. **Add item with large quantity** (edge case) - Quantity = 1000\n18. **Add item with very small price** (edge case) - Price = 0.01\n19. **Empty item name** (invalid input) - Should raise ValueError\n20. **Whitespace-only item name** (invalid input) - Should raise ValueError\n21. **Zero price** (invalid input) - Should raise ValueError\n22. **Negative price** (invalid input) - Should raise ValueError\n23. **Zero quantity** (invalid input) - Should raise ValueError\n24. **Negative quantity** (invalid input) - Should raise ValueError\n25. **Non-string name** (invalid input) - Pass integer as name, type handling\n26. **Non-numeric price** (invalid input) - Pass string as price\n27. **Non-integer quantity** (invalid input) - Pass float as quantity\n\n### `remove_item`\n\n28. **Remove existing item** (normal use) - Remove item that exists in order\n29. **Remove from multi-item order** (normal use) - Remove one item, others remain\n30. **Remove last item** (edge case) - Order becomes empty after removal\n31. **Remove non-existent item** (invalid input) - Should raise KeyError or similar\n32. **Remove from empty order** (invalid input) - Should raise exception\n33. **Case sensitivity** (edge case) - Check if \"Apple\" and \"apple\" are treated differently\n34. **Remove item twice** (invalid input) - Second removal should raise exception\n35. **Empty string name** (invalid input) - Should raise exception\n\n### `get_subtotal`\n\n36. **Single item subtotal** (normal use) - price Ă— quantity for one item\n37. **Multiple items subtotal** (normal use) - Sum of all (price Ă— quantity)\n38. **Empty order subtotal** (edge case) - Should return 0.0\n39. **Subtotal with various quantities** (normal use) - Items with different quantities\n40. **Floating point precision** (edge case) - Items like 0.1 + 0.2 handling\n41. **Large subtotal** (edge case) - Many expensive items\n\n### `apply_discount`\n\n42. **Apply 10% discount** (normal use) - Standard discount application\n43. **Apply 50% discount** (normal use) - Half-off discount\n44. **Apply 0% discount** (edge case) - No change to subtotal\n45. **Apply 100% discount** (edge case) - Result should be 0\n46. **Apply small discount** (edge case) - 1% discount\n47. **Discount on zero subtotal** (edge case) - 0 Ă— any discount = 0\n48. **Negative discount** (invalid input) - Should raise ValueError\n49. **Discount over 100%** (invalid input) - Should raise ValueError\n50. **Negative subtotal parameter** (invalid input) - Should raise ValueError\n51. **Discount precision** (edge case) - 33.33% discount calculation\n\n### `calculate_shipping`\n\n52. **Below threshold** (normal use) - Subtotal < 100, pay full shipping\n53. **Above threshold** (normal use) - Subtotal > 100, free shipping\n54. **Exactly at threshold** (edge case) - Subtotal = 100.0, verify behavior\n55. **Just below threshold** (edge case) - Subtotal = 99.99\n56. **Just above threshold** (edge case) - Subtotal = 100.01\n57. **Zero subtotal** (edge case) - Empty order shipping calculation\n58. **Custom threshold verification** (normal use) - Use non-default threshold\n59. **Negative subtotal** (invalid input) - Should handle or raise exception\n\n### `calculate_tax`\n\n60. **Calculate tax on positive amount** (normal use) - Standard tax calculation\n61. **Calculate tax on zero** (edge case) - Should return 0\n62. **Tax with default rate** (normal use) - Verify 23% calculation\n63. **Tax with custom rate** (normal use) - Different tax rate applied\n64. **Tax precision** (edge case) - Verify rounding behavior\n65. **Tax on small amount** (edge case) - Amount = 0.01\n66. **Tax on large amount** (edge case) - Amount = 10000\n67. **Negative amount** (invalid input) - Should raise exception\n\n### `calculate_total`\n\n68. **Total with no discount** (normal use) - Subtotal + shipping + tax\n69. **Total with discount** (normal use) - Full calculation pipeline\n70. **Total for empty order** (edge case) - Should be 0 or just shipping\n71. **Total at free shipping threshold** (edge case) - Exactly 100 subtotal\n72. **Total with 100% discount** (edge case) - Only shipping and tax on shipping\n73. **Total with free shipping and discount** (normal use) - Above threshold with discount\n74. **Total drops below threshold after discount** (edge case) - Was 120, 25% off = 90, needs shipping\n75. **Default discount parameter** (normal use) - No discount argument passed\n76. **Negative discount to calculate_total** (invalid input) - Should raise ValueError\n77. **Discount over 100 to calculate_total** (invalid input) - Should raise ValueError\n\n### `total_items`\n\n78. **Single item count** (normal use) - One item with quantity 1\n79. **Single item multiple quantity** (normal use) - One item with quantity 5\n80. **Multiple items count** (normal use) - Sum of all quantities\n81. **Empty order count** (edge case) - Should return 0\n82. **After adding items** (normal use) - Verify count increases\n83. **After removing item** (normal use) - Verify count decreases\n\n### `clear_order`\n\n84. **Clear populated order** (normal use) - Order becomes empty\n85. **Clear already empty order** (edge case) - Should not raise exception\n86. **Verify state after clear** (normal use) - is_empty=True, total_items=0, subtotal=0\n\n### `list_items`\n\n87. **List single item** (normal use) - Returns list with one name\n88. **List multiple items** (normal use) - Returns all item names\n89. **List empty order** (edge case) - Returns empty list\n90. **List after removal** (normal use) - Removed item not in list\n91. **List item order** (edge case) - Verify order (insertion order or sorted)\n\n### `is_empty`\n\n92. **New order is empty** (normal use) - Fresh instance returns True\n93. **Non-empty order** (normal use) - After add_item returns False\n94. **After clear** (normal use) - Returns True after clear_order\n95. **After removing all items** (edge case) - Returns True after last item removed\n96. **After add then remove** (normal use) - Add one, remove one, is_empty=True\n\n### Integration/Workflow Scenarios\n\n97. **Complete order workflow** (integration) - Add items â†’ apply discount â†’ calculate total â†’ clear\n98. **Subtotal equals threshold exactly** (integration) - Verify shipping calculation in total\n99. **Multiple discounts consideration** (integration) - If discounts can stack or replace\n100. **Order state consistency** (integration) - All getters return consistent state after operations\n101. **Recalculation after modification** (integration) - Total changes when items added/removed\n102. **Boundary value analysis** (integration) - Values at 99.99, 100.00, 100.01 thresholds",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n\n    def test_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=25.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 25.0)\n\n    def test_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n\nclass TestAddItem(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_single_item_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_single_item_explicit_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_duplicate_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_item_with_float_price(self):\n        self.calc.add_item(\"Item\", 19.99)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 19.99, places=2)\n\n    def test_add_item_with_large_quantity(self):\n        self.calc.add_item(\"Bulk\", 1.00, 1000)\n        self.assertEqual(self.calc.total_items(), 1000)\n\n    def test_add_item_with_very_small_price(self):\n        self.calc.add_item(\"Penny\", 0.01)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.01, places=2)\n\n    def test_empty_item_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.50)\n\n    def test_whitespace_only_item_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"   \", 1.50)\n\n    def test_zero_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free\", 0)\n\n    def test_negative_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative\", -5.00)\n\n    def test_zero_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 1.50, 0)\n\n    def test_negative_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 1.50, -1)\n\n\nclass TestRemoveItem(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_from_multi_item_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n        self.assertIn(\"Banana\", self.calc.list_items())\n\n    def test_remove_last_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_case_sensitivity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"apple\")\n\n    def test_remove_item_twice(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_empty_string_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"\")\n\n\nclass TestGetSubtotal(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_single_item_subtotal(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 1.50, places=2)\n\n    def test_multiple_items_subtotal(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 9.00, places=2)\n\n    def test_empty_order_subtotal(self):\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.0, places=2)\n\n    def test_subtotal_with_various_quantities(self):\n        self.calc.add_item(\"A\", 10.00, 1)\n        self.calc.add_item(\"B\", 5.00, 4)\n        self.calc.add_item(\"C\", 2.50, 10)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 55.00, places=2)\n\n    def test_floating_point_precision(self):\n        self.calc.add_item(\"A\", 0.10, 1)\n        self.calc.add_item(\"B\", 0.20, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.30, places=2)\n\n    def test_large_subtotal(self):\n        self.calc.add_item(\"Expensive\", 1000.00, 100)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 100000.00, places=2)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_10_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_50_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_0_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_100_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_small_discount(self):\n        result = self.calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 99.0, places=2)\n\n    def test_discount_on_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_negative_discount(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_discount_over_100_percent(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 150.0)\n\n    def test_negative_subtotal_parameter(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n    def test_discount_precision(self):\n        result = self.calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_exactly_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_custom_threshold_verification(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-10.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_on_zero(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_tax_with_default_rate(self):\n        result = self.calc.calculate_tax(50.0)\n        self.assertAlmostEqual(result, 11.5, places=2)\n\n    def test_tax_with_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_tax_precision(self):\n        result = self.calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_tax_on_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_tax_on_large_amount(self):\n        result = self.calc.calculate_tax(10000.0)\n        self.assertAlmostEqual(result, 2300.0, places=2)\n\n    def test_negative_amount(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_with_no_discount(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(10.0)\n        expected = (90.0 + 0.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_for_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_at_free_shipping_threshold(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_100_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_free_shipping_and_discount(self):\n        self.calc.add_item(\"Item\", 200.0, 1)\n        total = self.calc.calculate_total(10.0)\n        expected = 180.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_drops_below_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 120.0, 1)\n        total = self.calc.calculate_total(25.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_default_discount_parameter(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_negative_discount_to_calculate_total(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(-10.0)\n\n    def test_discount_over_100_to_calculate_total(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(150.0)\n\n\nclass TestTotalItems(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_single_item_count(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_single_item_multiple_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_multiple_items_count(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_empty_order_count(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_after_adding_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_after_removing_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.total_items(), 3)\n\n\nclass TestClearOrder(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_populated_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_verify_state_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.total_items(), 0)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.0, places=2)\n\n\nclass TestListItems(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_single_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_after_removal(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        items = self.calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n\nclass TestIsEmpty(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_new_order_is_empty(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_non_empty_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_after_removing_all_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_after_add_then_remove(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_complete_order_workflow(self):\n        self.calc.add_item(\"Apple\", 10.0, 5)\n        self.calc.add_item(\"Banana\", 5.0, 10)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        self.assertEqual(self.calc.total_items(), 15)\n        total = self.calc.calculate_total(10.0)\n        expected = 90.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_subtotal_equals_threshold_exactly(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        shipping = self.calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n    def test_order_state_consistency(self):\n        self.calc.add_item(\"Apple\", 10.0, 2)\n        self.calc.add_item(\"Banana\", 5.0, 4)\n        self.assertEqual(self.calc.total_items(), 6)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 40.0, places=2)\n        self.assertFalse(self.calc.is_empty())\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_recalculation_after_modification(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total1 = self.calc.calculate_total()\n        self.calc.add_item(\"Item2\", 100.0, 1)\n        total2 = self.calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_boundary_value_analysis_99_99(self):\n        self.calc.add_item(\"Item\", 99.99, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 10.0, places=2)\n\n    def test_boundary_value_analysis_100_00(self):\n        self.calc.add_item(\"Item\", 100.00, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n    def test_boundary_value_analysis_100_01(self):\n        self.calc.add_item(\"Item\", 100.01, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n\n    def test_default_initialization(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=25.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 25.0)\n\n    def test_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0)\n        self.assertEqual(calc.shipping_cost, 0)\n\n    def test_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_negative_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n\nclass TestAddItem(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_single_item_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_single_item_explicit_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_duplicate_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_item_with_float_price(self):\n        self.calc.add_item(\"Item\", 19.99)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 19.99, places=2)\n\n    def test_add_item_with_large_quantity(self):\n        self.calc.add_item(\"Bulk\", 1.00, 1000)\n        self.assertEqual(self.calc.total_items(), 1000)\n\n    def test_add_item_with_very_small_price(self):\n        self.calc.add_item(\"Penny\", 0.01)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.01, places=2)\n\n    def test_empty_item_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.50)\n\n    def test_whitespace_only_item_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"   \", 1.50)\n\n    def test_zero_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free\", 0)\n\n    def test_negative_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Negative\", -5.00)\n\n    def test_zero_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 1.50, 0)\n\n    def test_negative_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Item\", 1.50, -1)\n\n\nclass TestRemoveItem(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_from_multi_item_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n        self.assertIn(\"Banana\", self.calc.list_items())\n\n    def test_remove_last_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_non_existent_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_case_sensitivity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"apple\")\n\n    def test_remove_item_twice(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_empty_string_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"\")\n\n\nclass TestGetSubtotal(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_single_item_subtotal(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 1.50, places=2)\n\n    def test_multiple_items_subtotal(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 9.00, places=2)\n\n    def test_empty_order_subtotal(self):\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.0, places=2)\n\n    def test_subtotal_with_various_quantities(self):\n        self.calc.add_item(\"A\", 10.00, 1)\n        self.calc.add_item(\"B\", 5.00, 4)\n        self.calc.add_item(\"C\", 2.50, 10)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 55.00, places=2)\n\n    def test_floating_point_precision(self):\n        self.calc.add_item(\"A\", 0.10, 1)\n        self.calc.add_item(\"B\", 0.20, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.30, places=2)\n\n    def test_large_subtotal(self):\n        self.calc.add_item(\"Expensive\", 1000.00, 100)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 100000.00, places=2)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_10_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_50_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_0_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_100_percent_discount(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_small_discount(self):\n        result = self.calc.apply_discount(100.0, 1.0)\n        self.assertAlmostEqual(result, 99.0, places=2)\n\n    def test_discount_on_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_negative_discount(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_discount_over_100_percent(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 150.0)\n\n    def test_negative_subtotal_parameter(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n    def test_discount_precision(self):\n        result = self.calc.apply_discount(100.0, 33.33)\n        self.assertAlmostEqual(result, 66.67, places=2)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_exactly_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_custom_threshold_verification(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_negative_subtotal(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-10.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_on_zero(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_tax_with_default_rate(self):\n        result = self.calc.calculate_tax(50.0)\n        self.assertAlmostEqual(result, 11.5, places=2)\n\n    def test_tax_with_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_tax_precision(self):\n        result = self.calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_tax_on_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_tax_on_large_amount(self):\n        result = self.calc.calculate_tax(10000.0)\n        self.assertAlmostEqual(result, 2300.0, places=2)\n\n    def test_negative_amount(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_with_no_discount(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(10.0)\n        expected = (90.0 + 0.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_for_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_at_free_shipping_threshold(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_100_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_with_free_shipping_and_discount(self):\n        self.calc.add_item(\"Item\", 200.0, 1)\n        total = self.calc.calculate_total(10.0)\n        expected = 180.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_total_drops_below_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 120.0, 1)\n        total = self.calc.calculate_total(25.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_default_discount_parameter(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_negative_discount_to_calculate_total(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(-10.0)\n\n    def test_discount_over_100_to_calculate_total(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(150.0)\n\n\nclass TestTotalItems(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_single_item_count(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_single_item_multiple_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_multiple_items_count(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_empty_order_count(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n    def test_after_adding_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_after_removing_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 2.00, 3)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.total_items(), 3)\n\n\nclass TestClearOrder(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_populated_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_verify_state_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.total_items(), 0)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 0.0, places=2)\n\n\nclass TestListItems(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_single_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_after_removal(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 2.00)\n        self.calc.remove_item(\"Apple\")\n        items = self.calc.list_items()\n        self.assertNotIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n\n\nclass TestIsEmpty(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_new_order_is_empty(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_non_empty_order(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_after_removing_all_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_after_add_then_remove(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_complete_order_workflow(self):\n        self.calc.add_item(\"Apple\", 10.0, 5)\n        self.calc.add_item(\"Banana\", 5.0, 10)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        self.assertEqual(self.calc.total_items(), 15)\n        total = self.calc.calculate_total(10.0)\n        expected = 90.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_subtotal_equals_threshold_exactly(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        self.assertEqual(self.calc.get_subtotal(), 100.0)\n        shipping = self.calc.calculate_shipping(100.0)\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n    def test_order_state_consistency(self):\n        self.calc.add_item(\"Apple\", 10.0, 2)\n        self.calc.add_item(\"Banana\", 5.0, 4)\n        self.assertEqual(self.calc.total_items(), 6)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 40.0, places=2)\n        self.assertFalse(self.calc.is_empty())\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_recalculation_after_modification(self):\n        self.calc.add_item(\"Item\", 50.0, 1)\n        total1 = self.calc.calculate_total()\n        self.calc.add_item(\"Item2\", 100.0, 1)\n        total2 = self.calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n\n    def test_boundary_value_analysis_99_99(self):\n        self.calc.add_item(\"Item\", 99.99, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 10.0, places=2)\n\n    def test_boundary_value_analysis_100_00(self):\n        self.calc.add_item(\"Item\", 100.00, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n    def test_boundary_value_analysis_100_01(self):\n        self.calc.add_item(\"Item\", 100.01, 1)\n        shipping = self.calc.calculate_shipping(self.calc.get_subtotal())\n        self.assertAlmostEqual(shipping, 0.0, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 166.45610332489014,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}