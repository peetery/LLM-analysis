{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-31T03:57:38.475518",
  "response_time": 172.55785727500916,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_025\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Constructor (`__init__`)\n- **Parameters**: `tax_rate` (default 0.23), `free_shipping_threshold` (default 100.0), `shipping_cost` (default 10.0)\n- **Edge cases**: negative values, zero values, non-numeric types\n\n### Methods to Test\n\n1. **`add_item(name, price, quantity=1)`**\n   - Typical: add single item, add item with quantity > 1\n   - Edge cases: empty name, zero/negative price, zero/negative quantity, duplicate item names, very large quantities\n   - Invalid inputs: wrong types for parameters\n\n2. **`remove_item(name)`**\n   - Typical: remove existing item\n   - Edge cases: remove non-existent item, remove from empty order, empty name string\n\n3. **`get_subtotal()`**\n   - Typical: sum of price Ă— quantity for all items\n   - Edge cases: empty order, single item, multiple items, floating point precision\n\n4. **`apply_discount(subtotal, discount)`**\n   - Typical: percentage discount applied correctly\n   - Edge cases: zero discount, 100% discount, discount > 100%, negative discount, zero subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`**\n   - Typical: below threshold (shipping charged), at/above threshold (free shipping)\n   - Edge cases: exactly at threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`**\n   - Typical: tax calculated correctly based on rate\n   - Edge cases: zero amount, negative amount, very large amounts\n\n7. **`calculate_total(discount=0.0)`**\n   - Typical: subtotal - discount + shipping + tax\n   - Edge cases: empty order, with/without discount, with/without free shipping\n\n8. **`total_items()`**\n   - Typical: sum of all quantities\n   - Edge cases: empty order, single item, multiple items with varying quantities\n\n9. **`clear_order()`**\n   - Typical: removes all items\n   - Edge cases: clearing already empty order\n\n10. **`list_items()`**\n    - Typical: returns list of item names\n    - Edge cases: empty order, order with items\n\n11. **`is_empty()`**\n    - Typical: returns True/False based on order state\n    - Edge cases: after init, after adding items, after clearing\n\n### Cross-Cutting Concerns\n- State management: order state after sequences of operations\n- Floating point arithmetic precision\n- Type validation for all inputs\n- Interaction between methods (e.g., add â†’ get_subtotal â†’ calculate_total)\n\n### Key Test Categories\n1. **Initialization tests**: default and custom parameters\n2. **Item management tests**: add, remove, clear operations\n3. **Calculation tests**: subtotal, discount, shipping, tax, total\n4. **Query tests**: total_items, list_items, is_empty\n5. **Edge case tests**: empty states, boundary values, invalid inputs\n6. **Integration tests**: method interaction sequences\n\nReady to proceed with test code generation.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Normal**: Create instance with default parameters - verify tax_rate, free_shipping_threshold, shipping_cost are set correctly\n2. **Normal**: Create instance with custom tax_rate - verify custom value is used\n3. **Normal**: Create instance with custom free_shipping_threshold - verify custom value is used\n4. **Normal**: Create instance with custom shipping_cost - verify custom value is used\n5. **Normal**: Create instance with all custom parameters - verify all values are set\n6. **Edge case**: Create instance with zero tax_rate - verify no tax applied\n7. **Edge case**: Create instance with zero shipping_cost - verify free shipping always\n8. **Edge case**: Create instance with zero free_shipping_threshold - verify free shipping always\n9. **Invalid input**: Create instance with negative tax_rate - expect exception or specific behavior\n10. **Invalid input**: Create instance with negative shipping_cost - expect exception or specific behavior\n11. **Invalid input**: Create instance with negative free_shipping_threshold - expect exception or specific behavior\n\n### `add_item(name, price, quantity)`\n\n12. **Normal**: Add single item with default quantity (1) - verify item added\n13. **Normal**: Add item with explicit quantity > 1 - verify quantity stored correctly\n14. **Normal**: Add multiple different items - verify all items present\n15. **Edge case**: Add item with same name twice - verify behavior (update or error)\n16. **Edge case**: Add item with quantity = 0 - expect exception or specific behavior\n17. **Edge case**: Add item with very large quantity - verify handles large numbers\n18. **Edge case**: Add item with very small price (0.01) - verify precision\n19. **Edge case**: Add item with very large price - verify handles large numbers\n20. **Invalid input**: Add item with empty string name - expect exception\n21. **Invalid input**: Add item with negative price - expect exception\n22. **Invalid input**: Add item with negative quantity - expect exception\n23. **Invalid input**: Add item with zero price - expect exception or specific behavior\n24. **Invalid input**: Add item with non-string name - expect exception\n25. **Invalid input**: Add item with non-numeric price - expect exception\n26. **Invalid input**: Add item with non-integer quantity - expect exception or specific behavior\n\n### `remove_item(name)`\n\n27. **Normal**: Remove existing item - verify item no longer in order\n28. **Normal**: Remove item from order with multiple items - verify only specified item removed\n29. **Edge case**: Remove item from empty order - expect exception (KeyError/ValueError)\n30. **Edge case**: Remove non-existent item - expect exception\n31. **Edge case**: Remove item with empty string name - expect exception\n32. **Invalid input**: Remove with non-string argument - expect exception\n\n### `get_subtotal()`\n\n33. **Normal**: Get subtotal with single item - verify price Ă— quantity\n34. **Normal**: Get subtotal with multiple items - verify sum of all (price Ă— quantity)\n35. **Edge case**: Get subtotal of empty order - expect 0.0\n36. **Edge case**: Get subtotal with floating point prices - verify precision\n37. **Edge case**: Get subtotal after adding and removing items - verify correct calculation\n\n### `apply_discount(subtotal, discount)`\n\n38. **Normal**: Apply 10% discount to subtotal - verify correct reduction\n39. **Normal**: Apply 50% discount - verify half price\n40. **Edge case**: Apply 0% discount - verify subtotal unchanged\n41. **Edge case**: Apply 100% discount - verify result is 0\n42. **Edge case**: Apply discount to zero subtotal - verify result is 0\n43. **Invalid input**: Apply negative discount - expect exception or specific behavior\n44. **Invalid input**: Apply discount > 100% - expect exception or specific behavior\n45. **Invalid input**: Apply discount to negative subtotal - expect exception or behavior\n46. **Edge case**: Apply discount with floating point precision - verify accuracy\n\n### `calculate_shipping(discounted_subtotal)`\n\n47. **Normal**: Calculate shipping below threshold - verify shipping_cost returned\n48. **Normal**: Calculate shipping above threshold - verify 0.0 returned (free shipping)\n49. **Edge case**: Calculate shipping exactly at threshold - verify free shipping\n50. **Edge case**: Calculate shipping with zero subtotal - verify shipping charged\n51. **Edge case**: Calculate shipping just below threshold (threshold - 0.01) - verify shipping charged\n52. **Edge case**: Calculate shipping just above threshold (threshold + 0.01) - verify free shipping\n53. **Invalid input**: Calculate shipping with negative subtotal - expect specific behavior\n\n### `calculate_tax(amount)`\n\n54. **Normal**: Calculate tax on positive amount - verify tax_rate applied correctly\n55. **Edge case**: Calculate tax on zero amount - verify 0.0 returned\n56. **Edge case**: Calculate tax with custom tax_rate from constructor - verify correct rate used\n57. **Edge case**: Calculate tax with zero tax_rate - verify 0.0 returned\n58. **Edge case**: Calculate tax with floating point amount - verify precision\n59. **Invalid input**: Calculate tax on negative amount - expect specific behavior\n\n### `calculate_total(discount)`\n\n60. **Normal**: Calculate total with no discount - verify subtotal + shipping + tax\n61. **Normal**: Calculate total with discount - verify discount applied before shipping/tax\n62. **Normal**: Calculate total qualifying for free shipping - verify no shipping added\n63. **Normal**: Calculate total not qualifying for free shipping - verify shipping added\n64. **Edge case**: Calculate total of empty order - verify returns 0.0 or handles gracefully\n65. **Edge case**: Calculate total with 100% discount - verify minimal total (possibly just shipping)\n66. **Edge case**: Calculate total with default discount (0.0) - verify same as explicit 0\n67. **Edge case**: Calculate total at exact free shipping threshold after discount - verify shipping logic\n68. **Invalid input**: Calculate total with negative discount - expect exception or behavior\n69. **Invalid input**: Calculate total with discount > 100 - expect exception or behavior\n\n### `total_items()`\n\n70. **Normal**: Get total items with single item quantity 1 - verify returns 1\n71. **Normal**: Get total items with single item quantity > 1 - verify returns quantity\n72. **Normal**: Get total items with multiple items - verify sum of all quantities\n73. **Edge case**: Get total items of empty order - verify returns 0\n\n### `clear_order()`\n\n74. **Normal**: Clear order with items - verify order becomes empty\n75. **Edge case**: Clear already empty order - verify no error, still empty\n76. **Normal**: Clear order then verify is_empty returns True\n77. **Normal**: Clear order then verify total_items returns 0\n78. **Normal**: Clear order then verify get_subtotal returns 0.0\n\n### `list_items()`\n\n79. **Normal**: List items with single item - verify list contains item name\n80. **Normal**: List items with multiple items - verify all names present\n81. **Edge case**: List items of empty order - verify empty list returned\n82. **Normal**: List items after adding and removing - verify correct names\n\n### `is_empty()`\n\n83. **Normal**: Check is_empty on new order - verify returns True\n84. **Normal**: Check is_empty after adding item - verify returns False\n85. **Normal**: Check is_empty after adding then removing all items - verify returns True\n86. **Normal**: Check is_empty after clear_order - verify returns True\n\n### Integration/Sequence Tests\n\n87. **Integration**: Full order workflow - add items, apply discount, calculate total\n88. **Integration**: Add item, remove it, verify order empty\n89. **Integration**: Multiple add/remove operations, verify correct subtotal\n90. **Integration**: Verify calculate_total uses get_subtotal internally\n91. **Integration**: Add items to reach exactly free_shipping_threshold, verify free shipping\n92. **Integration**: Add items, clear, add new items, verify correct state\n93. **State**: Verify order state preserved after get_subtotal call\n94. **State**: Verify order state preserved after calculate_total call",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(0.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", calc.list_items())\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_from_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_non_string_argument(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.50, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.00, places=2)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.7, places=2)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 3.00, places=2)\n\n    def test_apply_discount_10_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_50_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_100_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 15.0)\n        self.assertAlmostEqual(result, 28.3305, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(-10.0), 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_floating_point_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(result, -23.0, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total = calc.calculate_total(10.0)\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 3)\n        total = calc.calculate_total()\n        subtotal = 150.0\n        shipping = 0.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 30.0, 1)\n        total = calc.calculate_total()\n        subtotal = 30.0\n        shipping = 10.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total_default = calc.calculate_total()\n        total_explicit = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_default, total_explicit, places=2)\n\n    def test_calculate_total_exact_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(20.0)\n        discounted = 100.0\n        shipping = 0.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_over_100(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_total_items_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_subtotal_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 20.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 90.0, places=2)\n        total = calc.calculate_total(10.0)\n        discounted = 81.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_multiple_add_remove_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 3)\n        calc.add_item(\"Banana\", 3.00, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 4.00, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.0, places=2)\n\n    def test_integration_calculate_total_uses_get_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 2)\n        subtotal = calc.get_subtotal()\n        total = calc.calculate_total()\n        shipping = calc.calculate_shipping(subtotal)\n        tax = calc.calculate_tax(subtotal + shipping)\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_exact_free_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        shipping = calc.calculate_shipping(calc.get_subtotal())\n        self.assertEqual(shipping, 0.0)\n\n    def test_integration_add_clear_add_new(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.0, places=2)\n\n    def test_state_preserved_after_get_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.get_subtotal()\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_state_preserved_after_calculate_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.calculate_total()\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=20.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 20.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        calc.add_item(\"Item\", 100.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.calculate_shipping(50.0), 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.calculate_shipping(0.0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", calc.list_items())\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Penny Item\", 0.01)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.01, places=2)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Free Item\", 0.0)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 1.50)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", \"expensive\")\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_existing_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_from_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_non_existent_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_non_string_argument(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.remove_item(123)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 7.50, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 13.00, places=2)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_floating_point_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.7, places=2)\n\n    def test_get_subtotal_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 3.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertAlmostEqual(calc.get_subtotal(), 3.00, places=2)\n\n    def test_apply_discount_10_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_50_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_100_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_over_100_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 10.0)\n\n    def test_apply_discount_floating_point_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 15.0)\n        self.assertAlmostEqual(result, 28.3305, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(-10.0), 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 10.0, places=2)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.calculate_tax(100.0), 0.0)\n\n    def test_calculate_tax_floating_point_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(result, 7.6659, places=2)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(-100.0)\n        self.assertAlmostEqual(result, -23.0, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        total = calc.calculate_total(10.0)\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 3)\n        total = calc.calculate_total()\n        subtotal = 150.0\n        shipping = 0.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 30.0, 1)\n        total = calc.calculate_total()\n        subtotal = 30.0\n        shipping = 10.0\n        tax = (subtotal + shipping) * 0.23\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_100_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        total_default = calc.calculate_total()\n        total_explicit = calc.calculate_total(0.0)\n        self.assertAlmostEqual(total_default, total_explicit, places=2)\n\n    def test_calculate_total_exact_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        total = calc.calculate_total(20.0)\n        discounted = 100.0\n        shipping = 0.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_over_100(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_already_empty_order(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_total_items_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_clear_order_subtotal_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertEqual(items, [\"Banana\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 20.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 90.0, places=2)\n        total = calc.calculate_total(10.0)\n        discounted = 81.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_multiple_add_remove_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 3)\n        calc.add_item(\"Banana\", 3.00, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Orange\", 4.00, 1)\n        self.assertAlmostEqual(calc.get_subtotal(), 10.0, places=2)\n\n    def test_integration_calculate_total_uses_get_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 2)\n        subtotal = calc.get_subtotal()\n        total = calc.calculate_total()\n        shipping = calc.calculate_shipping(subtotal)\n        tax = calc.calculate_tax(subtotal + shipping)\n        expected = subtotal + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_exact_free_shipping_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        shipping = calc.calculate_shipping(calc.get_subtotal())\n        self.assertEqual(shipping, 0.0)\n\n    def test_integration_add_clear_add_new(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.clear_order()\n        calc.add_item(\"Banana\", 2.00, 2)\n        self.assertEqual(calc.total_items(), 2)\n        self.assertAlmostEqual(calc.get_subtotal(), 4.0, places=2)\n\n    def test_state_preserved_after_get_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.get_subtotal()\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_state_preserved_after_calculate_total(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.calculate_total()\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 172.55785727500916,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}