{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T08:39:12.581110",
  "response_time": 158.11096954345703,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_006\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating unit tests.\n\n## Class Analysis\n\n### Class Purpose\n`OrderCalculator` is an order management system that handles items in a shopping cart, calculates pricing with tax, discounts, and shipping.\n\n### Constructor Parameters\n- `tax_rate` (default: 0.23) - 23% tax rate\n- `free_shipping_threshold` (default: 100.0) - Orders above this get free shipping\n- `shipping_cost` (default: 10.0) - Flat shipping cost if below threshold\n\n### Public Methods Analysis\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate names, float quantity, very large values\n\n2. **`remove_item(name)`** - Removes item by name\n   - Edge cases: non-existent item, empty string, removing from empty order\n\n3. **`get_subtotal()`** - Returns sum of (price Ă— quantity) for all items\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Edge cases: zero discount, 100% discount, discount > 100%, negative discount, discount on zero subtotal\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determines shipping cost\n   - Edge cases: exactly at threshold, just below, just above, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, very large amount\n\n7. **`calculate_total(discount=0.0)`** - Full calculation: subtotal â†’ discount â†’ shipping â†’ tax\n   - Edge cases: empty order, with/without discount, free shipping qualification\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Edge cases: empty order, multiple items with various quantities\n\n9. **`clear_order()`** - Removes all items\n   - Edge cases: clearing empty order, clearing populated order\n\n10. **`list_items()`** - Returns list of item names\n    - Edge cases: empty order, order with items, order after modifications\n\n11. **`is_empty()`** - Returns True if no items\n    - Edge cases: empty order, after adding/removing items\n\n### Key Test Categories\n\n1. **Initialization tests** - Default values, custom values, invalid constructor args\n2. **Item management** - Add, remove, clear operations\n3. **Calculation accuracy** - Subtotal, tax, discount, shipping, total\n4. **Boundary conditions** - Threshold values, zero values, empty states\n5. **Error handling** - Invalid inputs, type errors, edge cases\n6. **State transitions** - Order state after various operations\n7. **Integration scenarios** - Full workflow tests combining multiple operations\n\n### Potential Validation Points\n- Price validation (negative, zero)\n- Quantity validation (negative, zero, non-integer)\n- Discount validation (range 0-100 or percentage)\n- Name validation (empty, whitespace)\n- Type checking for all parameters\n\nReady for the next step to write test scenarios or test code.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default values** (normal) - Verify default tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0\n2. **Custom values** (normal) - Create instance with custom tax_rate, threshold, and shipping_cost\n3. **Zero tax rate** (edge) - Verify behavior with tax_rate=0\n4. **Zero shipping threshold** (edge) - All orders should get free shipping\n5. **Negative tax rate** (invalid) - Should raise exception or handle gracefully\n6. **Negative shipping cost** (invalid) - Should raise exception or handle gracefully\n7. **Negative threshold** (invalid) - Should raise exception or handle gracefully\n\n### `add_item`\n\n8. **Add single item** (normal) - Add one item with name, price, quantity\n9. **Add item with default quantity** (normal) - Omit quantity parameter, verify defaults to 1\n10. **Add multiple different items** (normal) - Add several distinct items\n11. **Add item with same name twice** (edge) - Verify behavior (update or error?)\n12. **Add item with zero price** (edge) - Verify behavior\n13. **Add item with negative price** (invalid) - Should raise ValueError\n14. **Add item with zero quantity** (invalid) - Should raise ValueError\n15. **Add item with negative quantity** (invalid) - Should raise ValueError\n16. **Add item with empty name** (invalid) - Should raise ValueError\n17. **Add item with whitespace-only name** (invalid) - Should raise ValueError\n18. **Add item with float quantity** (invalid) - Should raise TypeError or convert\n19. **Add item with very large price** (edge) - Verify no overflow issues\n20. **Add item with very large quantity** (edge) - Verify no overflow issues\n21. **Add item with non-string name** (invalid) - Should raise TypeError\n22. **Add item with non-numeric price** (invalid) - Should raise TypeError\n\n### `remove_item`\n\n23. **Remove existing item** (normal) - Remove an item that exists\n24. **Remove non-existent item** (invalid) - Should raise KeyError or similar\n25. **Remove from empty order** (invalid) - Should raise exception\n26. **Remove with empty string name** (invalid) - Should raise exception\n27. **Remove item then verify state** (normal) - Confirm item is gone from list\n\n### `get_subtotal`\n\n28. **Subtotal of empty order** (edge) - Should return 0.0\n29. **Subtotal with single item** (normal) - price Ă— quantity\n30. **Subtotal with multiple items** (normal) - Sum of all (price Ă— quantity)\n31. **Subtotal with quantity > 1** (normal) - Verify multiplication is correct\n32. **Subtotal precision** (edge) - Verify floating-point handling\n\n### `apply_discount`\n\n33. **Apply zero discount** (normal) - Subtotal unchanged\n34. **Apply valid discount** (normal) - e.g., 10% off\n35. **Apply 100% discount** (edge) - Should return 0.0\n36. **Apply discount > 100%** (invalid) - Should raise ValueError or clamp\n37. **Apply negative discount** (invalid) - Should raise ValueError\n38. **Apply discount to zero subtotal** (edge) - Should return 0.0\n39. **Apply discount to negative subtotal** (edge) - Verify behavior\n\n### `calculate_shipping`\n\n40. **Subtotal below threshold** (normal) - Should return shipping_cost\n41. **Subtotal above threshold** (normal) - Should return 0.0 (free shipping)\n42. **Subtotal exactly at threshold** (edge) - Verify if free or not\n43. **Subtotal just below threshold** (edge) - Should charge shipping\n44. **Subtotal just above threshold** (edge) - Should be free\n45. **Zero subtotal** (edge) - Verify shipping cost behavior\n46. **Negative subtotal** (edge) - Verify behavior\n\n### `calculate_tax`\n\n47. **Tax on positive amount** (normal) - amount Ă— tax_rate\n48. **Tax on zero amount** (edge) - Should return 0.0\n49. **Tax on negative amount** (edge) - Verify behavior\n50. **Tax precision** (edge) - Verify floating-point rounding\n\n### `calculate_total`\n\n51. **Total with no discount, below threshold** (normal) - subtotal + shipping + tax\n52. **Total with no discount, above threshold** (normal) - subtotal + tax (free shipping)\n53. **Total with discount applied** (normal) - Verify full calculation chain\n54. **Total on empty order** (edge) - Should return shipping + tax on zero, or 0\n55. **Total with 100% discount** (edge) - Verify final amount\n56. **Total at exact threshold after discount** (edge) - Verify shipping decision\n57. **Total with default discount parameter** (normal) - Verify defaults to 0.0\n\n### `total_items`\n\n58. **Total items in empty order** (edge) - Should return 0\n59. **Total items with single item qty=1** (normal) - Should return 1\n60. **Total items with single item qty>1** (normal) - Should return quantity\n61. **Total items with multiple items** (normal) - Sum of all quantities\n62. **Total items after removal** (normal) - Verify count decreases\n\n### `clear_order`\n\n63. **Clear populated order** (normal) - Order should be empty after\n64. **Clear empty order** (edge) - Should not raise exception\n65. **Verify state after clear** (normal) - is_empty() returns True, total_items() returns 0\n\n### `list_items`\n\n66. **List items from empty order** (edge) - Should return empty list\n67. **List items with one item** (normal) - Should return list with one name\n68. **List items with multiple items** (normal) - Should return all names\n69. **List items after removal** (normal) - Removed item should not appear\n70. **List items return type** (normal) - Verify returns List[str]\n\n### `is_empty`\n\n71. **New order is empty** (normal) - Should return True\n72. **Order with items not empty** (normal) - Should return False\n73. **Order after clear is empty** (normal) - Should return True\n74. **Order after removing all items** (normal) - Should return True\n75. **Order after removing some items** (normal) - Should return False\n\n### Integration / Workflow Scenarios\n\n76. **Full order workflow** (integration) - Add items â†’ apply discount â†’ calculate total â†’ clear\n77. **Add then remove same item** (integration) - Verify order returns to previous state\n78. **Multiple discounts calculation** (integration) - Verify discount applies correctly in total\n79. **Threshold boundary with discount** (integration) - Order above threshold, discount brings below\n80. **Order modification and recalculation** (integration) - Add items, calculate, add more, recalculate",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.calculate_shipping(0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 1.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.00, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", 5.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", 5.00, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.00, 1)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 5.00, 1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 5.00, 1.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1e10, 1)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 5.00, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", \"five\", 1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(len(calc.list_items()), 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 3)\n        self.assertEqual(calc.get_subtotal(), 6.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.00, 10)\n        self.assertEqual(calc.get_subtotal(), 50.00)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.9, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_valid(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10)\n        self.assertEqual(result, -90.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(-50.0), 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(100.0), 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(-100.0), -23.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(33.33), 7.6659, places=4)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0, 1)\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        discounted = 100.0 * 0.9\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(10), expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(100), expected, places=2)\n\n    def test_calculate_total_exact_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        discounted = 125.0 * 0.8\n        expected = discounted * 1.23\n        self.assertAlmostEqual(calc.calculate_total(20), expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_qty_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_qty_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_populated(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_one_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n        self.assertIsInstance(result[0], str)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_some_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertFalse(calc.is_empty())\n\n    def test_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 20.0, 3)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n        total = calc.calculate_total(10)\n        discounted = 110.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        initial_empty = calc.is_empty()\n        calc.remove_item(\"Apple\")\n        self.assertFalse(initial_empty)\n        self.assertTrue(calc.is_empty())\n\n    def test_multiple_discounts_calculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0, 1)\n        total_with_10_discount = calc.calculate_total(10)\n        total_with_20_discount = calc.calculate_total(20)\n        self.assertGreater(total_with_10_discount, total_with_20_discount)\n\n    def test_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0, 1)\n        discounted = 120.0 * 0.8\n        self.assertLess(discounted, 100.0)\n        total = calc.calculate_total(20)\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_and_recalculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 50.0, 1)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Item2\", 60.0, 1)\n        total2 = calc.calculate_total()\n        self.assertGreater(total2, total1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_values(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.calculate_shipping(0), 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_single(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Banana\", 2.00)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_multiple_different(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.add_item(\"Orange\", 1.00, 1)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_same_name_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", -5.00, 1)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", 5.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"BadItem\", 5.00, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 5.00, 1)\n\n    def test_add_item_whitespace_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"   \", 5.00, 1)\n\n    def test_add_item_float_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", 5.00, 1.5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1e10, 1)\n        self.assertEqual(calc.get_subtotal(), 1e10)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Bulk\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_add_item_non_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(123, 5.00, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(TypeError):\n            calc.add_item(\"Item\", \"five\", 1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_string_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(len(calc.list_items()), 1)\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 3)\n        self.assertEqual(calc.get_subtotal(), 6.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 5.00, 10)\n        self.assertEqual(calc.get_subtotal(), 50.00)\n\n    def test_get_subtotal_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        calc.add_item(\"Item2\", 0.2, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.9, places=10)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_valid(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 110)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-100.0, 10)\n        self.assertEqual(result, -90.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(50.0), 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(150.0), 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.0), 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(99.99), 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(100.01), 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(0.0), 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_shipping(-50.0), 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(100.0), 23.0, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.calculate_tax(0.0), 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(-100.0), -23.0, places=2)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator()\n        self.assertAlmostEqual(calc.calculate_tax(33.33), 7.6659, places=4)\n\n    def test_calculate_total_no_discount_below_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_no_discount_above_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0, 1)\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        discounted = 100.0 * 0.9\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(10), expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0, 1)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(calc.calculate_total(100), expected, places=2)\n\n    def test_calculate_total_exact_threshold_after_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 125.0, 1)\n        discounted = 125.0 * 0.8\n        expected = discounted * 1.23\n        self.assertAlmostEqual(calc.calculate_total(20), expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(calc.calculate_total(), expected, places=2)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_qty_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_qty_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_populated(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_one_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.list_items(), [\"Banana\"])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n        self.assertIsInstance(result[0], str)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_some_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 1)\n        calc.add_item(\"Banana\", 2.00, 1)\n        calc.remove_item(\"Apple\")\n        self.assertFalse(calc.is_empty())\n\n    def test_full_order_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.add_item(\"Banana\", 20.0, 3)\n        self.assertEqual(calc.get_subtotal(), 110.0)\n        total = calc.calculate_total(10)\n        discounted = 110.0 * 0.9\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_add_then_remove_same_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        initial_empty = calc.is_empty()\n        calc.remove_item(\"Apple\")\n        self.assertFalse(initial_empty)\n        self.assertTrue(calc.is_empty())\n\n    def test_multiple_discounts_calculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 200.0, 1)\n        total_with_10_discount = calc.calculate_total(10)\n        total_with_20_discount = calc.calculate_total(20)\n        self.assertGreater(total_with_10_discount, total_with_20_discount)\n\n    def test_threshold_boundary_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 120.0, 1)\n        discounted = 120.0 * 0.8\n        self.assertLess(discounted, 100.0)\n        total = calc.calculate_total(20)\n        expected = (discounted + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_order_modification_and_recalculation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 50.0, 1)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Item2\", 60.0, 1)\n        total2 = calc.calculate_total()\n        self.assertGreater(total2, total1)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 158.11096954345703,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}