{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T22:07:07.492145",
  "response_time": 151.07758808135986,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_020\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze this `OrderCalculator` class to understand its structure and prepare for comprehensive test case development.\n\n## Class Analysis\n\n### Constructor Parameters\n- `tax_rate` (default 0.23 = 23%) - for tax calculations\n- `free_shipping_threshold` (default 100.0) - subtotal above which shipping is free\n- `shipping_cost` (default 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Edge cases: empty name, zero/negative price, zero/negative quantity, duplicate items, float quantity\n\n2. **`remove_item(name)`** - Removes item by name\n   - Edge cases: non-existent item, empty order, case sensitivity\n\n3. **`get_subtotal()`** - Returns sum of item prices Ă— quantities\n   - Edge cases: empty order, single item, multiple items\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Edge cases: zero discount, 100% discount, discount > 100%, negative discount\n\n5. **`calculate_shipping(discounted_subtotal)`** - Returns shipping cost\n   - Edge cases: exactly at threshold, just below/above threshold, zero subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, custom tax rate\n\n7. **`calculate_total(discount=0.0)`** - Full order total (subtotal - discount + shipping + tax)\n   - Edge cases: empty order, with/without discount, at shipping threshold\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Edge cases: empty order, items with quantity > 1\n\n9. **`clear_order()`** - Removes all items\n   - Edge cases: already empty order\n\n10. **`list_items()`** - Returns list of item names\n    - Edge cases: empty order, order of items\n\n11. **`is_empty()`** - Returns True if no items\n    - Edge cases: after adding/removing items\n\n### Key Testing Considerations\n\n- **State management**: Order maintains internal state across operations\n- **Numeric precision**: Float arithmetic for prices, taxes, discounts\n- **Threshold boundaries**: Free shipping at exactly 100.0\n- **Input validation**: How does class handle invalid inputs?\n- **Type correctness**: Return types (float, int, List[str], bool)\n- **Interaction between methods**: e.g., add_item â†’ get_subtotal â†’ calculate_total\n\n### Potential Exception Scenarios\n- Removing non-existent item (KeyError/ValueError expected)\n- Invalid price/quantity values\n- Invalid discount percentages\n\nI'm ready to generate comprehensive unit tests covering all these aspects.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Normal use** - Create instance with default parameters, verify defaults are applied\n2. **Normal use** - Create instance with custom tax_rate, free_shipping_threshold, shipping_cost\n3. **Edge case** - Create instance with zero tax_rate\n4. **Edge case** - Create instance with zero shipping_cost\n5. **Edge case** - Create instance with zero free_shipping_threshold\n6. **Invalid input** - Create instance with negative tax_rate\n7. **Invalid input** - Create instance with negative shipping_cost\n8. **Invalid input** - Create instance with negative free_shipping_threshold\n\n### `add_item(name, price, quantity=1)`\n\n9. **Normal use** - Add single item with default quantity\n10. **Normal use** - Add single item with explicit quantity > 1\n11. **Normal use** - Add multiple different items\n12. **Normal use** - Add same item twice (duplicate handling)\n13. **Edge case** - Add item with very large price\n14. **Edge case** - Add item with very small price (e.g., 0.01)\n15. **Edge case** - Add item with quantity = 0\n16. **Invalid input** - Add item with empty name\n17. **Invalid input** - Add item with negative price\n18. **Invalid input** - Add item with negative quantity\n19. **Invalid input** - Add item with non-numeric price type\n20. **Invalid input** - Add item with non-integer quantity\n\n### `remove_item(name)`\n\n21. **Normal use** - Remove existing item from order\n22. **Normal use** - Remove item, then verify subtotal updates\n23. **Edge case** - Remove item from single-item order (results in empty)\n24. **Exception** - Remove non-existent item\n25. **Exception** - Remove item from empty order\n26. **Edge case** - Case sensitivity when removing item\n\n### `get_subtotal()`\n\n27. **Normal use** - Get subtotal with single item (quantity=1)\n28. **Normal use** - Get subtotal with single item (quantity > 1)\n29. **Normal use** - Get subtotal with multiple items\n30. **Edge case** - Get subtotal of empty order (should be 0)\n31. **Edge case** - Verify float precision with multiple items\n\n### `apply_discount(subtotal, discount)`\n\n32. **Normal use** - Apply small discount (e.g., 10%)\n33. **Normal use** - Apply 50% discount\n34. **Edge case** - Apply 0% discount\n35. **Edge case** - Apply 100% discount\n36. **Edge case** - Apply discount on zero subtotal\n37. **Invalid input** - Apply discount > 100%\n38. **Invalid input** - Apply negative discount\n39. **Edge case** - Verify discount calculation precision\n\n### `calculate_shipping(discounted_subtotal)`\n\n40. **Normal use** - Calculate shipping when subtotal below threshold\n41. **Normal use** - Calculate shipping when subtotal above threshold (free)\n42. **Edge case** - Calculate shipping when subtotal exactly at threshold\n43. **Edge case** - Calculate shipping when subtotal just below threshold (99.99)\n44. **Edge case** - Calculate shipping when subtotal just above threshold (100.01)\n45. **Edge case** - Calculate shipping with zero subtotal\n46. **Edge case** - Calculate shipping with custom threshold value\n\n### `calculate_tax(amount)`\n\n47. **Normal use** - Calculate tax on positive amount with default rate\n48. **Normal use** - Calculate tax with custom tax rate\n49. **Edge case** - Calculate tax on zero amount\n50. **Edge case** - Calculate tax with zero tax rate\n51. **Invalid input** - Calculate tax on negative amount\n52. **Edge case** - Verify tax calculation precision\n\n### `calculate_total(discount=0.0)`\n\n53. **Normal use** - Calculate total with items, no discount\n54. **Normal use** - Calculate total with items and discount\n55. **Normal use** - Calculate total qualifying for free shipping\n56. **Normal use** - Calculate total not qualifying for free shipping\n57. **Edge case** - Calculate total of empty order\n58. **Edge case** - Calculate total at exactly free shipping threshold\n59. **Edge case** - Calculate total with 100% discount\n60. **Edge case** - Verify total = subtotal - discount + shipping + tax formula\n61. **Invalid input** - Calculate total with negative discount\n62. **Invalid input** - Calculate total with discount > 100%\n\n### `total_items()`\n\n63. **Normal use** - Count items with single item (quantity=1)\n64. **Normal use** - Count items with single item (quantity > 1)\n65. **Normal use** - Count items with multiple items\n66. **Edge case** - Count items in empty order (should be 0)\n67. **Edge case** - Count after adding and removing items\n\n### `clear_order()`\n\n68. **Normal use** - Clear order with items\n69. **Edge case** - Clear already empty order\n70. **Normal use** - Verify order is empty after clear (is_empty returns True)\n71. **Normal use** - Verify subtotal is 0 after clear\n\n### `list_items()`\n\n72. **Normal use** - List items with single item\n73. **Normal use** - List items with multiple items\n74. **Edge case** - List items from empty order (empty list)\n75. **Edge case** - Verify return type is List[str]\n76. **Normal use** - Verify item names match added items\n\n### `is_empty()`\n\n77. **Normal use** - Check empty on new order (True)\n78. **Normal use** - Check empty after adding item (False)\n79. **Normal use** - Check empty after adding then removing item (True)\n80. **Normal use** - Check empty after clear_order (True)\n\n### Integration/Workflow Scenarios\n\n81. **Integration** - Full workflow: add items Ă˘â€ ' apply discount Ă˘â€ ' calculate total\n82. **Integration** - Add item, remove item, add different item, calculate total\n83. **Integration** - Multiple operations maintaining consistent state\n84. **Integration** - Verify shipping threshold interaction with discount",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 0.01)\n        self.assertEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_subtotal_updates(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_remove_item_single_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_nonexistent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.get_subtotal(), 9.00)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(99.99, 33.33)\n        self.assertAlmostEqual(result, 66.66, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(40.0), 5.0)\n        self.assertEqual(calc.calculate_shipping(60.0), 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total(10.0)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        self.assertGreater(total, 50.0 + 10.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_over_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_subtotal_zero_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n        self.assertTrue(all(isinstance(item, str) for item in result))\n\n    def test_list_items_matches_added(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(set(items), {\"Apple\", \"Banana\", \"Orange\"})\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0)\n        calc.add_item(\"Keyboard\", 75.0)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 600.0)\n        total = calc.calculate_total(10.0)\n        discounted = 540.0\n        shipping = 0.0\n        tax = 540.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_add_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 120.0)\n        total = calc.calculate_total()\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_consistent_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 2)\n        calc.add_item(\"Item2\", 40.0)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_integration_shipping_threshold_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total_no_discount = calc.calculate_total(0.0)\n        self.assertEqual(calc.calculate_shipping(110.0), 0.0)\n        total_with_discount = calc.calculate_total(20.0)\n        discounted = 88.0\n        shipping = 10.0\n        self.assertEqual(calc.calculate_shipping(discounted), 10.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.10, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.10)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 999999.99)\n        self.assertEqual(calc.get_subtotal(), 999999.99)\n\n    def test_add_item_very_small_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Cheap\", 0.01)\n        self.assertEqual(calc.get_subtotal(), 0.01)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n\n    def test_remove_item_subtotal_updates(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 2.00)\n\n    def test_remove_item_single_item_order(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_nonexistent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.remove_item(\"Apple\")\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.get_subtotal(), 1.50)\n\n    def test_get_subtotal_single_item_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 4)\n        self.assertEqual(calc.get_subtotal(), 6.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.get_subtotal(), 9.00)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 0.1, 3)\n        self.assertAlmostEqual(calc.get_subtotal(), 0.3, places=2)\n\n    def test_apply_discount_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 50.0)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 150.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_precision(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(99.99, 33.33)\n        self.assertAlmostEqual(result, 66.66, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_custom_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.calculate_shipping(40.0), 5.0)\n        self.assertEqual(calc.calculate_shipping(60.0), 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_custom_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator()\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(99.99)\n        self.assertAlmostEqual(result, 22.9977, places=2)\n\n    def test_calculate_total_no_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        expected = 50.0 + 10.0 + (60.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total(10.0)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 150.0)\n        total = calc.calculate_total()\n        expected = 150.0 + 0.0 + (150.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_no_free_shipping(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0)\n        total = calc.calculate_total()\n        self.assertGreater(total, 50.0 + 10.0)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_exactly_at_threshold(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total()\n        expected = 100.0 + 0.0 + (100.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        total = calc.calculate_total(100.0)\n        expected = 0.0 + 10.0 + (10.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-10.0)\n\n    def test_calculate_total_discount_over_hundred(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(150.0)\n\n    def test_total_items_single_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_quantity_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 2.00, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 3)\n        calc.add_item(\"Banana\", 2.00, 2)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_subtotal_zero_after(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_return_type(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        result = calc.list_items()\n        self.assertIsInstance(result, list)\n        self.assertTrue(all(isinstance(item, str) for item in result))\n\n    def test_list_items_matches_added(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 2.00)\n        calc.add_item(\"Orange\", 3.00)\n        items = calc.list_items()\n        self.assertEqual(set(items), {\"Apple\", \"Banana\", \"Orange\"})\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_add_then_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_full_workflow(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Laptop\", 500.0)\n        calc.add_item(\"Mouse\", 25.0)\n        calc.add_item(\"Keyboard\", 75.0)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 600.0)\n        total = calc.calculate_total(10.0)\n        discounted = 540.0\n        shipping = 0.0\n        tax = 540.0 * 0.23\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_add_calculate(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Banana\", 120.0)\n        total = calc.calculate_total()\n        expected = 120.0 + 0.0 + (120.0 * 0.23)\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_consistent_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 30.0, 2)\n        calc.add_item(\"Item2\", 40.0)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n        self.assertFalse(calc.is_empty())\n        calc.remove_item(\"Item1\")\n        self.assertEqual(calc.total_items(), 1)\n        self.assertEqual(calc.get_subtotal(), 40.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_integration_shipping_threshold_with_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 110.0)\n        total_no_discount = calc.calculate_total(0.0)\n        self.assertEqual(calc.calculate_shipping(110.0), 0.0)\n        total_with_discount = calc.calculate_total(20.0)\n        discounted = 88.0\n        shipping = 10.0\n        self.assertEqual(calc.calculate_shipping(discounted), 10.0)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 151.07758808135986,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}