{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T18:26:56.615122",
  "response_time": 170.58735275268555,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_011\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating comprehensive unit tests.\n\n## Class Analysis\n\n### Overview\n`OrderCalculator` is an e-commerce order management class that handles items, calculates prices with tax, discounts, and shipping.\n\n### Constructor Parameters\n- `tax_rate` (default 0.23 / 23%) - tax multiplier\n- `free_shipping_threshold` (default 100.0) - subtotal above which shipping is free\n- `shipping_cost` (default 10.0) - fixed shipping cost when below threshold\n\n### Public Methods to Test\n\n| Method | Purpose | Key Considerations |\n|--------|---------|-------------------|\n| `add_item(name, price, quantity=1)` | Add item to order | Invalid price/quantity, duplicates, empty name |\n| `remove_item(name)` | Remove item by name | Non-existent item, empty order |\n| `get_subtotal()` | Sum of (price Ă— quantity) | Empty order, single/multiple items |\n| `apply_discount(subtotal, discount)` | Apply percentage/absolute discount | Negative discount, >100%, zero subtotal |\n| `calculate_shipping(discounted_subtotal)` | Determine shipping cost | At/above/below threshold, exact boundary |\n| `calculate_tax(amount)` | Calculate tax on amount | Zero amount, negative values |\n| `calculate_total(discount=0.0)` | Full calculation with all components | Integration of all calculations |\n| `total_items()` | Count total item quantity | Empty, multiple items with quantities |\n| `clear_order()` | Empty the order | Already empty, with items |\n| `list_items()` | Return list of item names | Empty, multiple items |\n| `is_empty()` | Check if order has items | Empty vs non-empty states |\n\n### Edge Cases & Invalid Inputs to Consider\n\n**Item Management:**\n- Negative price, zero price\n- Negative quantity, zero quantity\n- Empty string name\n- Adding same item twice (update or error?)\n- Removing non-existent item\n\n**Discount Handling:**\n- Discount > 100% (what happens?)\n- Negative discount\n- Discount exactly 100%\n- Discount on zero subtotal\n\n**Shipping Logic:**\n- Subtotal exactly at threshold (100.0)\n- Just below threshold (99.99)\n- Just above threshold (100.01)\n- Zero/negative subtotal\n\n**Tax Calculation:**\n- Zero amount\n- Negative amount\n- Custom tax rates (0%, 100%, negative?)\n\n**Boundary Conditions:**\n- Float precision issues\n- Very large numbers\n- Constructor with invalid rates\n\n### State Transitions to Test\n1. Empty â†’ Add item â†’ Non-empty\n2. Non-empty â†’ Remove all â†’ Empty\n3. Non-empty â†’ Clear â†’ Empty\n4. Multiple adds â†’ Correct subtotal\n5. Full workflow: add â†’ discount â†’ shipping â†’ tax â†’ total\n\n### Expected Exception Scenarios\n- Invalid item parameters (ValueError expected)\n- Remove non-existent item (KeyError/ValueError expected)\n- Invalid discount values\n- Invalid constructor parameters\n\nI'm now ready to generate comprehensive unit tests covering all these scenarios.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 1 | `__init__` | Normal | Default parameters create valid calculator |\n| 2 | `__init__` | Normal | Custom tax_rate is accepted |\n| 3 | `__init__` | Normal | Custom free_shipping_threshold is accepted |\n| 4 | `__init__` | Normal | Custom shipping_cost is accepted |\n| 5 | `__init__` | Edge | Zero tax_rate (0%) |\n| 6 | `__init__` | Edge | Zero shipping_cost |\n| 7 | `__init__` | Edge | Zero free_shipping_threshold |\n| 8 | `__init__` | Invalid | Negative tax_rate |\n| 9 | `__init__` | Invalid | Negative shipping_cost |\n| 10 | `__init__` | Invalid | Negative free_shipping_threshold |\n\n### `add_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 11 | `add_item` | Normal | Add single item with default quantity |\n| 12 | `add_item` | Normal | Add item with explicit quantity > 1 |\n| 13 | `add_item` | Normal | Add multiple different items |\n| 14 | `add_item` | Edge | Add item with quantity = 1 explicitly |\n| 15 | `add_item` | Edge | Add item with very large quantity |\n| 16 | `add_item` | Edge | Add item with very large price |\n| 17 | `add_item` | Edge | Add item with price having many decimal places |\n| 18 | `add_item` | Edge | Add same item twice (duplicate handling) |\n| 19 | `add_item` | Invalid | Negative price |\n| 20 | `add_item` | Invalid | Zero price |\n| 21 | `add_item` | Invalid | Negative quantity |\n| 22 | `add_item` | Invalid | Zero quantity |\n| 23 | `add_item` | Invalid | Empty string name |\n| 24 | `add_item` | Invalid | None as name |\n| 25 | `add_item` | Invalid | Non-string name type |\n| 26 | `add_item` | Invalid | Non-numeric price |\n| 27 | `add_item` | Invalid | Non-integer quantity |\n\n### `remove_item`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 28 | `remove_item` | Normal | Remove existing item |\n| 29 | `remove_item` | Normal | Remove item leaves other items intact |\n| 30 | `remove_item` | Edge | Remove last item makes order empty |\n| 31 | `remove_item` | Invalid | Remove non-existent item |\n| 32 | `remove_item` | Invalid | Remove from empty order |\n| 33 | `remove_item` | Invalid | Remove with empty string name |\n| 34 | `remove_item` | Invalid | Remove with None name |\n\n### `get_subtotal`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 35 | `get_subtotal` | Normal | Single item subtotal (price Ă— quantity) |\n| 36 | `get_subtotal` | Normal | Multiple items subtotal |\n| 37 | `get_subtotal` | Normal | Item with quantity > 1 |\n| 38 | `get_subtotal` | Edge | Empty order returns 0 |\n| 39 | `get_subtotal` | Edge | Subtotal with float precision check |\n\n### `apply_discount`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 40 | `apply_discount` | Normal | Apply 10% discount |\n| 41 | `apply_discount` | Normal | Apply 50% discount |\n| 42 | `apply_discount` | Edge | Apply 0% discount (no change) |\n| 43 | `apply_discount` | Edge | Apply 100% discount (free) |\n| 44 | `apply_discount` | Edge | Discount on zero subtotal |\n| 45 | `apply_discount` | Edge | Very small discount (0.01%) |\n| 46 | `apply_discount` | Invalid | Negative discount |\n| 47 | `apply_discount` | Invalid | Discount > 100% |\n| 48 | `apply_discount` | Invalid | Negative subtotal |\n\n### `calculate_shipping`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 49 | `calculate_shipping` | Normal | Below threshold returns shipping_cost |\n| 50 | `calculate_shipping` | Normal | Above threshold returns 0 (free shipping) |\n| 51 | `calculate_shipping` | Edge | Exactly at threshold (boundary) |\n| 52 | `calculate_shipping` | Edge | Just below threshold (99.99) |\n| 53 | `calculate_shipping` | Edge | Just above threshold (100.01) |\n| 54 | `calculate_shipping` | Edge | Zero subtotal |\n| 55 | `calculate_shipping` | Edge | Very large subtotal |\n| 56 | `calculate_shipping` | Invalid | Negative discounted_subtotal |\n\n### `calculate_tax`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 57 | `calculate_tax` | Normal | Tax on positive amount |\n| 58 | `calculate_tax` | Normal | Tax calculation accuracy |\n| 59 | `calculate_tax` | Edge | Tax on zero amount |\n| 60 | `calculate_tax` | Edge | Tax with 0% tax_rate |\n| 61 | `calculate_tax` | Edge | Tax on very small amount |\n| 62 | `calculate_tax` | Invalid | Tax on negative amount |\n\n### `calculate_total`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 63 | `calculate_total` | Normal | Total with no discount |\n| 64 | `calculate_total` | Normal | Total with discount applied |\n| 65 | `calculate_total` | Normal | Total includes shipping (below threshold) |\n| 66 | `calculate_total` | Normal | Total with free shipping (above threshold) |\n| 67 | `calculate_total` | Normal | Total includes correct tax |\n| 68 | `calculate_total` | Edge | Empty order total |\n| 69 | `calculate_total` | Edge | Total with 100% discount |\n| 70 | `calculate_total` | Integration | Full calculation: subtotal + discount + shipping + tax |\n| 71 | `calculate_total` | Invalid | Negative discount |\n| 72 | `calculate_total` | Invalid | Discount > 100% |\n\n### `total_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 73 | `total_items` | Normal | Count items with quantity = 1 |\n| 74 | `total_items` | Normal | Count items with quantity > 1 |\n| 75 | `total_items` | Normal | Sum quantities across multiple items |\n| 76 | `total_items` | Edge | Empty order returns 0 |\n\n### `clear_order`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 77 | `clear_order` | Normal | Clear order with items |\n| 78 | `clear_order` | Normal | After clear, order is empty |\n| 79 | `clear_order` | Normal | After clear, subtotal is 0 |\n| 80 | `clear_order` | Edge | Clear already empty order |\n\n### `list_items`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 81 | `list_items` | Normal | List single item |\n| 82 | `list_items` | Normal | List multiple items |\n| 83 | `list_items` | Edge | Empty order returns empty list |\n| 84 | `list_items` | Edge | Returned list is independent (no mutation) |\n\n### `is_empty`\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 85 | `is_empty` | Normal | New order is empty |\n| 86 | `is_empty` | Normal | Order with items is not empty |\n| 87 | `is_empty` | Edge | After adding then removing all items |\n| 88 | `is_empty` | Edge | After clear_order |\n\n### Integration / State Transition Scenarios\n\n| # | Method | Case Type | Intent |\n|---|--------|-----------|--------|\n| 89 | Multiple | Integration | Add â†’ get_subtotal â†’ remove â†’ get_subtotal |\n| 90 | Multiple | Integration | Full order workflow: add items â†’ apply discount â†’ calculate total |\n| 91 | Multiple | Integration | Boundary: subtotal exactly at free_shipping_threshold after discount |\n| 92 | Multiple | State | Verify items persist after calculate_total |\n| 93 | Multiple | State | Multiple calculate_total calls return same result |",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n\nclass TestAddItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_item_single_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_explicit_quantity_greater_than_one(self):\n        self.calc.add_item(\"Banana\", 0.75, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.add_item(\"Orange\", 2.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_item_quantity_one_explicitly(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_add_item_very_large_quantity(self):\n        self.calc.add_item(\"Bulk Item\", 0.01, 1000000)\n        self.assertEqual(self.calc.total_items(), 1000000)\n\n    def test_add_item_very_large_price(self):\n        self.calc.add_item(\"Expensive\", 999999.99)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_price_many_decimal_places(self):\n        self.calc.add_item(\"Precise\", 1.23456789)\n        self.assertGreater(self.calc.get_subtotal(), 0)\n\n    def test_add_same_item_twice(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_item_negative_price_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Bad\", -1.00)\n\n    def test_add_item_zero_price_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free\", 0.0)\n\n    def test_add_item_negative_quantity_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Bad\", 1.00, -1)\n\n    def test_add_item_zero_quantity_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"None\", 1.00, 0)\n\n    def test_add_item_empty_name_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.00)\n\n    def test_add_item_none_name_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(None, 1.00)\n\n    def test_add_item_non_string_name_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(123, 1.00)\n\n    def test_add_item_non_numeric_price_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", \"ten\")\n\n    def test_add_item_non_integer_quantity_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", 1.00, 2.5)\n\n\nclass TestRemoveItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_item_leaves_others_intact(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.remove_item(\"Apple\")\n        self.assertIn(\"Banana\", self.calc.list_items())\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_last_item_makes_order_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_non_existent_item_raises(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order_raises(self):\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_empty_string_name_raises(self):\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"\")\n\n    def test_remove_none_name_raises(self):\n        with self.assertRaises((ValueError, KeyError, TypeError)):\n            self.calc.remove_item(None)\n\n\nclass TestGetSubtotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_get_subtotal_single_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 3.00, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 0.75, 4)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 6.00, places=2)\n\n    def test_get_subtotal_item_quantity_greater_than_one(self):\n        self.calc.add_item(\"Apple\", 10.00, 5)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 50.00, places=2)\n\n    def test_get_subtotal_empty_order_returns_zero(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        self.calc.add_item(\"Item1\", 0.1, 3)\n        self.calc.add_item(\"Item2\", 0.2, 3)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.9, places=2)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_discount_ten_percent(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_fifty_percent(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_hundred_percent(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_very_small(self):\n        result = self.calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_hundred_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_negative_subtotal_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_shipping_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        result = self.calc.calculate_shipping(1000000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-50.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_accuracy(self):\n        result = self.calc.calculate_tax(50.0)\n        self.assertAlmostEqual(result, 11.5, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_negative_amount_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_total_no_discount(self):\n        self.calc.add_item(\"Apple\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        self.calc.add_item(\"Apple\", 100.0, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_includes_shipping_below_threshold(self):\n        self.calc.add_item(\"Apple\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_above_threshold(self):\n        self.calc.add_item(\"Expensive\", 150.0, 1)\n        total = self.calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_includes_correct_tax(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total()\n        subtotal_with_shipping = 100.0\n        expected = subtotal_with_shipping * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_calculation(self):\n        self.calc.add_item(\"Item1\", 40.0, 2)\n        self.calc.add_item(\"Item2\", 30.0, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        subtotal = 80.0 + 30.0\n        discounted = subtotal * 0.9\n        shipping = 10.0 if discounted < 100.0 else 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount_raises(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_over_hundred_raises(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=110.0)\n\n\nclass TestTotalItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_items_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_total_items_quantity_greater_than_one(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_sum_across_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 0.75, 3)\n        self.calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(self.calc.total_items(), 9)\n\n    def test_total_items_empty_order(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n\nclass TestClearOrder(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_order_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_makes_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(len(self.calc.list_items()), 0)\n\n    def test_clear_order_subtotal_zero(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_clear_already_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestListItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_items_single(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_independent_no_mutation(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(len(self.calc.list_items()), 1)\n\n\nclass TestIsEmpty(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_is_empty_new_order(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_removing_all(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_get_subtotal_remove_get_subtotal(self):\n        self.calc.add_item(\"Apple\", 10.0, 2)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 20.0, places=2)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_full_order_workflow(self):\n        self.calc.add_item(\"Item1\", 50.0, 2)\n        self.calc.add_item(\"Item2\", 25.0, 2)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 150.0, places=2)\n        discounted = self.calc.apply_discount(subtotal, 10.0)\n        self.assertAlmostEqual(discounted, 135.0, places=2)\n        shipping = self.calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = 135.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_boundary_subtotal_at_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 111.11, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        discounted = 111.11 * 0.9\n        shipping = 0.0 if discounted >= 100.0 else 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_items_persist_after_calculate_total(self):\n        self.calc.add_item(\"Apple\", 10.0)\n        self.calc.add_item(\"Banana\", 20.0)\n        self.calc.calculate_total()\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_multiple_calculate_total_same_result(self):\n        self.calc.add_item(\"Item\", 50.0, 2)\n        total1 = self.calc.calculate_total(discount=5.0)\n        total2 = self.calc.calculate_total(discount=5.0)\n        self.assertAlmostEqual(total1, total2, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculatorInit(unittest.TestCase):\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_negative_tax_rate_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold_raises(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-10.0)\n\n\nclass TestAddItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_item_single_default_quantity(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertIn(\"Apple\", self.calc.list_items())\n\n    def test_add_item_explicit_quantity_greater_than_one(self):\n        self.calc.add_item(\"Banana\", 0.75, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.add_item(\"Orange\", 2.00)\n        self.assertEqual(len(self.calc.list_items()), 3)\n\n    def test_add_item_quantity_one_explicitly(self):\n        self.calc.add_item(\"Apple\", 1.50, 1)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_add_item_very_large_quantity(self):\n        self.calc.add_item(\"Bulk Item\", 0.01, 1000000)\n        self.assertEqual(self.calc.total_items(), 1000000)\n\n    def test_add_item_very_large_price(self):\n        self.calc.add_item(\"Expensive\", 999999.99)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 999999.99, places=2)\n\n    def test_add_item_price_many_decimal_places(self):\n        self.calc.add_item(\"Precise\", 1.23456789)\n        self.assertGreater(self.calc.get_subtotal(), 0)\n\n    def test_add_same_item_twice(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_add_item_negative_price_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Bad\", -1.00)\n\n    def test_add_item_zero_price_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Free\", 0.0)\n\n    def test_add_item_negative_quantity_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"Bad\", 1.00, -1)\n\n    def test_add_item_zero_quantity_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"None\", 1.00, 0)\n\n    def test_add_item_empty_name_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.00)\n\n    def test_add_item_none_name_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(None, 1.00)\n\n    def test_add_item_non_string_name_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(123, 1.00)\n\n    def test_add_item_non_numeric_price_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", \"ten\")\n\n    def test_add_item_non_integer_quantity_raises(self):\n        with self.assertRaises((ValueError, TypeError)):\n            self.calc.add_item(\"Item\", 1.00, 2.5)\n\n\nclass TestRemoveItem(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_item_leaves_others_intact(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.remove_item(\"Apple\")\n        self.assertIn(\"Banana\", self.calc.list_items())\n        self.assertNotIn(\"Apple\", self.calc.list_items())\n\n    def test_remove_last_item_makes_order_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_remove_non_existent_item_raises(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"Banana\")\n\n    def test_remove_from_empty_order_raises(self):\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"Apple\")\n\n    def test_remove_empty_string_name_raises(self):\n        with self.assertRaises((ValueError, KeyError)):\n            self.calc.remove_item(\"\")\n\n    def test_remove_none_name_raises(self):\n        with self.assertRaises((ValueError, KeyError, TypeError)):\n            self.calc.remove_item(None)\n\n\nclass TestGetSubtotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_get_subtotal_single_item(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 3.00, places=2)\n\n    def test_get_subtotal_multiple_items(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 0.75, 4)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 6.00, places=2)\n\n    def test_get_subtotal_item_quantity_greater_than_one(self):\n        self.calc.add_item(\"Apple\", 10.00, 5)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 50.00, places=2)\n\n    def test_get_subtotal_empty_order_returns_zero(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_float_precision(self):\n        self.calc.add_item(\"Item1\", 0.1, 3)\n        self.calc.add_item(\"Item2\", 0.2, 3)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.9, places=2)\n\n\nclass TestApplyDiscount(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_apply_discount_ten_percent(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertAlmostEqual(result, 90.0, places=2)\n\n    def test_apply_discount_fifty_percent(self):\n        result = self.calc.apply_discount(100.0, 50.0)\n        self.assertAlmostEqual(result, 50.0, places=2)\n\n    def test_apply_discount_zero_percent(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertAlmostEqual(result, 100.0, places=2)\n\n    def test_apply_discount_hundred_percent(self):\n        result = self.calc.apply_discount(100.0, 100.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_on_zero_subtotal(self):\n        result = self.calc.apply_discount(0.0, 50.0)\n        self.assertAlmostEqual(result, 0.0, places=2)\n\n    def test_apply_discount_very_small(self):\n        result = self.calc.apply_discount(100.0, 0.01)\n        self.assertAlmostEqual(result, 99.99, places=2)\n\n    def test_apply_discount_negative_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_apply_discount_greater_than_hundred_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, 110.0)\n\n    def test_apply_discount_negative_subtotal_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(-100.0, 10.0)\n\n\nclass TestCalculateShipping(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_shipping_below_threshold(self):\n        result = self.calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        result = self.calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        result = self.calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        result = self.calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        result = self.calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        result = self.calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_very_large_subtotal(self):\n        result = self.calc.calculate_shipping(1000000.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_shipping(-50.0)\n\n\nclass TestCalculateTax(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_tax_positive_amount(self):\n        result = self.calc.calculate_tax(100.0)\n        self.assertAlmostEqual(result, 23.0, places=2)\n\n    def test_calculate_tax_accuracy(self):\n        result = self.calc.calculate_tax(50.0)\n        self.assertAlmostEqual(result, 11.5, places=2)\n\n    def test_calculate_tax_zero_amount(self):\n        result = self.calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_very_small_amount(self):\n        result = self.calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_negative_amount_raises(self):\n        with self.assertRaises(ValueError):\n            self.calc.calculate_tax(-100.0)\n\n\nclass TestCalculateTotal(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_calculate_total_no_discount(self):\n        self.calc.add_item(\"Apple\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        self.calc.add_item(\"Apple\", 100.0, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = (90.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_includes_shipping_below_threshold(self):\n        self.calc.add_item(\"Apple\", 50.0, 1)\n        total = self.calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_free_shipping_above_threshold(self):\n        self.calc.add_item(\"Expensive\", 150.0, 1)\n        total = self.calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_includes_correct_tax(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total()\n        subtotal_with_shipping = 100.0\n        expected = subtotal_with_shipping * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        total = self.calc.calculate_total()\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        self.calc.add_item(\"Item\", 100.0, 1)\n        total = self.calc.calculate_total(discount=100.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_full_calculation(self):\n        self.calc.add_item(\"Item1\", 40.0, 2)\n        self.calc.add_item(\"Item2\", 30.0, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        subtotal = 80.0 + 30.0\n        discounted = subtotal * 0.9\n        shipping = 10.0 if discounted < 100.0 else 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount_raises(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=-10.0)\n\n    def test_calculate_total_discount_over_hundred_raises(self):\n        self.calc.add_item(\"Item\", 100.0)\n        with self.assertRaises(ValueError):\n            self.calc.calculate_total(discount=110.0)\n\n\nclass TestTotalItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_total_items_quantity_one(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(self.calc.total_items(), 1)\n\n    def test_total_items_quantity_greater_than_one(self):\n        self.calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_total_items_sum_across_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50, 2)\n        self.calc.add_item(\"Banana\", 0.75, 3)\n        self.calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(self.calc.total_items(), 9)\n\n    def test_total_items_empty_order(self):\n        self.assertEqual(self.calc.total_items(), 0)\n\n\nclass TestClearOrder(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_clear_order_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n    def test_clear_order_makes_empty(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(len(self.calc.list_items()), 0)\n\n    def test_clear_order_subtotal_zero(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_clear_already_empty_order(self):\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestListItems(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_list_items_single(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        self.assertEqual(items, [\"Apple\"])\n\n    def test_list_items_multiple(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.add_item(\"Banana\", 0.75)\n        items = self.calc.list_items()\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        items = self.calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_independent_no_mutation(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        items = self.calc.list_items()\n        items.append(\"Fake\")\n        self.assertEqual(len(self.calc.list_items()), 1)\n\n\nclass TestIsEmpty(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_is_empty_new_order(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_with_items(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_is_empty_after_removing_all(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        self.calc.add_item(\"Apple\", 1.50)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n\n\nclass TestIntegration(unittest.TestCase):\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_add_get_subtotal_remove_get_subtotal(self):\n        self.calc.add_item(\"Apple\", 10.0, 2)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 20.0, places=2)\n        self.calc.remove_item(\"Apple\")\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_full_order_workflow(self):\n        self.calc.add_item(\"Item1\", 50.0, 2)\n        self.calc.add_item(\"Item2\", 25.0, 2)\n        subtotal = self.calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 150.0, places=2)\n        discounted = self.calc.apply_discount(subtotal, 10.0)\n        self.assertAlmostEqual(discounted, 135.0, places=2)\n        shipping = self.calc.calculate_shipping(discounted)\n        self.assertEqual(shipping, 0.0)\n        total = self.calc.calculate_total(discount=10.0)\n        expected = 135.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_boundary_subtotal_at_threshold_after_discount(self):\n        self.calc.add_item(\"Item\", 111.11, 1)\n        total = self.calc.calculate_total(discount=10.0)\n        discounted = 111.11 * 0.9\n        shipping = 0.0 if discounted >= 100.0 else 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_items_persist_after_calculate_total(self):\n        self.calc.add_item(\"Apple\", 10.0)\n        self.calc.add_item(\"Banana\", 20.0)\n        self.calc.calculate_total()\n        self.assertEqual(len(self.calc.list_items()), 2)\n\n    def test_multiple_calculate_total_same_result(self):\n        self.calc.add_item(\"Item\", 50.0, 2)\n        total1 = self.calc.calculate_total(discount=5.0)\n        total2 = self.calc.calculate_total(discount=5.0)\n        self.assertAlmostEqual(total1, total2, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 170.58735275268555,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}