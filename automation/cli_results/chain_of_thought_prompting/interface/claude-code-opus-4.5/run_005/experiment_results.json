{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-30T03:20:51.134707",
  "response_time": 170.19979572296143,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_005\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to prepare for generating unit tests.\n\n## Class Analysis\n\n### Class Purpose\n`OrderCalculator` is an e-commerce order management class that handles items in a shopping cart, calculates prices with tax, discounts, and shipping.\n\n### Constructor Parameters\n- `tax_rate` (default 0.23) - 23% tax rate\n- `free_shipping_threshold` (default 100.0) - orders above this get free shipping\n- `shipping_cost` (default 10.0) - flat shipping cost when below threshold\n\n### Public Methods to Test\n\n1. **`add_item(name, price, quantity=1)`** - Adds item to order\n   - Typical: add single item, add item with quantity > 1\n   - Edge cases: quantity = 0, negative quantity, negative price, empty name, duplicate item names\n   - Invalid: non-string name, non-numeric price/quantity\n\n2. **`remove_item(name)`** - Removes item from order\n   - Typical: remove existing item\n   - Edge cases: remove non-existent item, remove from empty order\n\n3. **`get_subtotal()`** - Returns sum of item prices Ă— quantities\n   - Typical: order with multiple items\n   - Edge cases: empty order, single item\n\n4. **`apply_discount(subtotal, discount)`** - Applies discount to subtotal\n   - Typical: percentage discount (0.1 = 10%)\n   - Edge cases: 0% discount, 100% discount, discount > 100%, negative discount\n\n5. **`calculate_shipping(discounted_subtotal)`** - Determines shipping cost\n   - Typical: below threshold (pay shipping), above threshold (free)\n   - Edge cases: exactly at threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount)`** - Calculates tax on amount\n   - Typical: positive amount\n   - Edge cases: zero amount, negative amount\n\n7. **`calculate_total(discount=0.0)`** - Full calculation with discount\n   - Typical: order with items and discount\n   - Edge cases: empty order, 100% discount, no discount\n\n8. **`total_items()`** - Returns total quantity of all items\n   - Typical: multiple items with varying quantities\n   - Edge cases: empty order\n\n9. **`clear_order()`** - Removes all items\n   - Typical: clear populated order\n   - Edge cases: clear already empty order\n\n10. **`list_items()`** - Returns list of item descriptions\n    - Typical: multiple items\n    - Edge cases: empty order\n\n11. **`is_empty()`** - Checks if order has no items\n    - Typical: empty vs non-empty order\n\n### Key Relationships to Test\n- Subtotal â†’ Discount â†’ Shipping threshold â†’ Tax â†’ Total\n- Adding/removing items affects subtotal, total_items, is_empty, list_items\n- Free shipping threshold boundary conditions\n- Tax calculation applied after discount\n\n### Expected Exceptions/Validation\n- Invalid item data (negative price, invalid quantity)\n- Removing non-existent items\n- Invalid discount values\n\nI'm ready to generate test scenarios or test code when you proceed to the next step.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Normal use** - Create instance with default parameters, verify default values are set correctly\n2. **Normal use** - Create instance with custom tax_rate, free_shipping_threshold, and shipping_cost\n3. **Edge case** - Create instance with tax_rate = 0 (no tax)\n4. **Edge case** - Create instance with free_shipping_threshold = 0 (always free shipping)\n5. **Invalid input** - Create instance with negative tax_rate\n6. **Invalid input** - Create instance with negative shipping_cost\n7. **Invalid input** - Create instance with negative free_shipping_threshold\n\n### `add_item(name, price, quantity)`\n\n8. **Normal use** - Add single item with default quantity (1)\n9. **Normal use** - Add single item with explicit quantity > 1\n10. **Normal use** - Add multiple different items\n11. **Normal use** - Add same item name twice (should it accumulate or replace?)\n12. **Edge case** - Add item with quantity = 0\n13. **Edge case** - Add item with price = 0 (free item)\n14. **Edge case** - Add item with very large price\n15. **Edge case** - Add item with very large quantity\n16. **Edge case** - Add item with empty string name\n17. **Invalid input** - Add item with negative price\n18. **Invalid input** - Add item with negative quantity\n19. **Invalid input** - Add item with non-string name (None, int)\n20. **Invalid input** - Add item with non-numeric price (string, None)\n21. **Invalid input** - Add item with non-integer quantity (float, string)\n\n### `remove_item(name)`\n\n22. **Normal use** - Remove existing item from order\n23. **Normal use** - Remove item and verify it no longer appears in list_items\n24. **Edge case** - Remove item from order with only one item (order becomes empty)\n25. **Edge case** - Remove non-existent item (should raise exception or silently fail?)\n26. **Edge case** - Remove item from empty order\n27. **Edge case** - Remove item with empty string name\n28. **Invalid input** - Remove with None as name\n\n### `get_subtotal()`\n\n29. **Normal use** - Get subtotal with single item\n30. **Normal use** - Get subtotal with multiple items (different prices and quantities)\n31. **Edge case** - Get subtotal of empty order (should return 0)\n32. **Edge case** - Get subtotal with items having quantity > 1\n33. **Edge case** - Get subtotal with zero-price items\n\n### `apply_discount(subtotal, discount)`\n\n34. **Normal use** - Apply 10% discount (0.1)\n35. **Normal use** - Apply 50% discount (0.5)\n36. **Edge case** - Apply 0% discount (no change)\n37. **Edge case** - Apply 100% discount (result should be 0)\n38. **Edge case** - Apply discount to subtotal of 0\n39. **Invalid input** - Apply discount > 100% (> 1.0)\n40. **Invalid input** - Apply negative discount\n41. **Invalid input** - Apply discount to negative subtotal\n42. **Edge case** - Apply very small discount (0.001)\n\n### `calculate_shipping(discounted_subtotal)`\n\n43. **Normal use** - Calculate shipping for subtotal below threshold (should charge shipping)\n44. **Normal use** - Calculate shipping for subtotal above threshold (should be free)\n45. **Edge case** - Calculate shipping for subtotal exactly at threshold\n46. **Edge case** - Calculate shipping for subtotal of 0\n47. **Edge case** - Calculate shipping for subtotal just below threshold (99.99 with threshold 100)\n48. **Edge case** - Calculate shipping for subtotal just above threshold (100.01 with threshold 100)\n49. **Edge case** - Calculate shipping with negative subtotal\n\n### `calculate_tax(amount)`\n\n50. **Normal use** - Calculate tax on positive amount\n51. **Edge case** - Calculate tax on amount of 0\n52. **Edge case** - Calculate tax on very small amount\n53. **Edge case** - Calculate tax on very large amount\n54. **Edge case** - Calculate tax with tax_rate = 0\n55. **Invalid input** - Calculate tax on negative amount\n\n### `calculate_total(discount)`\n\n56. **Normal use** - Calculate total with items, no discount\n57. **Normal use** - Calculate total with items and discount\n58. **Normal use** - Calculate total verifying formula: (subtotal - discount) + shipping + tax\n59. **Edge case** - Calculate total on empty order\n60. **Edge case** - Calculate total with 100% discount\n61. **Edge case** - Calculate total where subtotal exactly equals free_shipping_threshold\n62. **Edge case** - Calculate total where discounted subtotal crosses free_shipping_threshold\n63. **Edge case** - Calculate total with discount = 0 (default)\n64. **Invalid input** - Calculate total with negative discount\n65. **Invalid input** - Calculate total with discount > subtotal\n\n### `total_items()`\n\n66. **Normal use** - Get total items count with multiple items\n67. **Normal use** - Get total items count accounting for quantities\n68. **Edge case** - Get total items from empty order (should return 0)\n69. **Edge case** - Get total items after adding and removing items\n\n### `clear_order()`\n\n70. **Normal use** - Clear order with multiple items\n71. **Edge case** - Clear already empty order (should not raise exception)\n72. **Normal use** - Verify is_empty() returns True after clear\n73. **Normal use** - Verify get_subtotal() returns 0 after clear\n74. **Normal use** - Verify total_items() returns 0 after clear\n\n### `list_items()`\n\n75. **Normal use** - List items with multiple items in order\n76. **Edge case** - List items from empty order (should return empty list)\n77. **Normal use** - Verify format of item strings in list\n78. **Normal use** - List items after adding items with quantity > 1\n\n### `is_empty()`\n\n79. **Normal use** - Check is_empty on new/empty order (should return True)\n80. **Normal use** - Check is_empty after adding item (should return False)\n81. **Normal use** - Check is_empty after adding then removing all items (should return True)\n82. **Normal use** - Check is_empty after clear_order (should return True)\n\n### Integration/Workflow Scenarios\n\n83. **Integration** - Complete order workflow: add items â†’ apply discount â†’ calculate total\n84. **Integration** - Add items, remove some, verify subtotal updates correctly\n85. **Integration** - Verify shipping changes when discount brings subtotal below threshold\n86. **Integration** - Verify tax is calculated on correct amount (after discount, with shipping)\n87. **Integration** - Multiple operations: add, remove, clear, add again\n88. **Integration** - Verify order state consistency across multiple operations\n\n### Precision/Rounding Scenarios\n\n89. **Edge case** - Verify floating point precision in subtotal calculations\n90. **Edge case** - Verify floating point precision in tax calculations\n91. **Edge case** - Verify floating point precision in discount calculations\n92. **Edge case** - Calculate total with prices that could cause floating point errors (e.g., 0.1 + 0.2)",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_same_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0, 1)\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_add_item_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10000)\n        self.assertEqual(calc.total_items(), 10000)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50, 1)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(None, 1.50, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_verify_not_in_list(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", str(items))\n\n    def test_remove_item_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError, KeyError)):\n            calc.remove_item(None)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_get_subtotal_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 10)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0, 5)\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.1)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.5)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.5)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 0.1)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.001)\n        self.assertAlmostEqual(result, 99.9, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_small_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_total_with_items_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_items_and_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(0.1)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_verify_formula(self):\n        calc = OrderCalculator(tax_rate=0.2, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(0.0)\n        subtotal = 80.0\n        discounted = 80.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.2\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertGreaterEqual(total, 0)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(1.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 100.0, 1)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_crosses_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        total = calc.calculate_total(0.2)\n        discounted = 96.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-0.1)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(1.5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10)\n        self.assertEqual(calc.total_items(), 10)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_returns_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_subtotal_is_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_clear_order_total_items_is_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_format(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        items = calc.list_items()\n        self.assertTrue(len(items) > 0)\n        self.assertIsInstance(items[0], str)\n\n    def test_list_items_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_complete_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(0.1)\n        discounted = 495.0\n        shipping = 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 35.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_integration_discount_affects_shipping(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        shipping_before = calc.calculate_shipping(120.0)\n        self.assertEqual(shipping_before, 0.0)\n        discounted = calc.apply_discount(120.0, 0.2)\n        shipping_after = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping_after, 10.0)\n\n    def test_integration_tax_calculated_correctly(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        base = 50.0 + 10.0\n        expected = base + base * 0.1\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_multiple_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 1)\n        calc.add_item(\"B\", 20.0, 2)\n        calc.remove_item(\"A\")\n        calc.clear_order()\n        calc.add_item(\"C\", 30.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 90.0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 50.0)\n        self.assertEqual(len(calc.list_items()), 1)\n\n    def test_precision_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 0.1, 1)\n        calc.add_item(\"B\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=10)\n\n    def test_precision_tax(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        tax = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(tax, 7.6659, places=4)\n\n    def test_precision_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 0.333)\n        self.assertAlmostEqual(result, 22.22, places=1)\n\n    def test_precision_floating_point(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        calc.add_item(\"A\", 0.1, 1)\n        calc.add_item(\"B\", 0.2, 1)\n        total = calc.calculate_total()\n        self.assertIsInstance(total, float)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_parameters(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(calc.tax_rate, 0.1)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n        self.assertEqual(calc.shipping_cost, 5.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        self.assertEqual(calc.tax_rate, 0)\n\n    def test_init_zero_free_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0)\n        self.assertEqual(calc.free_shipping_threshold, 0)\n\n    def test_init_negative_tax_rate(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n\n    def test_init_negative_shipping_cost(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_init_negative_free_shipping_threshold(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(free_shipping_threshold=-100.0)\n\n    def test_add_item_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_add_item_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_same_item_twice(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 1.50, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_quantity_zero(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, 0)\n\n    def test_add_item_price_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free Sample\", 0, 1)\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_add_item_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Expensive\", 1000000.0, 1)\n        self.assertEqual(calc.get_subtotal(), 1000000.0)\n\n    def test_add_item_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10000)\n        self.assertEqual(calc.total_items(), 10000)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 1.50, 1)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", -1.50, 1)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Apple\", 1.50, -1)\n\n    def test_add_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(None, 1.50, 1)\n\n    def test_add_item_non_numeric_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", \"expensive\", 1)\n\n    def test_add_item_non_integer_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError)):\n            calc.add_item(\"Apple\", 1.50, 2.5)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_verify_not_in_list(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        items = calc.list_items()\n        self.assertNotIn(\"Apple\", str(items))\n\n    def test_remove_item_last_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, KeyError)):\n            calc.remove_item(\"\")\n\n    def test_remove_item_none_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises((ValueError, TypeError, KeyError)):\n            calc.remove_item(None)\n\n    def test_get_subtotal_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.50, 1)\n        self.assertEqual(calc.get_subtotal(), 2.50)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 2.00, 2)\n        calc.add_item(\"Banana\", 1.50, 3)\n        self.assertEqual(calc.get_subtotal(), 8.50)\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_get_subtotal_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.00, 10)\n        self.assertEqual(calc.get_subtotal(), 10.00)\n\n    def test_get_subtotal_zero_price_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Free\", 0, 5)\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_apply_discount_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.1)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_fifty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.5)\n        self.assertEqual(result, 50.0)\n\n    def test_apply_discount_zero_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 1.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 0.5)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_over_hundred_percent(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, 1.5)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(100.0, -0.1)\n\n    def test_apply_discount_negative_subtotal(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.apply_discount(-100.0, 0.1)\n\n    def test_apply_discount_very_small(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.001)\n        self.assertAlmostEqual(result, 99.9, places=2)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_small_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.01)\n        self.assertAlmostEqual(result, 0.0023, places=4)\n\n    def test_calculate_tax_large_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(1000000.0)\n        self.assertEqual(result, 230000.0)\n\n    def test_calculate_tax_zero_rate(self):\n        calc = OrderCalculator(tax_rate=0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_total_with_items_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_with_items_and_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 100.0, 1)\n        total = calc.calculate_total(0.1)\n        subtotal = 100.0\n        discounted = 90.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_verify_formula(self):\n        calc = OrderCalculator(tax_rate=0.2, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 80.0, 1)\n        total = calc.calculate_total(0.0)\n        subtotal = 80.0\n        discounted = 80.0\n        shipping = 10.0\n        tax = (discounted + shipping) * 0.2\n        expected = discounted + shipping + tax\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        total = calc.calculate_total()\n        self.assertGreaterEqual(total, 0)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 1)\n        total = calc.calculate_total(1.0)\n        expected = 10.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_at_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 100.0, 1)\n        total = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_discount_crosses_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        total = calc.calculate_total(0.2)\n        discounted = 96.0\n        shipping = 10.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_default_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_calculate_total_negative_discount(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(-0.1)\n\n    def test_calculate_total_discount_exceeds_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 50.0, 1)\n        with self.assertRaises(ValueError):\n            calc.calculate_total(1.5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 2)\n        calc.add_item(\"Banana\", 1.0, 3)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_with_quantities(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 10)\n        self.assertEqual(calc.total_items(), 10)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_after_add_and_remove(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_with_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0, 5)\n        calc.add_item(\"Banana\", 1.0, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_already_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_is_empty_returns_true(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_subtotal_is_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.get_subtotal(), 0)\n\n    def test_clear_order_total_items_is_zero(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 5)\n        calc.clear_order()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_list_items_multiple(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        items = calc.list_items()\n        self.assertEqual(len(items), 2)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        items = calc.list_items()\n        self.assertEqual(items, [])\n\n    def test_list_items_format(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        items = calc.list_items()\n        self.assertTrue(len(items) > 0)\n        self.assertIsInstance(items[0], str)\n\n    def test_list_items_with_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        items = calc.list_items()\n        self.assertEqual(len(items), 1)\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.0)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_integration_complete_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(0.1)\n        discounted = 495.0\n        shipping = 0.0\n        expected = (discounted + shipping) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_add_remove_verify_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 10.0, 2)\n        calc.add_item(\"Banana\", 5.0, 3)\n        self.assertEqual(calc.get_subtotal(), 35.0)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 15.0)\n\n    def test_integration_discount_affects_shipping(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 120.0, 1)\n        shipping_before = calc.calculate_shipping(120.0)\n        self.assertEqual(shipping_before, 0.0)\n        discounted = calc.apply_discount(120.0, 0.2)\n        shipping_after = calc.calculate_shipping(discounted)\n        self.assertEqual(shipping_after, 10.0)\n\n    def test_integration_tax_calculated_correctly(self):\n        calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item\", 50.0, 1)\n        total = calc.calculate_total()\n        base = 50.0 + 10.0\n        expected = base + base * 0.1\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_integration_multiple_operations(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 10.0, 1)\n        calc.add_item(\"B\", 20.0, 2)\n        calc.remove_item(\"A\")\n        calc.clear_order()\n        calc.add_item(\"C\", 30.0, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 90.0)\n\n    def test_integration_state_consistency(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item\", 10.0, 5)\n        self.assertFalse(calc.is_empty())\n        self.assertEqual(calc.total_items(), 5)\n        self.assertEqual(calc.get_subtotal(), 50.0)\n        self.assertEqual(len(calc.list_items()), 1)\n\n    def test_precision_subtotal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"A\", 0.1, 1)\n        calc.add_item(\"B\", 0.2, 1)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 0.3, places=10)\n\n    def test_precision_tax(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        tax = calc.calculate_tax(33.33)\n        self.assertAlmostEqual(tax, 7.6659, places=4)\n\n    def test_precision_discount(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(33.33, 0.333)\n        self.assertAlmostEqual(result, 22.22, places=1)\n\n    def test_precision_floating_point(self):\n        calc = OrderCalculator(tax_rate=0.1)\n        calc.add_item(\"A\", 0.1, 1)\n        calc.add_item(\"B\", 0.2, 1)\n        total = calc.calculate_total()\n        self.assertIsInstance(total, float)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 170.19979572296143,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}