{
  "model": "claude-code-opus-4.5",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2025-12-31T02:39:40.680562",
  "response_time": 208.3645555973053,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\claude-code-opus-4.5\\run_022\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I'll analyze the `OrderCalculator` class to understand its structure and prepare for test case generation.\n\n## Class Analysis\n\n### Constructor: `__init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)`\n- Initializes calculator with configurable tax rate, free shipping threshold, and shipping cost\n- All parameters have default values\n- Edge cases: negative values, zero values, unusual tax rates (0%, 100%+)\n\n### Public Methods:\n\n1. **`add_item(name, price, quantity=1)`**\n   - Adds item with name, price, and optional quantity\n   - Edge cases: empty name, negative/zero price, negative/zero quantity, duplicate items, very large values\n\n2. **`remove_item(name)`**\n   - Removes item by name\n   - Edge cases: non-existent item, empty name, removing from empty order\n\n3. **`get_subtotal() -> float`**\n   - Calculates sum of item prices Ă— quantities\n   - Edge cases: empty order, single item, multiple items, floating-point precision\n\n4. **`apply_discount(subtotal, discount) -> float`**\n   - Applies discount to subtotal\n   - Edge cases: 0% discount, 100% discount, negative discount, discount > 100%, negative subtotal\n\n5. **`calculate_shipping(discounted_subtotal) -> float`**\n   - Returns shipping cost or 0 if above threshold\n   - Edge cases: exactly at threshold, just below/above threshold, zero subtotal, negative subtotal\n\n6. **`calculate_tax(amount) -> float`**\n   - Calculates tax on amount\n   - Edge cases: zero amount, negative amount, large amounts\n\n7. **`calculate_total(discount=0.0) -> float`**\n   - Combines subtotal, discount, shipping, and tax\n   - Edge cases: empty order, with/without discount, at shipping threshold boundary\n\n8. **`total_items() -> int`**\n   - Returns total count of all items (sum of quantities)\n   - Edge cases: empty order, single item, multiple items with various quantities\n\n9. **`clear_order()`**\n   - Removes all items\n   - Edge cases: clearing empty order, clearing non-empty order\n\n10. **`list_items() -> List[str]`**\n    - Returns list of item names\n    - Edge cases: empty order, single item, multiple items, order of items\n\n11. **`is_empty() -> bool`**\n    - Returns True if no items\n    - Edge cases: empty order, after adding/removing items, after clear\n\n### Key Test Categories:\n- **Initialization**: Default and custom constructor parameters\n- **Item management**: Add, remove, clear operations\n- **Calculations**: Subtotal, discount, shipping, tax, total\n- **State queries**: total_items, list_items, is_empty\n- **Edge cases**: Empty orders, boundary values, invalid inputs\n- **Exception handling**: Expected errors for invalid operations\n- **Integration**: Complete order workflows combining multiple operations\n\n### Dependencies:\n- Uses `Item` TypedDict for item structure\n- Returns `List[str]` from list_items\n\nI'm ready to generate comprehensive unit tests covering all these aspects.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "## Unit Test Scenarios for OrderCalculator\n\n### Constructor (`__init__`)\n\n1. **Default initialization** - normal use - Verify default values (tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0) are set correctly\n2. **Custom tax rate** - normal use - Initialize with custom tax rate and verify it's applied\n3. **Custom shipping threshold** - normal use - Initialize with custom free shipping threshold\n4. **Custom shipping cost** - normal use - Initialize with custom shipping cost\n5. **All custom parameters** - normal use - Initialize with all custom values\n6. **Zero tax rate** - edge case - Initialize with 0% tax rate\n7. **Zero shipping threshold** - edge case - Free shipping always applies\n8. **Zero shipping cost** - edge case - Shipping is always free\n9. **Negative tax rate** - invalid input - Verify behavior with negative tax\n10. **Negative shipping threshold** - invalid input - Verify behavior with negative threshold\n11. **Negative shipping cost** - invalid input - Verify behavior with negative cost\n\n### `add_item`\n\n12. **Add single item with default quantity** - normal use - Add one item, quantity defaults to 1\n13. **Add single item with explicit quantity** - normal use - Add item with quantity > 1\n14. **Add multiple different items** - normal use - Add several distinct items\n15. **Add duplicate item (same name)** - edge case - Verify behavior when adding item with existing name\n16. **Add item with zero price** - edge case - Verify free item handling\n17. **Add item with negative price** - invalid input - Should raise exception or handle error\n18. **Add item with zero quantity** - invalid input - Should raise exception or handle error\n19. **Add item with negative quantity** - invalid input - Should raise exception or handle error\n20. **Add item with empty name** - invalid input - Should raise exception or handle error\n21. **Add item with very large price** - edge case - Verify handling of large numbers\n22. **Add item with very large quantity** - edge case - Verify handling of large quantities\n23. **Add item with float quantity** - invalid input - Quantity should be integer\n\n### `remove_item`\n\n24. **Remove existing item** - normal use - Remove item that exists in order\n25. **Remove non-existent item** - exception - Should raise exception (e.g., KeyError)\n26. **Remove from empty order** - exception - Should raise exception\n27. **Remove item with empty name** - invalid input - Verify error handling\n28. **Remove item then verify order state** - normal use - Confirm item is gone from list\n29. **Remove one of multiple items** - normal use - Other items remain intact\n\n### `get_subtotal`\n\n30. **Subtotal of empty order** - edge case - Should return 0.0\n31. **Subtotal with single item, quantity 1** - normal use - Returns item price\n32. **Subtotal with single item, quantity > 1** - normal use - Returns price Ă— quantity\n33. **Subtotal with multiple items** - normal use - Sum of all (price Ă— quantity)\n34. **Subtotal with floating-point prices** - edge case - Verify precision handling\n35. **Subtotal after adding and removing items** - normal use - Reflects current state\n\n### `apply_discount`\n\n36. **Apply zero discount** - edge case - Returns original subtotal\n37. **Apply typical discount (10%, 20%)** - normal use - Returns correctly reduced amount\n38. **Apply 100% discount** - edge case - Returns 0.0\n39. **Apply discount > 100%** - invalid input - Verify behavior (exception or negative result)\n40. **Apply negative discount** - invalid input - Verify behavior (exception or increase)\n41. **Apply discount to zero subtotal** - edge case - Returns 0.0\n42. **Apply discount to negative subtotal** - invalid input - Verify behavior\n\n### `calculate_shipping`\n\n43. **Shipping below threshold** - normal use - Returns shipping cost\n44. **Shipping exactly at threshold** - edge case - Verify if free or charged\n45. **Shipping above threshold** - normal use - Returns 0.0 (free shipping)\n46. **Shipping with zero subtotal** - edge case - Returns shipping cost\n47. **Shipping with negative subtotal** - invalid input - Verify behavior\n48. **Shipping just below threshold (threshold - 0.01)** - edge case - Returns shipping cost\n49. **Shipping just above threshold (threshold + 0.01)** - edge case - Returns 0.0\n\n### `calculate_tax`\n\n50. **Tax on positive amount** - normal use - Returns amount Ă— tax_rate\n51. **Tax on zero amount** - edge case - Returns 0.0\n52. **Tax on negative amount** - invalid input - Verify behavior\n53. **Tax with zero tax rate** - edge case - Returns 0.0\n54. **Tax with 100% tax rate** - edge case - Returns same as amount\n55. **Tax precision with floating-point** - edge case - Verify rounding/precision\n\n### `calculate_total`\n\n56. **Total of empty order** - edge case - Verify handling (shipping + tax on 0?)\n57. **Total with single item, no discount** - normal use - Subtotal + shipping + tax\n58. **Total with multiple items, no discount** - normal use - Correct calculation\n59. **Total with discount applied** - normal use - Discount reflected in final total\n60. **Total at exactly free shipping threshold** - edge case - Verify shipping inclusion\n61. **Total above free shipping threshold** - normal use - No shipping in total\n62. **Total below free shipping threshold** - normal use - Shipping included\n63. **Total with 100% discount** - edge case - Verify result (tax on 0?)\n64. **Total with default discount parameter** - normal use - discount=0.0 by default\n65. **Total calculation order** - normal use - Verify: (subtotal - discount) + shipping + tax\n\n### `total_items`\n\n66. **Total items in empty order** - edge case - Returns 0\n67. **Total items with single item, quantity 1** - normal use - Returns 1\n68. **Total items with single item, quantity > 1** - normal use - Returns quantity\n69. **Total items with multiple items** - normal use - Sum of all quantities\n70. **Total items after removal** - normal use - Reflects current state\n\n### `clear_order`\n\n71. **Clear non-empty order** - normal use - Order becomes empty\n72. **Clear empty order** - edge case - No error, remains empty\n73. **Clear then verify all state** - normal use - is_empty=True, total_items=0, list_items=[]\n\n### `list_items`\n\n74. **List items of empty order** - edge case - Returns empty list\n75. **List items with single item** - normal use - Returns list with one name\n76. **List items with multiple items** - normal use - Returns all item names\n77. **List items order preservation** - edge case - Verify if order matches insertion order\n78. **List items returns copy** - edge case - Modifying returned list doesn't affect order\n\n### `is_empty`\n\n79. **Empty order returns True** - normal use - New order is empty\n80. **Non-empty order returns False** - normal use - After adding item\n81. **Empty after clear returns True** - normal use - After clearing items\n82. **Empty after removing all items returns True** - normal use - Remove until empty\n\n### Integration/Workflow Tests\n\n83. **Complete order workflow** - normal use - Add items â†’ apply discount â†’ calculate total\n84. **Add, remove, add again** - normal use - Verify state after multiple operations\n85. **Multiple calculations without mutation** - normal use - get_subtotal doesn't change state\n86. **Recalculate after order changes** - normal use - Total updates after adding/removing\n87. **Order with many items** - stress test - Large number of items handled correctly\n88. **Precision across all calculations** - edge case - Floating-point consistency throughout",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=25.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 25.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 2.00, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"NegativeItem\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.00, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.00)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"BulkItem\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_verify_order_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_one_of_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 2)\n        self.assertNotIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.get_subtotal(), 5.00)\n\n    def test_get_subtotal_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 3)\n        self.assertEqual(calc.get_subtotal(), 15.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertEqual(calc.get_subtotal(), 19.00)\n\n    def test_get_subtotal_floating_point_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 1.99, 3)\n        calc.add_item(\"Item2\", 2.49, 2)\n        expected = 1.99 * 3 + 2.49 * 2\n        self.assertAlmostEqual(calc.get_subtotal(), expected, places=2)\n\n    def test_get_subtotal_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 9.00)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_typical_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_typical_twenty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 20.0)\n        self.assertEqual(result, 80.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, -50.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, -10.0)\n        self.assertEqual(result, 110.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, -10.0)\n\n    def test_apply_discount_to_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-50.0, 10.0)\n        self.assertEqual(result, -60.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_hundred_percent_rate(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 100.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(33.33)\n        expected = 33.33 * 0.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        expected = (0.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        result = calc.calculate_total()\n        subtotal = 80.0\n        expected = (subtotal + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 2)\n        result = calc.calculate_total(discount=10.0)\n        discounted = 100.0 - 10.0\n        expected = (discounted + 0.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_exactly_at_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_above_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 150.0)\n        result = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_below_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total(discount=50.0)\n        expected = (0.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result_default = calc.calculate_total()\n        result_explicit = calc.calculate_total(0.0)\n        self.assertEqual(result_default, result_explicit)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_all_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        discounted = 550.0 - 50.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_add_remove_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 6.00, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 18.0)\n\n    def test_multiple_calculations_without_mutation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        subtotal1 = calc.get_subtotal()\n        subtotal2 = calc.get_subtotal()\n        self.assertEqual(subtotal1, subtotal2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_recalculate_after_order_changes(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Banana\", 60.0)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n        expected2 = 110.0 * 1.23\n        self.assertAlmostEqual(total2, expected2, places=2)\n\n    def test_order_with_many_items(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(len(calc.list_items()), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n\n    def test_precision_across_all_calculations(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item1\", 33.33, 3)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 99.99, places=2)\n        total = calc.calculate_total()\n        expected = (99.99 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def test_init_default_values(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.tax_rate, 0.23)\n        self.assertEqual(calc.free_shipping_threshold, 100.0)\n        self.assertEqual(calc.shipping_cost, 10.0)\n\n    def test_init_custom_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.10)\n        self.assertEqual(calc.tax_rate, 0.10)\n\n    def test_init_custom_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=50.0)\n        self.assertEqual(calc.free_shipping_threshold, 50.0)\n\n    def test_init_custom_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=15.0)\n        self.assertEqual(calc.shipping_cost, 15.0)\n\n    def test_init_all_custom_parameters(self):\n        calc = OrderCalculator(tax_rate=0.15, free_shipping_threshold=200.0, shipping_cost=25.0)\n        self.assertEqual(calc.tax_rate, 0.15)\n        self.assertEqual(calc.free_shipping_threshold, 200.0)\n        self.assertEqual(calc.shipping_cost, 25.0)\n\n    def test_init_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        self.assertEqual(calc.tax_rate, 0.0)\n\n    def test_init_zero_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=0.0)\n        self.assertEqual(calc.free_shipping_threshold, 0.0)\n\n    def test_init_zero_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=0.0)\n        self.assertEqual(calc.shipping_cost, 0.0)\n\n    def test_init_negative_tax_rate(self):\n        calc = OrderCalculator(tax_rate=-0.10)\n        self.assertEqual(calc.tax_rate, -0.10)\n\n    def test_init_negative_shipping_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=-50.0)\n        self.assertEqual(calc.free_shipping_threshold, -50.0)\n\n    def test_init_negative_shipping_cost(self):\n        calc = OrderCalculator(shipping_cost=-10.0)\n        self.assertEqual(calc.shipping_cost, -10.0)\n\n    def test_add_item_single_default_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        self.assertEqual(calc.total_items(), 1)\n        self.assertIn(\"Apple\", calc.list_items())\n\n    def test_add_item_single_explicit_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_add_item_multiple_different_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        self.assertEqual(calc.total_items(), 6)\n        self.assertEqual(len(calc.list_items()), 3)\n\n    def test_add_item_duplicate_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Apple\", 2.00, 3)\n        items = calc.list_items()\n        self.assertIn(\"Apple\", items)\n\n    def test_add_item_zero_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"FreeItem\", 0.0, 1)\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_add_item_negative_price(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"NegativeItem\", -5.00)\n\n    def test_add_item_zero_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.00, 0)\n\n    def test_add_item_negative_quantity(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"Item\", 10.00, -1)\n\n    def test_add_item_empty_name(self):\n        calc = OrderCalculator()\n        with self.assertRaises(ValueError):\n            calc.add_item(\"\", 10.00)\n\n    def test_add_item_very_large_price(self):\n        calc = OrderCalculator()\n        calc.add_item(\"ExpensiveItem\", 1000000.00)\n        self.assertEqual(calc.get_subtotal(), 1000000.00)\n\n    def test_add_item_very_large_quantity(self):\n        calc = OrderCalculator()\n        calc.add_item(\"BulkItem\", 1.00, 1000000)\n        self.assertEqual(calc.total_items(), 1000000)\n\n    def test_remove_item_existing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.remove_item(\"Apple\")\n        self.assertTrue(calc.is_empty())\n\n    def test_remove_item_non_existent(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Banana\")\n\n    def test_remove_item_from_empty_order(self):\n        calc = OrderCalculator()\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"Apple\")\n\n    def test_remove_item_empty_name(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        with self.assertRaises(KeyError):\n            calc.remove_item(\"\")\n\n    def test_remove_item_verify_order_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50)\n        calc.add_item(\"Banana\", 0.75)\n        calc.remove_item(\"Apple\")\n        self.assertNotIn(\"Apple\", calc.list_items())\n        self.assertIn(\"Banana\", calc.list_items())\n\n    def test_remove_one_of_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 1.50, 2)\n        calc.add_item(\"Banana\", 0.75, 3)\n        calc.add_item(\"Orange\", 2.00, 1)\n        calc.remove_item(\"Banana\")\n        self.assertEqual(len(calc.list_items()), 2)\n        self.assertNotIn(\"Banana\", calc.list_items())\n\n    def test_get_subtotal_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_get_subtotal_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.get_subtotal(), 5.00)\n\n    def test_get_subtotal_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 3)\n        self.assertEqual(calc.get_subtotal(), 15.00)\n\n    def test_get_subtotal_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        self.assertEqual(calc.get_subtotal(), 19.00)\n\n    def test_get_subtotal_floating_point_prices(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Item1\", 1.99, 3)\n        calc.add_item(\"Item2\", 2.49, 2)\n        expected = 1.99 * 3 + 2.49 * 2\n        self.assertAlmostEqual(calc.get_subtotal(), expected, places=2)\n\n    def test_get_subtotal_after_adding_and_removing(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.get_subtotal(), 9.00)\n\n    def test_apply_discount_zero(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_typical_ten_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_typical_twenty_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 20.0)\n        self.assertEqual(result, 80.0)\n\n    def test_apply_discount_hundred_percent(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_discount_greater_than_hundred(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, 150.0)\n        self.assertEqual(result, -50.0)\n\n    def test_apply_discount_negative(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(100.0, -10.0)\n        self.assertEqual(result, 110.0)\n\n    def test_apply_discount_to_zero_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(0.0, 10.0)\n        self.assertEqual(result, -10.0)\n\n    def test_apply_discount_to_negative_subtotal(self):\n        calc = OrderCalculator()\n        result = calc.apply_discount(-50.0, 10.0)\n        self.assertEqual(result, -60.0)\n\n    def test_calculate_shipping_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_exactly_at_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(150.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_shipping_zero_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(0.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_negative_subtotal(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(-50.0)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_below_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(99.99)\n        self.assertEqual(result, 10.0)\n\n    def test_calculate_shipping_just_above_threshold(self):\n        calc = OrderCalculator(free_shipping_threshold=100.0, shipping_cost=10.0)\n        result = calc.calculate_shipping(100.01)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_positive_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 23.0)\n\n    def test_calculate_tax_zero_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(0.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_negative_amount(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(-100.0)\n        self.assertEqual(result, -23.0)\n\n    def test_calculate_tax_zero_tax_rate(self):\n        calc = OrderCalculator(tax_rate=0.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 0.0)\n\n    def test_calculate_tax_hundred_percent_rate(self):\n        calc = OrderCalculator(tax_rate=1.0)\n        result = calc.calculate_tax(100.0)\n        self.assertEqual(result, 100.0)\n\n    def test_calculate_tax_precision(self):\n        calc = OrderCalculator(tax_rate=0.23)\n        result = calc.calculate_tax(33.33)\n        expected = 33.33 * 0.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_empty_order(self):\n        calc = OrderCalculator()\n        result = calc.calculate_total()\n        expected = (0.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_single_item_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_multiple_items_no_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 30.0, 2)\n        calc.add_item(\"Banana\", 20.0, 1)\n        result = calc.calculate_total()\n        subtotal = 80.0\n        expected = (subtotal + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_with_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0, 2)\n        result = calc.calculate_total(discount=10.0)\n        discounted = 100.0 - 10.0\n        expected = (discounted + 0.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_exactly_at_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 100.0)\n        result = calc.calculate_total()\n        expected = 100.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_above_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 150.0)\n        result = calc.calculate_total()\n        expected = 150.0 * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_below_free_shipping_threshold(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total()\n        expected = (50.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_hundred_percent_discount(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        result = calc.calculate_total(discount=50.0)\n        expected = (0.0 + 10.0) * 1.23\n        self.assertAlmostEqual(result, expected, places=2)\n\n    def test_calculate_total_default_discount_parameter(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 50.0)\n        result_default = calc.calculate_total()\n        result_explicit = calc.calculate_total(0.0)\n        self.assertEqual(result_default, result_explicit)\n\n    def test_total_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.total_items(), 0)\n\n    def test_total_items_single_item_quantity_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.total_items(), 1)\n\n    def test_total_items_single_item_quantity_greater_than_one(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 5)\n        self.assertEqual(calc.total_items(), 5)\n\n    def test_total_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.add_item(\"Orange\", 2.00, 4)\n        self.assertEqual(calc.total_items(), 9)\n\n    def test_total_items_after_removal(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.remove_item(\"Apple\")\n        self.assertEqual(calc.total_items(), 3)\n\n    def test_clear_order_non_empty(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_empty(self):\n        calc = OrderCalculator()\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_clear_order_verify_all_state(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.add_item(\"Banana\", 3.00, 3)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n        self.assertEqual(calc.total_items(), 0)\n        self.assertEqual(calc.list_items(), [])\n        self.assertEqual(calc.get_subtotal(), 0.0)\n\n    def test_list_items_empty_order(self):\n        calc = OrderCalculator()\n        self.assertEqual(calc.list_items(), [])\n\n    def test_list_items_single_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_list_items_multiple_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(len(items), 3)\n        self.assertIn(\"Apple\", items)\n        self.assertIn(\"Banana\", items)\n        self.assertIn(\"Orange\", items)\n\n    def test_list_items_order_preservation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.add_item(\"Orange\", 2.00)\n        items = calc.list_items()\n        self.assertEqual(items, [\"Apple\", \"Banana\", \"Orange\"])\n\n    def test_list_items_returns_copy(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        items = calc.list_items()\n        items.append(\"Banana\")\n        self.assertEqual(calc.list_items(), [\"Apple\"])\n\n    def test_is_empty_new_order(self):\n        calc = OrderCalculator()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_adding_item(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        self.assertFalse(calc.is_empty())\n\n    def test_is_empty_after_clear(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.clear_order()\n        self.assertTrue(calc.is_empty())\n\n    def test_is_empty_after_removing_all_items(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00)\n        calc.add_item(\"Banana\", 3.00)\n        calc.remove_item(\"Apple\")\n        calc.remove_item(\"Banana\")\n        self.assertTrue(calc.is_empty())\n\n    def test_complete_order_workflow(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Laptop\", 500.0, 1)\n        calc.add_item(\"Mouse\", 25.0, 2)\n        subtotal = calc.get_subtotal()\n        self.assertEqual(subtotal, 550.0)\n        total = calc.calculate_total(discount=50.0)\n        discounted = 550.0 - 50.0\n        expected = discounted * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n    def test_add_remove_add_again(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        calc.remove_item(\"Apple\")\n        calc.add_item(\"Apple\", 6.00, 3)\n        self.assertEqual(calc.total_items(), 3)\n        self.assertEqual(calc.get_subtotal(), 18.0)\n\n    def test_multiple_calculations_without_mutation(self):\n        calc = OrderCalculator()\n        calc.add_item(\"Apple\", 5.00, 2)\n        subtotal1 = calc.get_subtotal()\n        subtotal2 = calc.get_subtotal()\n        self.assertEqual(subtotal1, subtotal2)\n        self.assertEqual(calc.total_items(), 2)\n\n    def test_recalculate_after_order_changes(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Apple\", 50.0)\n        total1 = calc.calculate_total()\n        calc.add_item(\"Banana\", 60.0)\n        total2 = calc.calculate_total()\n        self.assertNotEqual(total1, total2)\n        expected2 = 110.0 * 1.23\n        self.assertAlmostEqual(total2, expected2, places=2)\n\n    def test_order_with_many_items(self):\n        calc = OrderCalculator()\n        for i in range(100):\n            calc.add_item(f\"Item{i}\", 1.0, 1)\n        self.assertEqual(calc.total_items(), 100)\n        self.assertEqual(len(calc.list_items()), 100)\n        self.assertEqual(calc.get_subtotal(), 100.0)\n\n    def test_precision_across_all_calculations(self):\n        calc = OrderCalculator(tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0)\n        calc.add_item(\"Item1\", 33.33, 3)\n        subtotal = calc.get_subtotal()\n        self.assertAlmostEqual(subtotal, 99.99, places=2)\n        total = calc.calculate_total()\n        expected = (99.99 + 10.0) * 1.23\n        self.assertAlmostEqual(total, expected, places=2)\n\n\nif __name__ == \"__main__\":\n    unittest.main()\n```",
    "total_response_time": 208.3645555973053,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}