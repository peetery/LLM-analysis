{
  "model": "gemini-3-pro",
  "strategy": "chain_of_thought_prompting",
  "context_type": "interface",
  "timestamp": "2026-01-04T03:45:22.673299",
  "response_time": 121.63788533210754,
  "test_file": "cli_results\\chain_of_thought_prompting\\interface\\gemini-3-pro\\run_018\\tests.py",
  "raw_results": {
    "responses": [
      {
        "step": 1,
        "prompt": "You are a software testing assistant. Your task is to generate a set of unit tests for a Python class provided below.\n\nThe tests should:\n- use the `unittest` framework,\n- cover all public methods,\n- test typical usage as well as edge cases, invalid inputs, and exceptions,\n- be clear, atomic, and minimal.\n\nYou will now analyze the class to prepare relevant test cases.\nDo not write test code yet. Do not write test scenarios yet. Just analyze the class and prepare for the next step.\n\nBelow is the class interface (without implementation):\n\n```python\nfrom typing import TypedDict, List\n\nclass Item(TypedDict)\n\nclass OrderCalculator:\n    def __init__(self, tax_rate=0.23, free_shipping_threshold=100.0, shipping_cost=10.0):\n\ndef add_item(self, name: str, price: float, quantity: int = 1):\n\ndef remove_item(self, name: str):\n\ndef get_subtotal(self) -> float:\n\ndef apply_discount(self, subtotal: float, discount: float) -> float:\n\ndef calculate_shipping(self, discounted_subtotal: float) -> float:\n\ndef calculate_tax(self, amount: float) -> float:\n\ndef calculate_total(self, discount: float = 0.0) -> float:\n\ndef total_items(self) -> int:\n\ndef clear_order(self):\n\ndef list_items(self) -> List[str]:\n\ndef is_empty(self) -> bool:\n\n```\n\n",
        "response": "I have analyzed the `OrderCalculator` class interface. Here is the breakdown of the functionality and potential edge cases I will focus on for the unit tests:\n\n### **Class Analysis & Test Strategy**\n\n**1. Initialization (`__init__`)**\n*   **Standard:** Verify default values (`tax_rate=0.23`, `free_shipping_threshold=100.0`, `shipping_cost=10.0`).\n*   **Custom:** Verify initialization with valid custom values.\n*   **Edge Cases:** Negative tax rates, negative shipping costs, or negative thresholds (depending on desired strictness, these might be invalid).\n\n**2. Item Management (`add_item`, `remove_item`, `clear_order`)**\n*   **`add_item`:**\n    *   **Standard:** Add valid items; check if `total_items` and `list_items` update correctly.\n    *   **Edge Cases:** Adding items with 0 or negative price/quantity. Adding duplicate items (does it stack quantity or create a new entry?).\n*   **`remove_item`:**\n    *   **Standard:** Remove an existing item.\n    *   **Edge Cases:** Removing a non-existent item (should likely raise `ValueError` or `KeyError`, or fail silently). Removing the last item.\n*   **`clear_order`:**\n    *   **Standard:** Ensure state is reset to empty (items list cleared, counts reset).\n\n**3. Financial Calculations (`get_subtotal`, `apply_discount`, `calculate_shipping`, `calculate_tax`)**\n*   **`get_subtotal`:**\n    *   **Standard:** Sum of `price * quantity`.\n    *   **Edge Cases:** Empty order (0.0). Float precision handling.\n*   **`apply_discount`:**\n    *   **Standard:** Percentage vs. fixed amount? (Interface implies a float, likely a fixed amount or percentage). I will assume a fixed amount reduction or percentage based on typical logic, but context suggests `subtotal` and `discount` are inputs, returning result.\n    *   **Edge Cases:** Discount > Subtotal (result should likely be 0 or negative allowed?). Discount < 0.\n*   **`calculate_shipping`:**\n    *   **Standard:** Return `shipping_cost` if below threshold.\n    *   **Boundary:** Exactly at `free_shipping_threshold` (usually free). Above threshold (free).\n*   **`calculate_tax`:**\n    *   **Standard:** `amount * tax_rate`.\n    *   **Edge Cases:** 0 amount.\n\n**4. Aggregation (`calculate_total`)**\n*   **Standard:** Integration test ensuring the flow: `Subtotal` -> `Discount` -> `Shipping` -> `Tax`.\n*   **Logic Check:** Ensure shipping is calculated *after* discount (common business logic) or *before* (depends on implementation, will assume standard: shipping is based on final payable goods value).\n*   **Edge Cases:** Empty order total (should be 0). Order where discount reduces total to 0.\n\n**5. Utility / State (`total_items`, `list_items`, `is_empty`)**\n*   **Standard:** Correct return types (`int`, `List[str]`, `bool`).\n*   **Edge Cases:** Calling on empty vs. populated calculator.\n\nI am ready to generate the test scenarios or code when you provide the instruction.",
        "response_time": 0
      },
      {
        "step": 2,
        "prompt": "Based on the class above, list all relevant unit test scenarios you would create.\nEach scenario should describe:\n- the method being tested,\n- the type of case (e.g. normal use, invalid input, exception),\n- a short explanation of the intent.\nList as many scenarios as you can think of, covering all aspects of the class.\nDo not write test code yet.\n\n",
        "response": "Here is a comprehensive list of unit test scenarios for the `OrderCalculator` class.\n\n### 1. Initialization (`__init__`)\n*   **`test_init_defaults`** (Normal Use): Verify that a new instance has the default `tax_rate` (0.23), `free_shipping_threshold` (100.0), and `shipping_cost` (10.0), and an empty item list.\n*   **`test_init_custom_values`** (Normal Use): Verify that a new instance correctly stores custom values for tax, shipping threshold, and cost.\n*   **`test_init_negative_values`** (Edge Case/Invalid): Check behavior when initializing with negative tax rates or shipping costs (should arguably raise `ValueError` or handle gracefully).\n\n### 2. Adding Items (`add_item`)\n*   **`test_add_single_item`** (Normal Use): Add one item and verify it exists in the order with correct price and quantity.\n*   **`test_add_multiple_different_items`** (Normal Use): Add several different items and verify all are stored correctly.\n*   **`test_add_item_increment_quantity`** (Normal Use): Add an item with the same name twice; verify the quantity increases rather than creating a duplicate entry (assuming aggregation logic) or that both exist.\n*   **`test_add_item_custom_quantity`** (Normal Use): Add an item with `quantity=5`.\n*   **`test_add_item_invalid_price`** (Invalid Input): Attempt to add an item with a negative price (expect `ValueError`).\n*   **`test_add_item_invalid_quantity`** (Invalid Input): Attempt to add an item with 0 or negative quantity (expect `ValueError`).\n*   **`test_add_item_empty_name`** (Edge Case): Attempt to add an item with an empty string as a name.\n\n### 3. Removing Items (`remove_item`)\n*   **`test_remove_existing_item`** (Normal Use): Remove an item that exists in the order; verify it is no longer in the list/subtotal.\n*   **`test_remove_non_existent_item`** (Exception): Attempt to remove an item name that was never added (expect `ValueError`, `KeyError`, or silent failure depending on specific requirements; typically an error is preferred).\n*   **`test_remove_item_from_empty_list`** (Edge Case): Attempt to remove an item from an empty calculator.\n\n### 4. Subtotal Calculation (`get_subtotal`)\n*   **`test_subtotal_empty_order`** (Normal Use): Verify subtotal is 0.0 for a new/empty order.\n*   **`test_subtotal_single_item`** (Normal Use): Verify subtotal equals `price * quantity` for one item.\n*   **`test_subtotal_multiple_items`** (Normal Use): Verify subtotal is the correct sum of multiple items with varying quantities.\n*   **`test_subtotal_float_precision`** (Edge Case): Add items with prices like 10.1, 20.2 to check for floating-point arithmetic errors.\n\n### 5. Discount Application (`apply_discount`)\n*   **`test_apply_discount_valid`** (Normal Use): Apply a valid discount (e.g., 10.0) to a subtotal (e.g., 100.0) and check the return value.\n*   **`test_apply_discount_zero`** (Normal Use): Apply 0.0 discount; result should equal subtotal.\n*   **`test_apply_discount_exceeds_subtotal`** (Edge Case): Apply a discount larger than the subtotal (result should be 0.0, not negative).\n*   **`test_apply_negative_discount`** (Invalid Input): Apply a negative discount value (should raise `ValueError`).\n\n### 6. Shipping Calculation (`calculate_shipping`)\n*   **`test_shipping_below_threshold`** (Normal Use): Calculate shipping for a value below `free_shipping_threshold`; should return `shipping_cost`.\n*   **`test_shipping_above_threshold`** (Normal Use): Calculate shipping for a value above `free_shipping_threshold`; should return 0.0.\n*   **`test_shipping_exactly_at_threshold`** (Boundary Case): Calculate shipping for a value exactly equal to the threshold (usually free/0.0, needs verification).\n*   **`test_shipping_zero_subtotal`** (Edge Case): Check shipping logic when the subtotal is 0 (should arguably be 0, as nothing is being shipped).\n\n### 7. Tax Calculation (`calculate_tax`)\n*   **`test_calculate_tax_standard`** (Normal Use): Calculate tax on a positive amount; verify result equals `amount * tax_rate`.\n*   **`test_calculate_tax_zero`** (Normal Use): Calculate tax on 0.0; result should be 0.0.\n*   **`test_calculate_tax_rounding`** (Edge Case): Verify tax calculation results are rounded correctly (e.g., to 2 decimal places) if required.\n\n### 8. Total Calculation (`calculate_total`)\n*   **`test_calculate_total_standard_flow`** (Normal Use): Add items, provide a discount, and verify the final total includes `(subtotal - discount) + shipping + tax`.\n*   **`test_calculate_total_free_shipping`** (Normal Use): Ensure total reflects 0 shipping cost when the discounted subtotal exceeds the threshold.\n*   **`test_calculate_total_empty`** (Normal Use): Verify total is 0.0 when no items are added.\n*   **`test_calculate_total_all_discounts`** (Edge Case): Verify total when discount reduces subtotal to 0 (should be 0, assuming no shipping on empty value).\n\n### 9. Utilities (`total_items`, `list_items`, `is_empty`, `clear_order`)\n*   **`test_total_items_count`** (Normal Use): Verify it returns the sum of quantities (not just unique item types).\n*   **`test_list_items_format`** (Normal Use): Check that it returns a list of strings and contains the names of added items.\n*   **`test_is_empty_true`** (Normal Use): Verify returns `True` for a new instance.\n*   **`test_is_empty_false`** (Normal Use): Verify returns `False` after adding an item.\n*   **`test_clear_order`** (Normal Use): Add items, call `clear_order()`, and verify `is_empty()` is True and `subtotal` is 0.",
        "response_time": 0
      },
      {
        "step": 3,
        "prompt": "Now, based on the test scenarios you just listed, generate the complete Python unit test suite using the `unittest` framework.\n\nFollow these rules:\n- Include one test method per scenario.\n- Use meaningful test method names.\n- Do not include comments or explanations.\n- Output a valid `.py` file containing only the test class.\n- IMPORTANT: Do NOT copy or redefine the OrderCalculator class in your test file. The class already exists in a separate module. Simply import it using: `from order_calculator import OrderCalculator`\n\nThe output must contain only Python code.",
        "response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_init_defaults(self):\n        self.assertEqual(self.calc.tax_rate, 0.23)\n        self.assertEqual(self.calc.free_shipping_threshold, 100.0)\n        self.assertEqual(self.calc.shipping_cost, 10.0)\n        self.assertTrue(self.calc.is_empty())\n\n    def test_init_custom_values(self):\n        custom_calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(custom_calc.tax_rate, 0.1)\n        self.assertEqual(custom_calc.free_shipping_threshold, 50.0)\n        self.assertEqual(custom_calc.shipping_cost, 5.0)\n\n    def test_init_negative_values(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_single_item(self):\n        self.calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.assertEqual(self.calc.get_subtotal(), 3.0)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Banana\", 2.0, 2)\n        self.assertEqual(self.calc.total_items(), 3)\n        self.assertEqual(self.calc.get_subtotal(), 5.0)\n\n    def test_add_item_increment_quantity(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(self.calc.total_items(), 3)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 1) \n        self.assertIn(\"Apple\", items[0])\n\n    def test_add_item_custom_quantity(self):\n        self.calc.add_item(\"Orange\", 0.5, 10)\n        self.assertEqual(self.calc.total_items(), 10)\n        self.assertEqual(self.calc.get_subtotal(), 5.0)\n\n    def test_add_item_invalid_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadPrice\", -1.0)\n\n    def test_add_item_invalid_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadQty\", 1.0, 0)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadQtyNeg\", 1.0, -1)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.0)\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.0)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_remove_non_existent_item(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Ghost\")\n\n    def test_remove_item_from_empty_list(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Ghost\")\n\n    def test_subtotal_empty_order(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_subtotal_single_item(self):\n        self.calc.add_item(\"Book\", 15.0, 1)\n        self.assertEqual(self.calc.get_subtotal(), 15.0)\n\n    def test_subtotal_multiple_items(self):\n        self.calc.add_item(\"A\", 10.0, 1)\n        self.calc.add_item(\"B\", 20.0, 2)\n        self.assertEqual(self.calc.get_subtotal(), 50.0)\n\n    def test_subtotal_float_precision(self):\n        self.calc.add_item(\"A\", 10.1, 1)\n        self.calc.add_item(\"B\", 20.2, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 30.3)\n\n    def test_apply_discount_valid(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        result = self.calc.apply_discount(50.0, 60.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_negative_discount(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_shipping_below_threshold(self):\n        shipping = self.calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_above_threshold(self):\n        shipping = self.calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_exactly_at_threshold(self):\n        shipping = self.calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_zero_subtotal(self):\n        shipping = self.calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_tax_standard(self):\n        tax = self.calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_calculate_tax_zero(self):\n        tax = self.calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_rounding(self):\n        tax = self.calc.calculate_tax(10.0)\n        self.assertAlmostEqual(tax, 2.3)\n\n    def test_calculate_total_standard_flow(self):\n        self.calc.add_item(\"ExpensiveItem\", 200.0)\n        total = self.calc.calculate_total(discount=50.0)\n        self.assertAlmostEqual(total, 184.5)\n\n    def test_calculate_total_with_shipping(self):\n        self.calc.add_item(\"CheapItem\", 50.0)\n        total = self.calc.calculate_total(discount=0.0)\n        self.assertAlmostEqual(total, 71.5)\n\n    def test_calculate_total_empty(self):\n        total = self.calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_all_discounts(self):\n        self.calc.add_item(\"Item\", 10.0)\n        total = self.calc.calculate_total(discount=10.0)\n        self.assertEqual(total, 0.0)\n\n    def test_total_items_count(self):\n        self.calc.add_item(\"A\", 1, 2)\n        self.calc.add_item(\"B\", 1, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_list_items_format(self):\n        self.calc.add_item(\"A\", 1, 1)\n        items = self.calc.list_items()\n        self.assertIsInstance(items, list)\n        self.assertTrue(all(isinstance(i, str) for i in items))\n        self.assertTrue(any(\"A\" in i for i in items))\n\n    def test_is_empty_true(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_false(self):\n        self.calc.add_item(\"A\", 1)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_clear_order(self):\n        self.calc.add_item(\"A\", 1)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n```",
        "response_time": 0
      }
    ],
    "final_response": "```python\nimport unittest\nfrom order_calculator import OrderCalculator\n\nclass TestOrderCalculator(unittest.TestCase):\n\n    def setUp(self):\n        self.calc = OrderCalculator()\n\n    def test_init_defaults(self):\n        self.assertEqual(self.calc.tax_rate, 0.23)\n        self.assertEqual(self.calc.free_shipping_threshold, 100.0)\n        self.assertEqual(self.calc.shipping_cost, 10.0)\n        self.assertTrue(self.calc.is_empty())\n\n    def test_init_custom_values(self):\n        custom_calc = OrderCalculator(tax_rate=0.1, free_shipping_threshold=50.0, shipping_cost=5.0)\n        self.assertEqual(custom_calc.tax_rate, 0.1)\n        self.assertEqual(custom_calc.free_shipping_threshold, 50.0)\n        self.assertEqual(custom_calc.shipping_cost, 5.0)\n\n    def test_init_negative_values(self):\n        with self.assertRaises(ValueError):\n            OrderCalculator(tax_rate=-0.1)\n        with self.assertRaises(ValueError):\n            OrderCalculator(shipping_cost=-5.0)\n\n    def test_add_single_item(self):\n        self.calc.add_item(\"Apple\", 1.5, 2)\n        self.assertEqual(self.calc.total_items(), 2)\n        self.assertEqual(self.calc.get_subtotal(), 3.0)\n\n    def test_add_multiple_different_items(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Banana\", 2.0, 2)\n        self.assertEqual(self.calc.total_items(), 3)\n        self.assertEqual(self.calc.get_subtotal(), 5.0)\n\n    def test_add_item_increment_quantity(self):\n        self.calc.add_item(\"Apple\", 1.0, 1)\n        self.calc.add_item(\"Apple\", 1.0, 2)\n        self.assertEqual(self.calc.total_items(), 3)\n        items = self.calc.list_items()\n        self.assertEqual(len(items), 1) \n        self.assertIn(\"Apple\", items[0])\n\n    def test_add_item_custom_quantity(self):\n        self.calc.add_item(\"Orange\", 0.5, 10)\n        self.assertEqual(self.calc.total_items(), 10)\n        self.assertEqual(self.calc.get_subtotal(), 5.0)\n\n    def test_add_item_invalid_price(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadPrice\", -1.0)\n\n    def test_add_item_invalid_quantity(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadQty\", 1.0, 0)\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"BadQtyNeg\", 1.0, -1)\n\n    def test_add_item_empty_name(self):\n        with self.assertRaises(ValueError):\n            self.calc.add_item(\"\", 1.0)\n\n    def test_remove_existing_item(self):\n        self.calc.add_item(\"Apple\", 1.0)\n        self.calc.remove_item(\"Apple\")\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_remove_non_existent_item(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Ghost\")\n\n    def test_remove_item_from_empty_list(self):\n        with self.assertRaises(ValueError):\n            self.calc.remove_item(\"Ghost\")\n\n    def test_subtotal_empty_order(self):\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n\n    def test_subtotal_single_item(self):\n        self.calc.add_item(\"Book\", 15.0, 1)\n        self.assertEqual(self.calc.get_subtotal(), 15.0)\n\n    def test_subtotal_multiple_items(self):\n        self.calc.add_item(\"A\", 10.0, 1)\n        self.calc.add_item(\"B\", 20.0, 2)\n        self.assertEqual(self.calc.get_subtotal(), 50.0)\n\n    def test_subtotal_float_precision(self):\n        self.calc.add_item(\"A\", 10.1, 1)\n        self.calc.add_item(\"B\", 20.2, 1)\n        self.assertAlmostEqual(self.calc.get_subtotal(), 30.3)\n\n    def test_apply_discount_valid(self):\n        result = self.calc.apply_discount(100.0, 10.0)\n        self.assertEqual(result, 90.0)\n\n    def test_apply_discount_zero(self):\n        result = self.calc.apply_discount(100.0, 0.0)\n        self.assertEqual(result, 100.0)\n\n    def test_apply_discount_exceeds_subtotal(self):\n        result = self.calc.apply_discount(50.0, 60.0)\n        self.assertEqual(result, 0.0)\n\n    def test_apply_negative_discount(self):\n        with self.assertRaises(ValueError):\n            self.calc.apply_discount(100.0, -10.0)\n\n    def test_shipping_below_threshold(self):\n        shipping = self.calc.calculate_shipping(50.0)\n        self.assertEqual(shipping, 10.0)\n\n    def test_shipping_above_threshold(self):\n        shipping = self.calc.calculate_shipping(150.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_exactly_at_threshold(self):\n        shipping = self.calc.calculate_shipping(100.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_shipping_zero_subtotal(self):\n        shipping = self.calc.calculate_shipping(0.0)\n        self.assertEqual(shipping, 0.0)\n\n    def test_calculate_tax_standard(self):\n        tax = self.calc.calculate_tax(100.0)\n        self.assertEqual(tax, 23.0)\n\n    def test_calculate_tax_zero(self):\n        tax = self.calc.calculate_tax(0.0)\n        self.assertEqual(tax, 0.0)\n\n    def test_calculate_tax_rounding(self):\n        tax = self.calc.calculate_tax(10.0)\n        self.assertAlmostEqual(tax, 2.3)\n\n    def test_calculate_total_standard_flow(self):\n        self.calc.add_item(\"ExpensiveItem\", 200.0)\n        total = self.calc.calculate_total(discount=50.0)\n        self.assertAlmostEqual(total, 184.5)\n\n    def test_calculate_total_with_shipping(self):\n        self.calc.add_item(\"CheapItem\", 50.0)\n        total = self.calc.calculate_total(discount=0.0)\n        self.assertAlmostEqual(total, 71.5)\n\n    def test_calculate_total_empty(self):\n        total = self.calc.calculate_total()\n        self.assertEqual(total, 0.0)\n\n    def test_calculate_total_all_discounts(self):\n        self.calc.add_item(\"Item\", 10.0)\n        total = self.calc.calculate_total(discount=10.0)\n        self.assertEqual(total, 0.0)\n\n    def test_total_items_count(self):\n        self.calc.add_item(\"A\", 1, 2)\n        self.calc.add_item(\"B\", 1, 3)\n        self.assertEqual(self.calc.total_items(), 5)\n\n    def test_list_items_format(self):\n        self.calc.add_item(\"A\", 1, 1)\n        items = self.calc.list_items()\n        self.assertIsInstance(items, list)\n        self.assertTrue(all(isinstance(i, str) for i in items))\n        self.assertTrue(any(\"A\" in i for i in items))\n\n    def test_is_empty_true(self):\n        self.assertTrue(self.calc.is_empty())\n\n    def test_is_empty_false(self):\n        self.calc.add_item(\"A\", 1)\n        self.assertFalse(self.calc.is_empty())\n\n    def test_clear_order(self):\n        self.calc.add_item(\"A\", 1)\n        self.calc.clear_order()\n        self.assertTrue(self.calc.is_empty())\n        self.assertEqual(self.calc.get_subtotal(), 0.0)\n```",
    "total_response_time": 121.63788533210754,
    "strategy": "chain_of_thought_prompting",
    "context_type": "interface"
  }
}